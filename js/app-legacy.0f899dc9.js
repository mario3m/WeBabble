(function(e){function t(t){for(var a,r,i=t[0],c=t[1],u=t[2],l=0,f=[];l<i.length;l++)r=i[l],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&f.push(s[r][0]),s[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);g&&g(t);while(f.length)f.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,r=1;r<n.length;r++){var i=n[r];0!==s[i]&&(a=!1)}a&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},r={app:0},s={app:0},o=[];function i(e){return c.p+"js/"+({}[e]||e)+"-legacy."+{"chunk-031daaff":"5804c883","chunk-17b48d30":"e814ed75","chunk-2d0b9e05":"6ac14c84","chunk-3827b64d":"0e3a4726","chunk-38df32fb":"e5dd9f1c","chunk-3b229f4d":"bcc8ae5b","chunk-5339009b":"87b50295","chunk-795d24e4":"f555ca25","chunk-7b173f83":"60e7691b","chunk-b6507cf4":"a42c612a","chunk-c911e686":"227f16cd"}[e]+".js"}function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-031daaff":1,"chunk-17b48d30":1,"chunk-3827b64d":1,"chunk-38df32fb":1,"chunk-3b229f4d":1,"chunk-5339009b":1,"chunk-795d24e4":1,"chunk-7b173f83":1,"chunk-b6507cf4":1,"chunk-c911e686":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-031daaff":"dfae9c47","chunk-17b48d30":"2001ecb7","chunk-2d0b9e05":"31d6cfe0","chunk-3827b64d":"88fdbb4d","chunk-38df32fb":"c360b1e8","chunk-3b229f4d":"fad0e45c","chunk-5339009b":"d2b98039","chunk-795d24e4":"1e5e010e","chunk-7b173f83":"25996bfb","chunk-b6507cf4":"d6857d1d","chunk-c911e686":"60074e12"}[e]+".css",s=c.p+a,o=document.getElementsByTagName("link"),i=0;i<o.length;i++){var u=o[i],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===a||l===s))return t()}var f=document.getElementsByTagName("style");for(i=0;i<f.length;i++){u=f[i],l=u.getAttribute("data-href");if(l===a||l===s)return t()}var g=document.createElement("link");g.rel="stylesheet",g.type="text/css",g.onload=t,g.onerror=function(t){var a=t&&t.target&&t.target.src||s,o=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=a,delete r[e],g.parentNode.removeChild(g),n(o)},g.href=s;var d=document.getElementsByTagName("head")[0];d.appendChild(g)})).then((function(){r[e]=0})));var a=s[e];if(0!==a)if(a)t.push(a[2]);else{var o=new Promise((function(t,n){a=s[e]=[t,n]}));t.push(a[2]=o);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=i(e);var f=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(g);var n=s[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;f.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",f.name="ChunkLoadError",f.type=a,f.request=r,n[1](f)}s[e]=void 0}};var g=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var f=0;f<u.length;f++)t(u[f]);var g=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var a=n("1356"),r=n.n(a);r.a},1356:function(e,t,n){},2140:function(e,t,n){},2561:function(e,t,n){"use strict";var a=n("2140"),r=n.n(a);r.a},"4c51":function(e,t,n){"use strict";t["a"]={ERROR_GENERIC_CONNECTION_PROBLEM:"Parece que ha habido un problema de conexión. Por favor, vuelve a intentarlo más tarde.",ERROR_ALREADY_AN_ACCOUNT_WITH_THIS_EMAIL:"Ya existe una cuenta registrada con ese E-mail",ERROR_ALREADY_AN_ACCOUNT_WITH_THIS_USERNAME:"Ya existe un usuario con ese nombre",ERROR_WRONG_EMAIL_PASSWORD_COMBINATION:"No existe una cuenta registrada con este E-mail o la contraseña es incorrecta",ERROR_UPLOADING_IMAGE:"Error subiendo la imagen",ERROR_SOMETHING_HAPPENED:"Parece que ha ocurrido un error",ERROR_API_FILEREADER_NOT_SUPPORTED:"Lo sentimos, la API FileReader no está soportada",RULE_TEXT_MANDATORY_FIELD:"Este campo es obligatorio",RULE_MIN_VALUE_CHARACTERS_USERNAME:4,RULE_TEXT_MIN_VALUE_CHARACTERS_USERNAME:"Mínimo 4 caracteres",RULE_TEXT_MIN_VALUE_CHARACTERS_USERNAME_TO_START_SEARCHING:"Mínimo 4 caracteres para realizar la búsqueda",RULE_MIN_VALUE_CHARACTERS_USER_DESCRIPTION:20,RULE_TEXT_MIN_VALUE_CHARACTERS_USER_DESCRIPTION:"Mínimo 20 caracteres",ASK_FOR_IMAGE_SELECTION:"Por favor, selecciona una imagen",DATABASE_USERNAME_FIELD:"username",DATABASE_GENDER_FIELD:"gender",DATABASE_BIRTHDATE_FIELD:"birthDate",DATABASE_KNOWN_LANGUAGES_FIELD:"knownLanguages",DATABASE_LANGUAGES_TO_LEARN_FIELD:"languagesToLearn",DATABASE_AVG_RATING_FIELD:"avgRating",DATABASE_NUM_RATINGS_FIELD:"numRatings",DATABASE_DATE_FIELD:"date",RANKING_PAGE_SIZE:2,SEARCHED_USERS_PAGE_SIZE:2,EVENTS_PAGE_SIZE:1,DATABASE_COLLECTION_EVENTS:"Events",MIN_USER_AGE:16,MAX_USER_AGE:100,TEXT_LANGUAGES_YOU_WANT_TO_IMPROVE:"¿Qué idiomas buscas mejorar?",TEXT_LANGUAGES_YOU_WANT_TO_PRACTICE:"Idiomas que quieres practicar",TEXT_LANGUAGES_YOU_SPEAK_FLUENTLY:"¿Qué idiomas hablas con soltura?",TEXT_MOTHER_LANGUAGES:"Idiomas maternos",TEXT_LANGUAGE_HE_SHE_WANT_TO_IMPROVE:"Idioma que busca mejorar",TEXT_LANGUAGE_HE_SHE_WANT_TO_PRACTICE:"Idioma que quiere practicar",TEXT_LANGUAGE_HE_SHE_SPEAK_FLUENTLY:"Idioma que habla con soltura",TEXT_MOTHER_LANGUAGE:"Idioma materno",TEXT_LANGUAGE:"Idioma",TEXT_GENDER:"Género",TEXT_DISTANCE:"Distancia",TEXT_AGE:"Edad",TEXT_FILTER_BY_MOTHER_LANGUAGE:"Filtrar por idioma materno",TEXT_FILTER_BY_LANGUAGE_TO_LEARN:"Filtrar por idioma que quiere practicar",TEXT_SEARCH:"Buscar",TEXT_NO_FIT_USERS_TO_LIST:"No se han encontrado usuarios que cumplan con los requisitos.",TEXT_FILTERS:"Filtros",TEXT_RATE_USER:"Valora al usuario",TEXT_YOU:"Tú",TEXT_CANCEL:"Cancelar",TEXT_RATE:"Valorar",TEXT_REMOVE:"Eliminar",TEXT_WATCH_MORE:"Ver más",TEXT_COULD_NOT_SET_YOUR_RATING:"Parece que ha habido un problema: No se ha podido guardar su valoración.",TEXT_PROBLEM_RETRIEVING_RANKING:"Parece que ha habido un problema al cargar el ranking. Por favor, comprueba tu conexión.",TEXT_PROBLEM_GETTING_CURRENT_LOCATION:"Parece que ha habido un problema: no se ha podido obtener tu localizacion actual.",TEXT_PROBLEM_GETTING_NEARBY_USERS:"Parece que ha habido un problema: no se han podido obtener los usuarios cercanos.",TEXT_PROBLEM_GETTING_EVENTS:"Parece que ha habido un problema: no se han podido obtener los eventos.",TEXT_NO_LIMIT:"Sin límite",TEXT_1_KM:"1 km",TEXT_5_KM:"5 km",TEXT_10_KM:"10 km",TEXT_REMOVE_FILTERS:"Eliminar filtros",TEXT_YOUR_PROFILE:"Tu perfil",TEXT_EDIT:"Editar",TEXT_USERS:"Usuarios",TEXT_TO_FILTER:"Filtrar",TEXT_EVENTS:"Eventos",TEXT_RANKING:"Ranking",TEXT_CHATS:"Chats",TEXT_CHAT:"Chat",TEXT_CLOSE:"Cerrar",MONTHS_OF_THE_YEAR_IN_TEXT:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],TEXT_SHOW_USERS:"Mostrar usuarios",TEXT_OF:"de"}},"56d7":function(e,t,n){"use strict";n.r(t);n("551c"),n("cadf"),n("8a81"),n("f751");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[e.dataReady?n("div",[n("router-view",{staticStyle:{width:"100%"}})],1):e._e(),e.dataReady?e._e():n("div",{attrs:{id:"loading"}},[n("v-progress-circular",{attrs:{size:70,width:7,color:"primary",indeterminate:""}})],1)])},s=[],o=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),i=n("2f62"),c=n("8aa5"),u=n.n(c);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(n,!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g={name:"App",components:{},data:function(){return{dataReady:!1}},methods:f({},Object(i["b"])(["getAppInfoForLoggedUserFirebase"]),{getAppInfoForLoggedUser:function(){var e=this,t=e.getAppInfoForLoggedUserFirebase();return t.then((function(){e.dataReady=!0})).catch((function(e){console.error(e)})),t}}),created:function(){var e=this;u.a.auth().onAuthStateChanged((function(t){t?e.getAppInfoForLoggedUser():e.dataReady=!0}))}},d=g,h=(n("034f"),n("2877")),m=n("6544"),I=n.n(m),E=n("7496"),_=n("490a"),b=Object(h["a"])(d,r,s,!1,null,null,null),p=b.exports;I()(b,{VApp:E["a"],VProgressCircular:_["a"]});var v=n("8c4f"),R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"img-back"},[a("v-container",{staticClass:"home",staticStyle:{height:"100%",position:"relative",width:"100%"},attrs:{align:"center"}},[a("div",{staticStyle:{width:"100%"},attrs:{align:"center"}},[a("img",{attrs:{src:n("cf05")}})]),a("div",{staticClass:"bottom-centered-buttons",attrs:{align:"center"}},[a("div",{staticStyle:{width:"100%"},attrs:{align:"center"}},[a("router-link",{attrs:{to:"/sign-up"}},[a("v-btn",{staticStyle:{width:"100%"},attrs:{color:"primary"}},[e._v("Crear una cuenta")])],1)],1),a("br"),a("div",{staticStyle:{width:"100%"},attrs:{align:"center"}},[a("router-link",{attrs:{to:"/login"}},[a("v-btn",{staticStyle:{width:"100%"},attrs:{color:"primary"}},[e._v("Iniciar sesiónUWU")])],1)],1)])])],1)},T=[],O={name:"home"},A=O,U=(n("2561"),n("8336")),N=n("a523"),D=Object(h["a"])(A,R,T,!1,null,"21251130",null),C=D.exports;I()(D,{VBtn:U["a"],VContainer:N["a"]});var w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"login",staticStyle:{position:"relative"}},[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("h2",[e._v("Accede a tu cuenta")])])],1),n("v-col",{attrs:{cols:"12"}},[n("v-card",[n("v-progress-linear",{attrs:{value:"100",height:"10",color:"blue-grey",reactive:"",dark:""}}),n("v-container",[n("v-form",{model:{value:e.validForm,callback:function(t){e.validForm=t},expression:"validForm"}},[n("v-text-field",{attrs:{rules:[e.rules.required],label:"E-mail",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),n("v-text-field",{attrs:{rules:[e.rules.required],"append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",type:e.showPassword?"text":"password",label:"Contraseña"},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),n("v-btn",{attrs:{block:"",color:"primary",disabled:e.buttonIsDisabled},on:{click:e.login}},[e._v("Iniciar sesión")])],1)],1)],1),n("v-col",{attrs:{cols:"12",align:"center"}},[n("p",[n("router-link",{attrs:{to:"/send-change-password-email"}},[e._v("¿Has olvidado tu contraseña?")])],1)]),n("v-col",{attrs:{cols:"12",align:"center",id:"sign-up-now-claim"}},[n("p",[e._v("¿Todavía no tienes una cuenta?\n            "),n("router-link",{attrs:{to:"/sign-up"}},[e._v("¡Regístrate ahora!")])],1)]),n("v-snackbar",{attrs:{timeout:4e3},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n        "+e._s(e.snackbarText)+"\n        "),n("v-btn",{attrs:{color:"blue",text:""},on:{click:function(t){e.snackbar=!1}}},[e._v("\n            "+e._s(e.closeText)+"\n        ")])],1)],1)},P=[],L=(n("a481"),n("4c51"));function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(n,!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k={name:"login",data:function(){return{validForm:!1,email:"",password:"",showPassword:!1,buttonIsDisabled:!0,snackbar:!1,snackbarText:"",rules:{required:function(e){return!!e||"Este campo es obligatorio"}},closeText:L["a"].TEXT_CLOSE}},methods:y({},Object(i["b"])(["loginUserFirebase"]),{login:function(){var e=this,t=this.loginUserFirebase({email:this.email,password:this.password});t.then((function(t){t.user.emailVerified?e.$router.replace("dashboard"):e.$router.push("email-verification")})).catch((function(e){self.snackbarText=e,self.snackbar=!0}))}}),watch:{validForm:function(e){this.buttonIsDisabled=!e}}},F=k,x=n("b0af"),B=n("62ad"),M=n("4bd4"),V=n("8e36"),G=n("0fd9"),j=n("2db4"),X=n("8654"),H=Object(h["a"])(F,w,P,!1,null,"72cc85f0",null),q=H.exports;I()(H,{VBtn:U["a"],VCard:x["a"],VCol:B["a"],VContainer:N["a"],VForm:M["a"],VProgressLinear:V["a"],VRow:G["a"],VSnackbar:j["a"],VTextField:X["a"]});var Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("h2",[e._v("Crea tu cuenta")])]),n("v-col",{attrs:{cols:"12"}},[n("v-card",[n("v-progress-linear",{attrs:{value:"50",height:"10",color:"blue-grey",reactive:"",dark:""}}),n("v-container",[n("v-form",{model:{value:e.validForm,callback:function(t){e.validForm=t},expression:"validForm"}},[n("v-text-field",{attrs:{rules:[e.rules.required],label:"Nombre",required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),n("v-text-field",{attrs:{rules:[e.rules.required],label:"Apellidos",required:""},model:{value:e.lastName,callback:function(t){e.lastName=t},expression:"lastName"}}),n("v-text-field",{attrs:{rules:[e.rules.required,e.rules.email],label:"E-mail",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),n("v-text-field",{attrs:{rules:[e.rules.required,e.rules.min8Char,e.rules.samePassword],"append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",type:e.showPassword?"text":"password",label:"Contraseña",hint:"Mínimo 8 caracteres",counter:"",required:""},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("v-text-field",{attrs:{rules:[e.rules.required,e.rules.min8Char,e.rules.samePassword],"append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",type:e.showPassword?"text":"password",label:"Repite la contraseña",hint:"Mínimo 8 caracteres",counter:"",required:""},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.password2,callback:function(t){e.password2=t},expression:"password2"}})],1),n("v-btn",{attrs:{block:"",color:"primary",disabled:e.buttonIsDisabled},on:{click:e.signUp}},[e._v("Registrar")])],1)],1)],1),n("v-col",{attrs:{cols:"12",align:"center",id:"login-now-claim"}},[n("p",[e._v("¿Ya tienes una cuenta? "),n("router-link",{attrs:{to:"/login"}},[e._v("¡Accede ahora!")])],1)])],1),n("v-snackbar",{attrs:{timeout:4e3},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n        "+e._s(e.snackbarText)+"\n        "),n("v-btn",{attrs:{color:"blue",text:""},on:{click:function(t){e.snackbar=!1}}},[e._v("\n            "+e._s(e.closeText)+"\n        ")])],1)],1)},W=[];n("7f7f");function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(n,!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z={name:"signUp",data:function(){var e=this;return{validForm:!1,name:"",lastName:"",email:"",password:"",password2:"",showPassword:!1,buttonIsDisabled:!0,snackbar:!1,snackbarText:"",rules:{required:function(e){return!!e||L["a"].RULE_TEXT_MANDATORY_FIELD},min8Char:function(e){return e.length>=8||0==e.length||"Mínimo 8 caracteres"},email:function(e){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)||"E-mail no válido"},samePassword:function(t){return 0==t.localeCompare(e.password)||"Las contraseñas no coinciden"}},closeText:L["a"].TEXT_CLOSE}},methods:K({},Object(i["b"])(["isUsernameInUseFirebase","registerUserFirebase"]),{signUp:function(){var e=this,t=this.registerUserFirebase({name:this.name,lastName:this.lastName,email:this.email,password:this.password});t.then((function(){console.log("Successfully updated user"),e.$router.push("email-verification")})).catch((function(t){e.snackbarText=t,e.snackbar=!0}))}}),watch:{validForm:function(e){this.buttonIsDisabled=!e}}},Z=z,J=Object(h["a"])(Z,Y,W,!1,null,"a312ef40",null),Q=J.exports;I()(J,{VBtn:U["a"],VCard:x["a"],VCol:B["a"],VContainer:N["a"],VForm:M["a"],VProgressLinear:V["a"],VRow:G["a"],VSnackbar:j["a"],VTextField:X["a"]});var ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"email-verification"},[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("h2",[e._v("Verifica tu E-mail")])])],1),n("v-col",{attrs:{cols:"12"}},[n("v-card",[n("v-progress-linear",{attrs:{value:"100",height:"10",color:"blue-grey",reactive:"",dark:""}}),n("v-container",[n("v-row",[n("v-col",{attrs:{align:"center"}},[n("br"),n("br"),n("v-progress-circular",{attrs:{size:"100",color:"primary",indeterminate:""}}),n("br"),n("br")],1)],1),n("v-row",[n("v-col",[e._v("\n                        Para poder continuar, completa el proceso de verificación a través del enlace que hemos enviado a tu E-mail.\n                    ")])],1)],1)],1)],1),n("v-snackbar",{attrs:{timeout:4e3},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n        "+e._s(e.snackbarText)+"\n        "),n("v-btn",{attrs:{color:"blue",text:""},on:{click:function(t){e.snackbar=!1}}},[e._v("\n            "+e._s(e.closeText)+"\n        ")])],1)],1)},te=[];function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(n,!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var re={name:"emailVerification",data:function(){return{sendEmailButtonIsDisabled:!0,snackbar:!1,snackbarText:"",isEmailVerified:!1,intervalCheckEmailVerified:null,user:null,closeText:L["a"].TEXT_CLOSE}},methods:ae({},Object(i["b"])(["sendEmailVerificationFirebase","checkEmailVerifiedFirebase"]),{sendEmailVerification:function(){var e=this,t=this.sendEmailVerificationFirebase();t.catch((function(t){e.snackbarText=t,e.snackbar=!0}))},checkEmailVerified:function(){var e=this,t=this.checkEmailVerifiedFirebase();t.then((function(t){t&&(clearInterval(e.intervalCheckEmailVerified),e.$router.replace("fill-your-profile-info"))})).catch((function(t){e.snackbarText=t,e.snackbar=!0}))}}),beforeMount:function(){this.sendEmailVerification(),this.intervalCheckEmailVerified=setInterval(this.checkEmailVerified,2e3)}},se=re,oe=Object(h["a"])(se,ee,te,!1,null,"7d13d96e",null),ie=oe.exports;I()(oe,{VBtn:U["a"],VCard:x["a"],VCol:B["a"],VContainer:N["a"],VProgressCircular:_["a"],VProgressLinear:V["a"],VRow:G["a"],VSnackbar:j["a"]});var ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("h2",[e._v("Rellena tu perfil")])]),n("v-col",{attrs:{cols:"12"}},[n("v-card",[n("v-progress-linear",{attrs:{value:"25",height:"10",color:"blue-grey",reactive:"",dark:""}}),n("v-container",[n("v-form",{model:{value:e.validForm,callback:function(t){e.validForm=t},expression:"validForm"}},[n("v-text-field",{attrs:{rules:[e.rules.required,e.rules.min4Char,e.rules.validUsername],label:"Nombre de usuario",counter:"",maxlength:"10",required:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),n("v-dialog",{ref:"dialog",attrs:{"return-value":e.birthDate,persistent:""},on:{"update:returnValue":function(t){e.birthDate=t},"update:return-value":function(t){e.birthDate=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-text-field",e._g({attrs:{label:"Fecha de nacimiento","append-icon":"mdi-calendar",rules:[e.rules.required,e.rules.minAge],readonly:"",required:""},model:{value:e.birthDateInTextMonthFormat,callback:function(t){e.birthDateInTextMonthFormat=t},expression:"birthDateInTextMonthFormat"}},a))]}}]),model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[n("v-date-picker",{attrs:{scrollable:"",width:"97%",locale:"es"},model:{value:e.birthDate,callback:function(t){e.birthDate=t},expression:"birthDate"}},[n("v-spacer"),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.modal=!1}}},[e._v("Cancel")]),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.dialog.save(e.birthDate)}}},[e._v("OK")])],1)],1),n("v-select",{staticStyle:{"margin-top":"15px"},attrs:{rules:[e.rules.required],items:e.genderOptions,"item-value":"id","item-text":"option",label:"Género",dense:"","return-object":""},scopedSlots:e._u([{key:"item",fn:function(t){var a=t.item;return[n("v-avatar",[n("img",{staticStyle:{height:"60%",width:"auto"},attrs:{src:a.img}})]),e._v("\n                                "+e._s(a.name)+"\n                            ")]}},{key:"selection",fn:function(t){var a=t.item;t.select,t.selected;return[n("v-avatar",[n("img",{staticStyle:{height:"50%",width:"auto"},attrs:{src:a.img}})]),e._v("\n                                "+e._s(a.name)+"\n                            ")]}}]),model:{value:e.gender,callback:function(t){e.gender=t},expression:"gender"}}),n("v-textarea",{staticStyle:{"margin-top":"15px"},attrs:{outlined:"",rules:[e.rules.required,e.rules.min20Char],label:"Cuéntanos un poco sobre ti",required:"",counter:"",maxlength:"140"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),n("v-btn",{attrs:{block:"",color:"primary",disabled:e.buttonIsDisabled},on:{click:e.setProfileInfo}},[e._v("Continuar")])],1)],1)],1),n("v-snackbar",{attrs:{timeout:4e3},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n            "+e._s(e.snackbarText)+"\n            "),n("v-btn",{attrs:{color:"blue",text:""},on:{click:function(t){e.snackbar=!1}}},[e._v("\n                "+e._s(e.closeText)+"\n        ")])],1)],1)],1)},ue=[],le=(n("96cf"),n("3b8d"));function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(n,!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var de=16,he={name:"fillYourProfileInfo",data:function(){var e=this;return{buttonIsDisabled:!0,snackbar:!1,snackbarText:"",username:"",birthDate:null,birthDateDateFormat:null,firstTimeOpenCalendar:!0,menu:!1,modal:!1,description:"",gender:null,validForm:!1,genderOptions:this.$store.getters.getAllAvailableGendersAsArray,rules:{required:function(e){return!!e||"Este campo es obligatorio"},min4Char:function(e){return e.length>=L["a"].RULE_MIN_VALUE_CHARACTERS_USERNAME||0==e.length||L["a"].RULE_TEXT_MIN_VALUE_CHARACTERS_USERNAME},min20Char:function(e){return e.length>=L["a"].RULE_MIN_VALUE_CHARACTERS_USER_DESCRIPTION||0==e.length||L["a"].RULE_TEXT_MIN_VALUE_CHARACTERS_USER_DESCRIPTION},minAge:function(t){var n,a=new Date(t),r=new Date;return r.setHours(0,0,0),n=!(r.getFullYear()-a.getFullYear()<de)&&(r.getFullYear()-a.getFullYear()!=de||!(r.getMonth()<a.getMonth())&&(r.getMonth()!=a.getMonth()||!(r.getDate()<a.getDate()))),n||"Debes tener al menos"+e.minimumAge+" años para poder registrarte"},validUsername:function(e){var t=/[a-zA-Z_]+[a-zA-Z0-9_]*/,n=/^_/,a=/_[_]+/;return t.test(e)&&!n.test(e)&&!a.test(e)||"Nombre de usuario no válido"}},closeText:L["a"].TEXT_CLOSE}},methods:ge({},Object(i["b"])(["setUserProfileInfoFirebase","isUsernameInUseFirebase"]),{setProfileInfo:function(){var e=Object(le["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.isUsernameInUseFirebase(this.username);case 3:if(!e.sent){e.next=7;break}return this.snackbarText=L["a"].ERROR_ALREADY_AN_ACCOUNT_WITH_THIS_USERNAME,this.snackbar=!0,e.abrupt("return");case 7:e.next=14;break;case 9:return e.prev=9,e.t0=e["catch"](0),this.snackbarText=e.t0,this.snackbar=!0,e.abrupt("return");case 14:t=this.setUserProfileInfoFirebase({username:this.username,birthDate:new Date(this.birthDate).setHours(0,0,0),gender:this.gender.id,description:this.description}),t.then((function(){n.$router.push("fill-your-languages")})).catch((function(e){n.snackbarText=e,n.snackbar=!0}));case 16:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(){return e.apply(this,arguments)}return t}(),setDefaultBirthDate:function(){if(this.firstTimeOpenCalendar){var e=new Date;e.setFullYear(e.getFullYear()-de),this.birthDate=e.toISOString().substr(0,10),this.firstTimeOpenCalendar=!1}}}),computed:{birthDateInTextMonthFormat:function(){return this.$store.getters.getFormattedDateInTextMonth(this.birthDate)}},watch:{validForm:function(e){this.buttonIsDisabled=!e}},mounted:function(){this.setDefaultBirthDate()}},me=he,Ie=n("8212"),Ee=n("2e4b"),_e=n("169a"),be=n("b974"),pe=n("2fa4"),ve=n("a844"),Re=Object(h["a"])(me,ce,ue,!1,null,"2487bd62",null),Te=Re.exports;I()(Re,{VAvatar:Ie["a"],VBtn:U["a"],VCard:x["a"],VCol:B["a"],VContainer:N["a"],VDatePicker:Ee["a"],VDialog:_e["a"],VForm:M["a"],VProgressLinear:V["a"],VRow:G["a"],VSelect:be["a"],VSnackbar:j["a"],VSpacer:pe["a"],VTextField:X["a"],VTextarea:ve["a"]});var Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("h2",[e._v("Tus idiomas")])])],1),n("v-col",{attrs:{cols:"12"}},[n("v-card",[n("v-progress-linear",{attrs:{value:"50",height:"10",color:"blue-grey",reactive:"",dark:""}}),n("YourLanguagesSelector")],1)],1)],1)},Ae=[],Ue=n("9a99"),Ne={name:"FillYourLanguages",data:function(){return{buttonIsDisabled:!0}},methods:{},components:{YourLanguagesSelector:Ue["a"]}},De=Ne,Ce=Object(h["a"])(De,Oe,Ae,!1,null,"750a1a58",null),we=Ce.exports;I()(Ce,{VCard:x["a"],VCol:B["a"],VContainer:N["a"],VProgressLinear:V["a"],VRow:G["a"]});var Pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticStyle:{height:"100%",position:"relative",width:"100%"},attrs:{align:"center"}},[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("h2",[e._v("Elige tu foto de perfil")])])],1),n("v-row",{staticStyle:{height:"100%"}},[n("v-col",{staticStyle:{height:"100%"},attrs:{cols:"12",sm:"6","offset-sm":"3",md:"4","offset-md":"4"}},[n("v-card",{staticClass:"mx-auto",staticStyle:{height:"75%"},attrs:{align:"center"}},[n("v-progress-linear",{attrs:{value:"100",height:"10px",color:"blue-grey",dark:""}}),n("v-avatar",{staticClass:"thumbnail",staticStyle:{width:"95%","padding-top":"95%","vertical-align":"top",position:"relative","margin-top":"5%"}},[e.showImg?n("img",{staticClass:"white--text align-end",staticStyle:{width:"100%",position:"absolute",top:"0",height:"100%","object-position":"center","object-fit":"cover"},attrs:{"aspect-ratio":1,src:e.imagePreview}}):e._e()]),n("v-btn",{staticClass:"button-open-camera",attrs:{absolute:"",dark:"",fab:"",right:"",color:"primary"},on:{click:function(t){return e.$refs.myFiles.click()}}},[n("v-icon",[e._v("mdi-camera")])],1),n("v-container",{staticClass:"bottom-centered-buttons"},[n("v-btn",{attrs:{block:"",color:"primary",disabled:e.buttonIsDisabled},on:{click:e.uploadUserProfileImage}},[e._v("Continuar")])],1)],1)],1)],1),n("input",{ref:"myFiles",attrs:{hidden:"",type:"file",accept:"image/*",capture:""},on:{change:e.previewFiles}}),n("v-snackbar",{attrs:{timeout:4e3},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n        "+e._s(e.snackbarText)+"\n        "),n("v-btn",{attrs:{color:"blue",text:""},on:{click:function(t){e.snackbar=!1}}},[e._v("\n            "+e._s(e.closeText)+"\n        ")])],1)],1)},Le=[],Se=(n("6762"),n("2fdb"),n("4627"));function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(n,!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fe={name:"SetYourProfileImage",data:function(){return{showImg:!0,imagePreview:this.$store.getters.getDefaultInfoUserImageByGender,buttonIsDisabled:!1,imageUpload:null,snackbar:!1,snackbarText:"",closeText:L["a"].TEXT_CLOSE}},methods:ke({},Object(i["b"])(["setUserProfileImageDatabase"]),{previewFiles:function(){var e=this;if(this.$refs.myFiles.files.length>0){if(!this.$refs.myFiles.files[0].type.includes("image/"))return this.snackbarText=L["a"].ASK_FOR_IMAGE_SELECTION,void(this.snackbar=!0);var t=this.$refs.myFiles.files[0],n={maxSizeMB:.5,maxWidthOrHeight:500,useWebWorker:!0};Object(Se["a"])(t,n).then((function(t){if("function"===typeof FileReader){var n=new FileReader;n.onload=function(t){e.imgSrc=t.target.result,e.imagePreview=e.imgSrc,e.imageUpload=e.imagePreview.replace("data:image/jpeg;base64,","").replace("data:image/png;base64,",""),console.log(e.imagePreview),e.showImg=!1,a["a"].nextTick((function(){e.showImg=!0}))},n.readAsDataURL(t)}else e.snackbarText=L["a"].ERROR_API_FILEREADER_NOT_SUPPORTED,e.snackbar=!0})).catch((function(e){console.log(e.message)}))}else console.warn("img error")},uploadUserProfileImage:function(){var e=this,t=this,n=this.setUserProfileImageDatabase(t.imageUpload);n.then((function(){e.$router.replace("dashboard")})).catch((function(e){t.snackbarText=e,t.snackbar=!0}))}})},xe=Fe,Be=(n("f015"),n("132d")),Me=Object(h["a"])(xe,Pe,Le,!1,null,"fba930d0",null),Ve=Me.exports;I()(Me,{VAvatar:Ie["a"],VBtn:U["a"],VCard:x["a"],VCol:B["a"],VContainer:N["a"],VIcon:Be["a"],VProgressLinear:V["a"],VRow:G["a"],VSnackbar:j["a"]});var Ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"send-change-password-email",staticStyle:{position:"relative"}},[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("h2",[e._v("¿Has olvidado tu contraseña?")])])],1),n("v-col",{attrs:{cols:"12"}},[n("v-card",[n("v-progress-linear",{attrs:{height:"10",color:"blue-grey",reactive:"",dark:""},model:{value:e.progressValue,callback:function(t){e.progressValue=t},expression:"progressValue"}}),n("v-container",[n("p",{attrs:{align:"justify"}},[e._v("\n                    ¿Has olvidado tu contraseña? Introduce tu E-mail y te ayudaremos a recuperarla:\n                ")]),n("v-form",{model:{value:e.validForm,callback:function(t){e.validForm=t},expression:"validForm"}},[n("v-text-field",{attrs:{rules:[e.rules.required,e.rules.email],label:"E-mail",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),n("br"),n("v-btn",{attrs:{block:"",color:"primary",disabled:e.buttonIsDisabled},on:{click:e.sendChangePasswordEmail}},[e._v("Restablecer contraseña")])],1)],1)],1),n("v-dialog",{model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("br"),n("v-card-text",{staticStyle:{color:"black","padding-bottom":"0px"},attrs:{align:"justify"}},[n("p",{staticStyle:{"margin-bottom":"7px"}},[e._v("En un breve período de tiempo recibirás un email. Ábrelo y sigue las instrucciones para restablecer tu contraseña.")])]),n("v-card-actions",{staticStyle:{"padding-bottom":"15px"}},[n("v-spacer"),n("v-btn",{attrs:{color:"primary"},on:{click:e.redirectToHome}},[e._v("\n                    Entendido\n                ")]),n("v-spacer")],1)],1)],1),n("v-snackbar",{attrs:{timeout:4e3},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n        "+e._s(e.snackbarText)+"\n        "),n("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){e.snackbar=!1}}},[e._v("\n            "+e._s(e.closeText)+"\n        ")])],1)],1)},je=[],Xe={name:"SendChangePasswordEmail",data:function(){return{progressValue:100,validForm:!1,email:"",buttonIsDisabled:!0,dialog:!1,snackbar:!1,snackbarText:"Parece que ha habido un problema de conexión. Por favor, vuelve a intentarlo más tarde.",rules:{required:function(e){return!!e||"Este campo es obligatorio"},email:function(e){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)||"E-mail no válido"}},closeText:L["a"].TEXT_CLOSE}},methods:{sendChangePasswordEmail:function(){var e=c["auth"](),t=this;e.sendPasswordResetEmail(this.email).then((function(){t.dialog=!0})).catch((function(e){console.warn(e),"auth/user-not-found"!=e.code?t.snackbar=!0:t.dialog=!0}))},redirectToHome:function(){this.dialog=!1,this.$router.replace("home")}},watch:{validForm:function(e){this.buttonIsDisabled=!e}}},He=Xe,qe=n("99d9"),Ye=Object(h["a"])(He,Ge,je,!1,null,"5948e7e4",null),We=Ye.exports;I()(Ye,{VBtn:U["a"],VCard:x["a"],VCardActions:qe["a"],VCardText:qe["b"],VCol:B["a"],VContainer:N["a"],VDialog:_e["a"],VForm:M["a"],VProgressLinear:V["a"],VRow:G["a"],VSnackbar:j["a"],VSpacer:pe["a"],VTextField:X["a"]}),a["a"].use(v["a"]);var $e=new v["a"]({base:"/",routes:[{path:"*",redirect:"/home"},{path:"/",redirect:"/home"},{path:"/home",name:"home",component:C},{path:"/login",name:"login",component:q},{path:"/sign-up",name:"signUp",component:Q},{path:"/email-verification",name:"emailVerification",component:ie,meta:{requiresAuth:!0}},{path:"/fill-your-profile-info",name:"fillYourProfileInfo",component:Te,meta:{requiresAuth:!0}},{path:"/fill-your-languages",name:"fillYourLanguages",component:we,meta:{requiresAuth:!0}},{path:"/set-your-profile-image",name:"setYourProfileImage",component:Ve,meta:{requiresAuth:!0}},{path:"/send-change-password-email",name:"sendChangePasswordEmail",component:We,meta:{requiresAuth:!1}},{path:"/dashboard",name:"dashboard",redirect:{name:"profileHome"},meta:{requiresAuth:!0},component:function(){return n.e("chunk-031daaff").then(n.bind(null,"7277"))},children:[{path:"ranking",name:"rankingHome",meta:{requiresAuth:!0,menu:"ranking"},component:function(){return n.e("chunk-c911e686").then(n.bind(null,"185c"))}},{path:"ranking/user/:id/",name:"userProfileRanking",meta:{requiresAuth:!0,menu:"ranking"},component:function(){return n.e("chunk-795d24e4").then(n.bind(null,"4a39"))}},{path:"events",name:"eventsHome",meta:{requiresAuth:!0,menu:"events"},component:function(){return n.e("chunk-3b229f4d").then(n.bind(null,"a58d"))}},{path:"event/:id/",name:"eventDescription",meta:{requiresAuth:!0,menu:"events"},component:function(){return n.e("chunk-7b173f83").then(n.bind(null,"2616"))}},{path:"search",name:"searchHome",meta:{requiresAuth:!0,menu:"search"},component:function(){return n.e("chunk-5339009b").then(n.bind(null,"c649"))}},{path:"search/filter",name:"searchFilter",meta:{requiresAuth:!0,menu:"search"},component:function(){return n.e("chunk-17b48d30").then(n.bind(null,"c3bc"))}},{path:"search/user/:id/",name:"userProfileSearch",meta:{requiresAuth:!0,menu:"search"},component:function(){return n.e("chunk-795d24e4").then(n.bind(null,"4a39"))}},{path:"chats",name:"chatHome",meta:{requiresAuth:!0,menu:"chats"},component:function(){return n.e("chunk-b6507cf4").then(n.bind(null,"35f2"))}},{path:"chats/chat/:id/",name:"chatWithUser",meta:{requiresAuth:!0,menu:"chats"},component:function(){return n.e("chunk-38df32fb").then(n.bind(null,"c6a4"))}},{path:"chats/user/:id/",name:"userProfileChat",meta:{requiresAuth:!0,menu:"chats"},component:function(){return n.e("chunk-795d24e4").then(n.bind(null,"4a39"))}},{path:"profile",name:"profileHome",meta:{requiresAuth:!0,menu:"profile"},component:function(){return n.e("chunk-3827b64d").then(n.bind(null,"7859"))}},{path:"profile/:id/edit",name:"profileEdit",meta:{requiresAuth:!0,menu:"profile"},component:function(){return n.e("chunk-2d0b9e05").then(n.bind(null,"358e"))}}]}]});$e.beforeEach((function(e,t,n){u.a.auth().currentUser,e.matched.some((function(e){return e.meta.requiresAuth}));n()}));var Ke=$e,ze=(n("5df3"),n("7514"),n("20d6"),n("5cdc"));n("4dce");a["a"].use(i["a"]);var Ze=new i["a"].Store({modules:{},state:{},getters:{},actions:{},mutations:{}});function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(n,!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}a["a"].use(i["a"]);var et=new i["a"].Store({modules:{events:Ze},state:{allAvailableLanguages:{de:"Alemán",zh:"Chino",es:"Español",fr:"Francés",en:"Inglés",it:"Italiano",ja:"Japonés",pt:"Portugués",all:"Cualquier idioma"},allAvailableGenders:{M:{name:"Hombre",img:"img/genders/male.svg"},W:{name:"Mujer",img:"img/genders/female.svg"}},defaultInfo:{userImage:"img/defaultUserImages/defaultUserImage.svg",maleUserImage:"img/defaultUserImages/male-defaultUserImage.svg",femaleUserImage:"img/defaultUserImages/female-defaultUserImage.svg",profileHeaderImage:"img/backgrounds/user_profile_header.png"},searchInfo:{lastVisible:null,userIDs:[],filtering:{genderW:!0,genderM:!0,ageRange:[L["a"].MIN_USER_AGE,L["a"].MAX_USER_AGE],maxDistance:3,maxDistanceRanges:[1e3,5e3,1e4,null],maxDistanceRangesText:[L["a"].TEXT_1_KM,L["a"].TEXT_5_KM,L["a"].TEXT_10_KM,"∞"],searchByUsername:!1,filterByLanguageToLearn:!0,knownLanguage:{id:"all",text:"Cualquier idioma"},languageToLearn:{id:"all",text:"Cualquier idioma"},nearbyUsersIDs:[]}},emailVerified:!1,userInfo:{uid:null,registrationState:null,username:null,email:null,name:null,lastName:null,birthDate:null,gender:null,description:null,knownLanguages:null,languagesToLearn:null,profileImage:null,chatIDs:[],chatUsers:[],chatIDsListener:null,avgRating:null,numRatings:null,location:{}},chats:[],chatsInfo:{activeChat:null},rankingInfo:{lastVisible:null,userIDs:[]},activeUser:[],eventsInfo:{lastVisible:null,events:[]},activeEventID:null,ratings:{},users:[]},getters:{notReadMessagesCountByChatID:function(e){return function(t){var n=e.chats.findIndex((function(e){return e.id==t})),a=0;return null!=n&&e.chats[n].messages.forEach((function(t){t.sender===e.userInfo.uid||t.read||a++})),a}},getProfileHeaderImage:function(e){return e.defaultInfo.profileHeaderImage},getUserIndexByUID:function(e){return function(t){return e.users.findIndex((function(e){return e.uid==t}))}},getUserByUID:function(e,t){return function(n){var a=t.getUserIndexByUID(n);return-1!=a?e.users[a]:null}},getRankingUsers:function(e,t){var n=[];return e.rankingInfo.userIDs.forEach((function(a){var r=t.getUserIndexByUID(a);-1!=r&&n.push(e.users[r])})),n},getSearchUsers:function(e,t){var n=[];return e.searchInfo.userIDs.forEach((function(a){var r=t.getUserIndexByUID(a);-1!=r&&n.push(e.users[r])})),n},getOtherUserInChatByChatID:function(e,t){return function(n){var a=t.getChatWithUserByChatID(n),r=null;return a.users.forEach((function(t){t!=e.userInfo.uid&&(r=t)})),null!=r?t.getUserByUID(r):null}},getEmailVerified:function(e){return e.emailVerified},getRatingOfUserByUID:function(e){return function(t){return e.ratings[t]}},getRegistrationState:function(e){return e.userInfo.registrationState},getChatsInfoActiveChat:function(e){return e.chatsInfo.activeChat},getActiveEvent:function(e){return e.eventsInfo.events.find((function(t){return t.id===e.activeEventID}))},getEvent:function(e){return function(t){return e.eventsInfo.events.find((function(e){return e.id===t}))}},getActiveChatUserID:function(e){return e.activeChat.userID},getChatUserByChatID:function(e){return function(t){return e.userInfo.chatUsers.find((function(e){return e.chatID==t}))}},getNewChatMessageIndex:function(e){return function(t){return e.chats[t].messages.length}},getSearchInfoUsers:function(e){return e.searchInfo.userIDs},getSearchInfoUserByUID:function(e){return function(t){return e.searchInfo.userIDs.find((function(e){return e.uid==t}))}},getChatWithUser:function(e){return e.chatWithUser},getChats:function(e){return e.chats},getSearchInfoFilteringFilterByLanguageToLearn:function(e){return e.searchInfo.filtering.filterByLanguageToLearn},getSearchInfoFiltering:function(e){return e.searchInfo.filtering},getSearchInfoLastVisible:function(e){return e.searchInfo.lastVisible},getSearchInfo:function(e){return e.searchInfo},getLanguageNameByID:function(e){return function(t){return e.allAvailableLanguages[t]}},getChatWithUserByChatID:function(e){return function(t){return e.chats.find((function(e){return e.id==t}))}},getAllAvailableLanguagesAsArray:function(e,t){return Object.keys(e.allAvailableLanguages).map((function(e){var n=t.getLanguageNameByID(e);return new Object({id:e,text:n})}))},getGenderNameByID:function(e){return function(t){return e.allAvailableGenders[t].name}},getAngleInRad:function(e){return function(e){return e*Math.PI/180}},getHaversineDistance:function(e,t){return function(e){var n=e.p1,a=e.p2,r=6378137,s=t.getAngleInRad(a.lat-n.lat),o=t.getAngleInRad(a.lng-n.lng),i=Math.sin(s/2)*Math.sin(s/2)+Math.cos(t.getAngleInRad(n.lat))*Math.cos(t.getAngleInRad(a.lat))*Math.sin(o/2)*Math.sin(o/2),c=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)),u=r*c;return u}},getGenderImgByID:function(e){return function(t){return e.allAvailableGenders[t].img}},getAllAvailableGendersAsArray:function(e,t){return Object.keys(e.allAvailableGenders).map((function(e){var n=t.getGenderNameByID(e),a=t.getGenderImgByID(e);return new Object({id:e,name:n,img:a})}))},getPathToFlagImageByLanguageID:function(){return function(e){return"img/flags/"+e+".svg"}},getDefaultInfoUserImage:function(e){return e.defaultInfo.userImage},getUserInfo:function(e){return e.userInfo},getUserInfoLocation:function(e){return e.userInfo.location},getUserInfoUID:function(e){return e.userInfo.uid},getUserInfoChatIDs:function(e){return e.userInfo.chatIDs},getMaleDefaultInfoUserImage:function(e){return e.defaultInfo.maleUserImage},getFemaleDefaultInfoUserImage:function(e){return e.defaultInfo.femaleUserImage},getDefaultInfoUserImageByGender:function(e,t){return"M"==e.userInfo.gender?t.getMaleDefaultInfoUserImage:"W"==e.userInfo.gender?t.getFemaleDefaultInfoUserImage:e.defaultInfo.userImage},getUserInfoProfileImage:function(e,t){return e.userInfo.profileImage?e.userInfo.profileImage:t.getDefaultInfoUserImageByGender},getLanguageObjectsByIDs:function(e,t,n){var a=[];return n.forEach((function(e){var n={name:t.getLanguageNameByID(e),img:t.getPathToFlagImageByLanguageID(e)};a.push(n)})),a},getFormattedDateInTextMonth:function(){return function(e){var t=new Date(e);return t.getDate()+" "+L["a"].TEXT_OF+" "+L["a"].MONTHS_OF_THE_YEAR_IN_TEXT[t.getMonth()]+" "+L["a"].TEXT_OF+" "+t.getFullYear()}},getFormattedMonthIn3CapitalLettersText:function(){return function(e){var t=new Date(e),n=L["a"].MONTHS_OF_THE_YEAR_IN_TEXT[t.getMonth()];return n.charAt(0).toUpperCase()+n.charAt(1).toUpperCase()+n.charAt(2).toUpperCase()}}},mutations:{setSearchInfoFilteringNearbyUsersIDs:function(e,t){e.searchInfo.filtering.nearbyUsersIDs=t},setEmailVerified:function(e,t){e.emailVerified=t},setUserInfoLocation:function(e,t){e.userInfo.location=t},resetSearchInfoUserIDs:function(e){e.searchInfo.userIDs=[]},resetUserInfo:function(e){e.userInfo={uid:null,registrationState:null,username:null,email:null,name:null,lastName:null,birthDate:null,gender:null,description:null,knownLanguages:null,languagesToLearn:null,profileImage:null,chatIDs:[],chatUsers:[],chatIDsListener:null,avgRating:null,numRatings:null}},setSearchInfoFiltering:function(e,t){return e.searchInfo.filtering=t},resetRankingInfo:function(e){e.rankingInfo={lastVisible:null,userIDs:[]}},resetEventsInfo:function(e){e.eventsInfo={lastVisible:null,events:[]}},resetChatsInfoActiveChat:function(e){e.chatsInfo.activeChat=null},resetChats:function(e){e.chats=[]},resetRatings:function(e){e.ratings={}},setUserRating:function(e,t){t.rating?e.ratings[t.to]=t.rating:delete e.ratings[t.to]},setUserRatingInfo:function(e,t){var n=e.users.findIndex((function(e){return e.uid==t.uid}));e.users[n].avgRating=t.avgRating,e.users[n].numRatings=t.numRatings},setNewUserRatingInfo:function(e,t){var n=e.users.findIndex((function(e){return e.uid==t.to}));if(t.rating)if(e.ratings[t.to]){var a=e.users[n].numRatings,r=e.users[n].avgRating*e.users[n].numRatings,s=(r-e.ratings[t.to]+t.rating)/a;e.users[n].avgRating=s,e.users[n].numRatings=a}else{var o=e.users[n].numRatings+1,i=e.users[n].avgRating*e.users[n].numRatings,c=(i+t.rating)/o;e.users[n].avgRating=c,e.users[n].numRatings=o}else{var u,l=e.users[n].numRatings-1,f=e.users[n].avgRating*e.users[n].numRatings;u=l>0?(f-e.ratings[t.to])/l:0,e.users[n].avgRating=u,e.users[n].numRatings=l}},setUserRatings:function(e,t){e.ratings=t},setUserInfoEmail:function(e,t){e.userInfo.email=t},setUserInfoChatIDs:function(e,t){e.userInfo.chatIDs=t},setUserInfoChatIDsListener:function(e,t){e.userInfo.chatIDsListener=t},addChatToChats:function(e,t){-1==e.chats.findIndex((function(e){return e.id==t.id}))&&e.chats.push(t)},addUserToChatUsers:function(e,t){e.userInfo.chatUsers.find((function(e){return e.chatID==t.chatID}))||e.userInfo.chatUsers.push(t)},addChatIDToChatIDs:function(e,t){e.userInfo.chatIDs.push(t)},addMessageToChat:function(e,t){e.chats[t.chatIndex].messages.push(t.message)},setUserInfoUID:function(e,t){e.userInfo.uid=t},addUserToSearchInfoUserIDs:function(e,t){e.searchInfo.userIDs.push(t)},addRankingInfoUserID:function(e,t){var n=e.rankingInfo.userIDs.findIndex((function(e){return t==e.uid}));1!=n&&e.rankingInfo.userIDs.push(t)},addSearchInfoUserID:function(e,t){var n=e.searchInfo.userIDs.findIndex((function(e){return t==e.uid}));1!=n&&e.searchInfo.userIDs.push(t)},setSearchInfoUserIDs:function(e,t){e.searchInfo.userIDs=t},addEventsInfoEvent:function(e,t){e.eventsInfo.events.push(t)},addUser:function(e,t){var n=e.users.findIndex((function(e){return t.uid==e.uid}));1!=n?e.users.push(t):a["a"].set(e.users,n,t)},setSearchInfoFilteringSearchByUsername:function(e,t){e.searchInfo.filtering.searchByUsername=t},resetSearchInfo:function(e){e.searchInfo={lastVisible:null,userIDs:[],filtering:{genderW:!0,genderM:!0,ageRange:[L["a"].MIN_USER_AGE,L["a"].MAX_USER_AGE],maxDistance:3,maxDistanceRanges:[1e3,5e3,1e4,null],maxDistanceRangesText:[L["a"].TEXT_1_KM,L["a"].TEXT_5_KM,L["a"].TEXT_10_KM,"∞"],searchByUsername:!1,filterByLanguageToLearn:!0,knownLanguage:{id:"all",text:"Cualquier idioma"},languageToLearn:{id:"all",text:"Cualquier idioma"},nearbyUsersIDs:[]}}},resetSearchInfoFiltering:function(e){e.searchInfo.filtering={genderW:!0,genderM:!0,ageRange:[L["a"].MIN_USER_AGE,L["a"].MAX_USER_AGE],maxDistance:3,maxDistanceRanges:[1e3,5e3,1e4,null],maxDistanceRangesText:[L["a"].TEXT_1_KM,L["a"].TEXT_5_KM,L["a"].TEXT_10_KM,"∞"],searchByUsername:!1,filterByLanguageToLearn:!0,knownLanguage:{id:"all",text:"Cualquier idioma"},languageToLearn:{id:"all",text:"Cualquier idioma"},nearbyUsersIDs:[]}},setSearchInfoLastVisible:function(e,t){e.searchInfo.lastVisible=t},setRankingInfoLastVisible:function(e,t){e.rankingInfo.lastVisible=t},setEventsInfoLastVisible:function(e,t){e.eventsInfo.lastVisible=t},setSearchInfoFilter:function(e,t){e.searchInfo.filter=t},setUserInfoUsername:function(e,t){e.userInfo.username=t},setUserInfoName:function(e,t){e.userInfo.name=t},setUserInfoLastName:function(e,t){e.userInfo.lastName=t},setUserInfoBirthDate:function(e,t){e.userInfo.birthDate=t},setUserInfoGender:function(e,t){e.userInfo.gender=t},setUserInfoAvgRating:function(e,t){e.userInfo.avgRating=t},setUserInfoNumRatings:function(e,t){e.userInfo.numRatings=t},setSearchedUserAvgRating:function(e,t){var n=e.searchInfo.userIDs.findIndex((function(e){return e.uid==t.uid}));e.searchInfo.userIDs[n].avgRating=t.avgRating},setSearchedUserNumRatings:function(e,t){var n=e.searchInfo.userIDs.findIndex((function(e){return e.uid==t.uid}));e.searchInfo.userIDs[n].numRatings=t.numRatings},setUserInfoDescription:function(e,t){e.userInfo.description=t},setUserInfoProfileImage:function(e,t){e.userInfo.profileImage=t},setUserInfoKnownLanguages:function(e,t){e.userInfo.knownLanguages=t},setUserInfoLanguagesToLearn:function(e,t){e.userInfo.languagesToLearn=t},setRegistrationState:function(e,t){e.userInfo.registrationState=t},setChatWithUser:function(e,t){e.chatWithUser=t},setChatsInfoActiveChat:function(e,t){e.chatsInfo.activeChat=t},setActiveEventID:function(e,t){e.activeEventID=t},setMessageToRead:function(e,t){var n=e.chats.findIndex((function(e){return e.id==t.chatID}));if(-1!=n){var a=e.chats[n].messages.findIndex((function(e){return e.id=t.messageID}));e.chats[n].messages[a].read=!0}},closeAllChatListenersFirebase:function(e){e.chats.forEach((function(e){e.databaseListener()}))},addNewMessage:function(e,t){var n=e.chats.findIndex((function(e){return e.id==t.chatID})),r=e.chats[n].messages.findIndex((function(e){return e.id==t.message.id}));if(-1==r)if(null==t.message.created)e.chats[n].messages.splice(e.chats[n].messages.length,0,t.message);else{var s=e.chats[n].messages.findIndex((function(e){return e.created.toDate().getTime()>t.message.created.toDate().getTime()}));-1==s?e.chats[n].messages.push(t.message):e.chats[n].messages.splice(s,0,t.message)}else a["a"].set(e.chats[n].messages,r,t.message)},resetChat:function(e){e.chats=[],e.chatWithUser=null}},actions:{isUsernameInUseFirebase:function(e,t){return new Promise((function(e,n){var a=c["firestore"]();a.collection("UsersPublicInfo").where("username","==",t).get().then((function(t){t.size>0?c["auth"]().currentUser.uid==t.docs[0].id?e(!1):e(!0):e(!1)})).catch((function(e){console.error(e),n(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},setUserPersistanceFirebase:function(e){return new Promise((function(t,n){c["auth"]().setPersistence(c["auth"].Auth.Persistence.LOCAL).then((function(){e.commit("setUserInfoUID",c["auth"]().currentUser.uid),t()})).catch((function(e){console.error(e),n(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},registerUserFirebase:function(e,t){return new Promise((function(n,a){e.state.userInfo.registrationState?e.dispatch("setUserPersistanceFirebase").then((function(){e.dispatch("setUserUsernameFirebase",t.username).then((function(){n()})).catch((function(e){a(e)}))})).catch((function(e){a(e)})):c["auth"]().createUserWithEmailAndPassword(t.email,t.password).then((function(){console.log("Success registering user in system."),e.dispatch("setUserPersistanceFirebase").then((function(){e.dispatch("setUserPrivateInfoFirebase",t).then((function(){n()})).catch((function(e){a(e)}))})).catch((function(t){e.dispatch("logoutUserFirebase").then((function(){a(t)})).catch((function(){a(t)}))}))})).catch((function(e){console.log(e),"auth/email-already-in-use"==e.code?a(L["a"].ERROR_ALREADY_AN_ACCOUNT_WITH_THIS_EMAIL):a(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},logoutUserFirebase:function(e){return new Promise((function(t,n){null!=c["auth"]()&&(e.commit("closeAllChatListenersFirebase"),c["auth"]().signOut().then((function(){console.log("User logged out correctly!"),e.commit("resetChat"),t()})).catch((function(e){console.error(e),n(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)})))}))},setUserPrivateInfoFirebase:function(e,t){return new Promise((function(n,a){var r=c["firestore"]();r.collection("UsersPrivateInfo").doc(c["auth"]().currentUser.uid).set({email:t.email,name:t.name,lastName:t.lastName,registrationState:"registered"},{merge:!0}).then((function(){console.log("Private info successfully written"),e.commit("setRegistrationState","registered"),e.commit("setUserInfoEmail",t.email),e.commit("setUserInfoName",t.name),e.commit("setUserInfoLastName",t.lastName),n()})).catch((function(e){console.error("Error writing private info: ",e),a(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},setUserPrivateInfoRegistrationStateFirebase:function(e,t){return new Promise((function(n,a){var r=c["firestore"]();r.collection("UsersPrivateInfo").doc(c["auth"]().currentUser.uid).set({registrationState:t},{merge:!0}).then((function(){console.log("Registration state successfully written"),e.commit("setRegistrationState",t),n()})).catch((function(e){console.error("Error writing registration state info: ",e),a(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},sendEmailVerificationFirebase:function(){return new Promise((function(e,t){c["auth"]().currentUser.sendEmailVerification().then((function(){console.log("verification sent: "),e()}),(function(e){console.log("verification not sent: "+e.message),t(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},checkEmailVerifiedFirebase:function(e){return new Promise((function(t,n){c["auth"]().currentUser.reload().then((function(){c["auth"]().currentUser.emailVerified&&(console.log("Email is verified"),e.dispatch("setUserPrivateInfoRegistrationStateFirebase","emailVerified").then((function(){t(!0)})).catch((function(e){n(e)})))})).catch((function(e){console.error(e),n(e)}))}))},setUserProfileInfoFirebase:function(e,t){return new Promise((function(n,a){var r=c["firestore"]();r.collection("UsersPublicInfo").doc(c["auth"]().currentUser.uid).set({username:t.username.toLowerCase(),birthDate:new Date(t.birthDate),gender:t.gender,description:t.description,avgRating:0,numRatings:0},{merge:!0}).then((function(){console.log("Profile info successfully written in users"),e.dispatch("setUserPrivateInfoRegistrationStateFirebase","profileInfoFilled").then((function(){e.commit("setUserInfoUsername",t.username),e.commit("setUserInfoBirthDate",t.birthDate),e.commit("setUserInfoGender",t.gender),e.commit("setUserInfoDescription",t.description),n()})).catch((function(e){a(e)})),n()})).catch((function(e){console.error("Error writing profile info in users: ",e),a(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},setUserLanguagesFirebase:function(e,t){return new Promise((function(n,a){var r=c["firestore"](),s=[],o=[];console.log(t);for(var i=0;i<t.knownLanguages.length;i++)s.push(t.knownLanguages[i].id);for(var u=0;u<t.languagesToLearn.length;u++)o.push(t.languagesToLearn[u].id);r.collection("UsersPublicInfo").doc(c["auth"]().currentUser.uid).set({knownLanguages:s,languagesToLearn:o},{merge:!0}).then((function(){console.log("Languages info successfully written in users"),e.dispatch("setUserPrivateInfoRegistrationStateFirebase","languagesFilled").then((function(){e.commit("setUserInfoKnownLanguages",s),e.commit("setUserInfoLanguagesToLearn",o),n()})).catch((function(e){a(e)}))})).catch((function(e){console.error("Error writing languages info in users: ",e),a(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},setUserProfileImageDatabase:function(e,t){return new Promise((function(n,r){a["a"].nextTick((function(){var a=c["firestore"](),s=c["auth"]().currentUser.uid,o=c["storage"]().ref().child("UserProfileImages/"+s);o.putString(t,"base64").then((function(){console.log("User profile image uploaded"),o.getDownloadURL().then((function(t){a.collection("UsersPublicInfo").doc(s).set({profileImage:t},{merge:!0}).then((function(){console.log("User profile image url successfully written"),e.dispatch("setUserPrivateInfoRegistrationStateFirebase","registered").then((function(){e.commit("setUserInfoProfileImage",t),n()})).catch((function(e){r(e)}))})).catch((function(t){console.error("Error writing user profile image url info in users: ",t),e.dispatch("deleteUserProfileImageDatabase",s),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))})).catch((function(){r(L["a"].ERROR_UPLOADING_IMAGE)}))}))}))},deleteUserProfileImageDatabase:function(e,t){return new Promise((function(n,a){var r=c["storage"]().ref().child("UserProfileImages/"+t);r.delete().then((function(){console.log("User profile image removed from database storage"),e.commit("setUserInfoProfileImage",null),n()})).catch((function(e){console.error(e),a(L["a"].ERROR_SOMETHING_HAPPENED)}))}))},loginUserFirebase:function(e,t){return new Promise((function(n,a){c["auth"]().signInWithEmailAndPassword(t.email,t.password).then((function(t){console.log("Success logging user in system."),e.dispatch("setUserPersistanceFirebase").then((function(){e.dispatch("getUserPrivateInfo").then((function(){console.log("Success UserPrivateInfo retrieved."),e.dispatch("getUserPublicInfo").then((function(){console.log("Success UserPublicInfo retrieved."),e.dispatch("getRatingsInRatingsFirebase").then((function(){n(t)})).catch((function(e){console.error(e),a(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))})).catch((function(e){a(e)}))})).catch((function(e){a(e)}))})).catch((function(t){e.dispatch("logoutUserFirebase").then((function(){a(t)})).catch((function(){a(t)}))}))})).catch((function(e){console.log(e),"auth/wrong-password"==e.code?a(L["a"].ERROR_WRONG_EMAIL_PASSWORD_COMBINATION):a(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},getAppInfoForLoggedUserFirebase:function(e){return e.commit("resetUserInfo"),e.commit("resetChatsInfoActiveChat"),e.commit("resetChats"),e.commit("resetRatings"),e.commit("setUserInfoUID",c["auth"]().currentUser.uid),new Promise((function(t,n){e.dispatch("getUserPrivateInfo").then((function(){console.log("Success UserPrivateInfo retrieved."),e.dispatch("getUserPublicInfo").then((function(){console.log("Success UserPublicInfo retrieved."),e.dispatch("getRatingsInRatingsFirebase").then((function(){e.dispatch("getUserLocation").then((function(){t()})).catch((function(e){console.error(e),n(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)})),t()})).catch((function(e){console.error(e),n(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))})).catch((function(e){n(e)}))})).catch((function(e){n(e)}))}))},getUserPrivateInfo:function(e){return new Promise((function(t,n){var a=c["firestore"](),r=c["auth"]().currentUser.uid;a.collection("UsersPrivateInfo").doc(r).get().then((function(a){a.exists?(e.commit("setRegistrationState",a.data().registrationState),e.commit("setUserInfoEmail",a.data().email),e.commit("setUserInfoName",a.data().name),e.commit("setUserInfoLastName",a.data().lastName),t()):(console.warn("No such document!"),n(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM))})).catch((function(e){console.warn("Error getting document:",e),n(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},getUserPublicInfoDocByUIDFirebase:function(e,t){var n=c["firestore"]();return new Promise((function(e,a){n.collection("UsersPublicInfo").doc(t).get().then((function(t){e(t)})).catch((function(e){console.warn("Error getting document:",e),a(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},getUserPublicInfo:function(e){return new Promise((function(t,n){var a=c["auth"]().currentUser.uid;e.dispatch("getUserPublicInfoDocByUIDFirebase",a).then((function(a){a.exists?(e.commit("setUserInfoUsername",a.data().username),e.commit("setUserInfoBirthDate",a.data().birthDate),e.commit("setUserInfoGender",a.data().gender),e.commit("setUserInfoDescription",a.data().description),e.commit("setUserInfoKnownLanguages",a.data().knownLanguages),e.commit("setUserInfoLanguagesToLearn",a.data().languagesToLearn),e.commit("setUserInfoProfileImage",a.data().profileImage),e.commit("setUserInfoAvgRating",a.data().avgRating),e.commit("setUserInfoNumRatings",a.data().numRatings),e.dispatch("createChatIDsListenerFirebase").then((function(){var r=a.data().chats;try{var s=[];0==r.length&&t(),r.forEach((function(t){s.push(e.dispatch("createChatListenerFirebase",t))})),Promise.all(s).then((function(){t()})).catch((function(e){n(e)}))}catch(o){console.error(o),n(o)}})).catch((function(e){console.error(e),n(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))):(console.warn("No such document!"),n(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM))})).catch((function(e){console.warn("Error getting document:",e),n(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},createChatIDsListenerFirebase:function(e){var t=c["firestore"]();return new Promise((function(n,a){try{var r=t.collection("UsersPublicInfo").doc(c["auth"]().currentUser.uid).onSnapshot((function(t){t&&(e.commit("setUserInfoChatIDs",t.data().chats),e.commit("setUserInfoChatIDsListener",r)),n()}))}catch(s){console.error(s),a(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}}))},setChatWithUserMessagesToRead:function(e,t){var n=c["firestore"]();return new Promise((function(a,r){var s=e.state.chats.findIndex((function(e){return e.id==t})),o=[];e.state.chats[s].messages.forEach((function(a){a.read||a.sender==e.state.userInfo.uid||o.push(n.collection("Chats").doc(t).collection("Messages").doc(a.id).update({read:!0}).then((function(){console.log("Message successfully updated read state ")})).catch((function(e){console.error("Error updating message read state: ",e),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)})))})),Promise.all(o).then((function(){a()})).catch((function(){console.error("Error updating messages read state: "),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},sendChatMessageFirebase:function(e,t){var n=c["firestore"]();return new Promise((function(a,r){var s=e.state.chats.findIndex((function(e){return e.id==t.chatID})),o=e.state.chats[s].messages.length,i={created:c["firestore"].FieldValue.serverTimestamp(),text:t.messageText,read:!1,sender:e.state.userInfo.uid},u=[];if(0==o){var l,f=e.state.userInfo.uid,g=e.getters.getOtherUserInChatByChatID(t.chatID);l=f<g?f+g:g+f,u.push(n.collection("UsersPublicInfo").doc(f).update({chats:c["firestore"].FieldValue.arrayUnion(l)}).then((function(){e.commit("addChatIDToChatIDs",l),console.log("chatID successfuly written p1")})).catch((function(e){console.error("Error writing chatID",e),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))),u.push(n.collection("UsersPublicInfo").doc(g).update({chats:c["firestore"].FieldValue.arrayUnion(l)}).then((function(){console.log("chatID successfuly written p2")})).catch((function(e){console.error("Error writing chatID",e),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)})))}Promise.all(u).then((function(){n.collection("Chats").doc(t.chatID).collection("Messages").doc().set(i).then((function(){console.log("Message successfully added"),a()})).catch((function(e){console.error("Error adding message",e),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))})).catch((function(e){console.error("Error writing chatID on users chatIDs: "+e),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},listUsersSearchedPageFirebase:function(e,t){var n=c["firestore"]();return new Promise((function(a,r){t.first&&(e.commit("setSearchInfoUserIDs",[]),e.commit("setSearchInfoLastVisible",null));var s=n.collection("UsersPublicInfo");e.state.searchInfo.filtering.genderM&&!e.state.searchInfo.filtering.genderW?s=s.where(L["a"].DATABASE_GENDER_FIELD,"==","M"):e.state.searchInfo.filtering.genderW&&!e.state.searchInfo.filtering.genderM?s=s.where(L["a"].DATABASE_GENDER_FIELD,"==","W"):e.state.searchInfo.filtering.genderW||e.state.searchInfo.filtering.genderM||(e.commit("setSearchInfoUserIDs",[]),e.commit("setSearchInfoLastVisible",null));var o=new Date;o.setFullYear(o.getFullYear()-e.state.searchInfo.filtering.ageRange[0]),o.setHours(0,0,0),s=s.where(L["a"].DATABASE_BIRTHDATE_FIELD,"<",o),o=new Date,o.setFullYear(o.getFullYear()-e.state.searchInfo.filtering.ageRange[1]-1),o.setHours(0,0,0),s=s.where(L["a"].DATABASE_BIRTHDATE_FIELD,">",o),e.state.searchInfo.filtering.filterByLanguageToLearn&&"all"!=e.state.searchInfo.filtering.languageToLearn.id?s=s.where(L["a"].DATABASE_LANGUAGES_TO_LEARN_FIELD,"array-contains",e.state.searchInfo.filtering.languageToLearn.id):e.state.searchInfo.filtering.filterByLanguageToLearn||"all"==e.state.searchInfo.filtering.knownLanguage.id||(s=s.where(L["a"].DATABASE_KNOWN_LANGUAGES_FIELD,"array-contains",e.state.searchInfo.filtering.knownLanguage.id));var i=s.orderBy(t.orderBy).startAfter(e.state.searchInfo.lastVisible).limit(L["a"].SEARCHED_USERS_PAGE_SIZE);i.get().then((function(n){var o=n.docs.findIndex((function(t){return t.id==e.state.userInfo.uid})),i=n.docs;if(-1!=o){i.splice(o,1);var c=n.docs[n.docs.length-1];e.commit("setSearchInfoLastVisible",c);var u=s.orderBy(t.orderBy).startAfter(e.state.searchInfo.lastVisible).limit(1);u.get().then((function(t){i.push(t.docs[0]),e.dispatch("setSearchedUsersState",{newDocs:i,originalDocs:t.docs}).then((function(){a()}))})).catch((function(e){console.warn("Error fetching page: ",e),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}else e.dispatch("setSearchedUsersState",{newDocs:i,originalDocs:n.docs}).then((function(){a()}))})).catch((function(e){console.warn("Error fetching page: ",e),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},setSearchedUsersState:function(e,t){return new Promise((function(n){var a=t.newDocs.map((function(e){var t=e.id,n=e.data();return Qe({uid:t},n)}));if(a.forEach((function(t){e.commit("addUser",t),e.commit("addSearchInfoUserID",t.uid)})),t.originalDocs.length>0){var r=t.originalDocs[t.originalDocs.length-1];e.commit("setSearchInfoLastVisible",r)}else e.commit("setSearchInfoUserIDs",[]),e.commit("setSearchInfoLastVisible",null);n()}))},isNextUsersSearchedPageEmptyFirebase:function(e,t){var n=c["firestore"]();return new Promise((function(a,r){var s=n.collection("UsersPublicInfo");e.state.searchInfo.filtering.genderM&&!e.state.searchInfo.filtering.genderW?s=s.where(L["a"].DATABASE_GENDER_FIELD,"==","M"):e.state.searchInfo.filtering.genderW&&!e.state.searchInfo.filtering.genderM?s=s.where(L["a"].DATABASE_GENDER_FIELD,"==","W"):e.state.searchInfo.filtering.genderW||e.state.searchInfo.filtering.genderM||(e.commit("setSearchInfoUserIDs",[]),e.commit("setSearchInfoLastVisible",null),a(!0));var o=new Date;o.setFullYear(o.getFullYear()-e.state.searchInfo.filtering.ageRange[0]),o.setHours(0,0,0),s=s.where(L["a"].DATABASE_BIRTHDATE_FIELD,"<",o),o=new Date,o.setFullYear(o.getFullYear()-e.state.searchInfo.filtering.ageRange[1]-1),o.setHours(0,0,0),s=s.where(L["a"].DATABASE_BIRTHDATE_FIELD,">",o),e.state.searchInfo.filtering.filterByLanguageToLearn&&"all"!=e.state.searchInfo.filtering.languageToLearn.id?s=s.where(L["a"].DATABASE_LANGUAGES_TO_LEARN_FIELD,"array-contains",e.state.searchInfo.filtering.languageToLearn.id):e.state.searchInfo.filtering.filterByLanguageToLearn||"all"==e.state.searchInfo.filtering.knownLanguage.id||(s=s.where(L["a"].DATABASE_KNOWN_LANGUAGES_FIELD,"array-contains",e.state.searchInfo.filtering.knownLanguage.id),console.log(e.state.searchInfo.filtering.knownLanguage.id)),s.orderBy(t.orderBy).startAfter(e.state.searchInfo.lastVisible).limit(L["a"].SEARCHED_USERS_PAGE_SIZE).get().then((function(t){var n=t.docs.findIndex((function(t){return t.id==e.state.userInfo.uid})),r=t.docs;-1!=n&&r.splice(n,1),a(0==r.length)})).catch((function(e){console.log(e),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},searchUsersByUsernameFirebase:function(e,t){var n=c["firestore"]();return new Promise((function(a,r){e.commit("resetSearchInfo"),e.commit("setSearchInfoFilteringSearchByUsername",!0);var s=n.collection("UsersPublicInfo").orderBy(t.orderBy).startAt(t.searchByUsernameField).endAt(t.searchByUsernameField+"");s.get().then((function(t){var n=t.docs.findIndex((function(t){return t.id==e.state.userInfo.uid}));1!=n&&t.docs.splice(n,1);var r=t.docs.map((function(e){var t=e.id,n=e.data();return Qe({uid:t},n)})),s=[];if(r.forEach((function(t){e.commit("addUser",t),s.push(t.uid)})),e.commit("setSearchInfoUserIDs",s),t.docs.length>0){var o=t.docs[t.docs.length-1];e.commit("setSearchInfoLastVisible",o)}a()})).catch((function(e){console.warn("Error fetching users: ",e),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},prepareChatWithUser:function(e,t){return new Promise((function(n,a){e.dispatch("createChatFirebase",{chatID:t.chatID,userID:t.userID}).then((function(){e.commit("setChatsInfoActiveChat",t.chatID),n()})).catch((function(e){console.error(e),a(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},createChatFirebase:function(e,t){var n=c["firestore"]();return new Promise((function(a,r){var s={messages:[],users:[e.state.userInfo.uid,t.userID]};n.collection("Chats").doc(t.chatID).set(s).then((function(){console.log("Chat info successfully written in Chats"),e.dispatch("createChatListenerFirebase",t.chatID).then((function(){a()})).catch((function(e){r(e)}))})).catch((function(e){console.error("Error writing profile info in users: ",e),r(e)}))}))},createChatListenerFirebase:function(e,t){var n=c["firestore"]();return new Promise((function(a,r){try{var s=n.collection("Chats").doc(t).onSnapshot((function(o){if(o&&o.data()){e.commit("addChatToChats",Qe({id:o.id},o.data(),{databaseListener:s,messages:[]}));try{n.collection("Chats").doc(t).collection("Messages").onSnapshot((function(t){if(t&&t.docs){var n=t.docs.map((function(e){var t=e.id,n=e.data();return Qe({id:t},n)}));n.forEach((function(t){var n={chatID:o.id,message:t};e.commit("addNewMessage",n),e.state.chatsInfo.activeChat==n.chatID&&e.dispatch("setChatWithUserMessagesToRead",e.state.chatsInfo.activeChat).catch((function(e){console.warn("Error updating messages to read:",e),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))}}))}catch(u){console.error(u),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}var i=o.data().users.find((function(e){return e!=c["auth"]().currentUser.uid}));e.dispatch("getUserPublicInfoDocByUIDFirebase",i).then((function(n){if(n.exists){var a={id:i,chatID:t,username:n.data().username,birthDate:n.data().birthDate,gender:n.data().gender,description:n.data().description,knownLanguages:n.data().knownLanguages,languagesToLearn:n.data().languagesToLearn,profileImage:n.data().profileImage};e.commit("addUserToChatUsers",a)}})).catch((function(e){console.warn("Error getting document:",e),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}a()}))}catch(o){console.error(o),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}}))},rateUser:function(e,t){return new Promise((function(n,a){e.dispatch("getRatingInUsersPublicInfo",t.to).then((function(r){e.commit("setUserRatingInfo",r),e.dispatch("setRatingInRatingsFirebase",t).then((function(){e.commit("setNewUserRatingInfo",t),e.commit("setUserRating",t),n()})).catch((function(e){console.error(e),a(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))})).catch((function(e){console.error(e),a(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},setRatingInRatingsFirebase:function(e,t){return new Promise((function(e,n){var a=c["firestore"](),r={};r[t.to]=t.rating,t.rating?a.collection("Ratings").doc(t.from).set(r,{merge:!0}).then((function(){console.log("Rating successfully written in Ratings"),e()})).catch((function(e){console.error("Error writing rating info in Ratings: ",e),n(e)})):a.collection("Ratings").doc(t.from).update(Object(o["a"])({},t.to,c["firestore"].FieldValue.delete())).then((function(){console.log("Rating successfully deleted of Ratings"),e()})).catch((function(e){console.error("Error deleting rating info of Ratings: ",e),n(e)}))}))},getRatingsInRatingsFirebase:function(e){var t=c["firestore"]();return new Promise((function(n,a){t.collection("Ratings").doc(e.state.userInfo.uid).get().then((function(t){t.exists&&e.commit("setUserRatings",t.data()),n()})).catch((function(e){console.warn("Error getting document:",e),a(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},getRatingInUsersPublicInfo:function(e,t){var n=c["firestore"]();return new Promise((function(e,a){n.collection("UsersPublicInfo").doc(t).get().then((function(n){console.log(n.data()),console.log(t);var a={uid:t,avgRating:n.data().avgRating,numRatings:n.data().numRatings};e(a)})).catch((function(e){console.warn("Error getting document:",e),a(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},listUsersRankingPageFirebase:function(e,t){var n=c["firestore"]();return new Promise((function(a,r){var s;t&&e.commit("resetRankingInfo"),s=null==e.state.rankingInfo.lastVisible?n.collection("UsersPublicInfo").orderBy(L["a"].DATABASE_AVG_RATING_FIELD,"desc").orderBy(L["a"].DATABASE_NUM_RATINGS_FIELD,"desc"):n.collection("UsersPublicInfo").orderBy(L["a"].DATABASE_AVG_RATING_FIELD,"desc").orderBy(L["a"].DATABASE_NUM_RATINGS_FIELD,"desc").startAfter(e.state.rankingInfo.lastVisible),s.limit(L["a"].RANKING_PAGE_SIZE).get().then((function(t){console.log(t);var n=t.docs.map((function(e){var t=e.id,n=e.data();return Qe({uid:t},n)}));if(n.forEach((function(t){e.commit("addUser",t),e.commit("addRankingInfoUserID",t.uid)})),t.docs.length>0){var r=t.docs[t.docs.length-1];e.commit("setRankingInfoLastVisible",r)}a()})).catch((function(e){console.warn("Error fetching page: ",e),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},isNextRankingUsersPageEmptyFirebase:function(e){var t=c["firestore"]();return new Promise((function(n,a){var r=t.collection("UsersPublicInfo").orderBy(L["a"].DATABASE_AVG_RATING_FIELD,"desc").orderBy(L["a"].DATABASE_NUM_RATINGS_FIELD,"desc").startAfter(e.state.rankingInfo.lastVisible).limit(L["a"].RANKING_PAGE_SIZE);r.get().then((function(e){console.log(e.docs.length),n(0==e.docs.length)})).catch((function(e){console.log(e),a(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},getUserLocation:function(e){return new Promise((function(t,n){e.dispatch("geolocateUser").then((function(a){e.commit("setUserInfoLocation",a),e.dispatch("updateUserLocationFirebase",a).then((function(){t()})).catch((function(e){console.error(e),n(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))})).catch((function(){e.dispatch("getUserLocationFirebase",e.state.userInfo.uid).then((function(t){e.commit("setUserInfoLocation",t),n(L["a"].TEXT_PROBLEM_GETTING_CURRENT_LOCATION)})).catch((function(){e.commit("setUserInfoLocation",null),n(L["a"].TEXT_PROBLEM_GETTING_CURRENT_LOCATION)}))}))}))},getUserLocationFirebase:function(e,t){var n=new ze["GeoFirestore"](c["firestore"]());return new Promise((function(e,a){n.collection("UsersLocation").doc(t).get().then((function(t){var n=t.data();console.log(JSON.stringify(n)),n?e({lat:n.coordinates._lat,lng:n.coordinates._long}):a()})).catch((function(e){console.log(e),a()}))}))},updateUserLocationFirebase:function(e,t){var n=new ze["GeoFirestore"](c["firestore"]());return new Promise((function(a,r){n.collection("UsersLocation").doc(e.state.userInfo.uid).set({coordinates:new c["firestore"].GeoPoint(t.lat,t.lng)}).then((function(){a()})).catch((function(e){console.log(e),r()}))}))},geolocateUser:function(){return new Promise((function(e,t){try{navigator.geolocation.getCurrentPosition((function(t){e({lat:t.coords.latitude,lng:t.coords.longitude})}),(function(e){console.log(e),t()}))}catch(n){console.log(n),t()}}))},getNearbyUsersFirebase:function(e,t){var n=new ze["GeoFirestore"](c["firestore"]()),a=n.collection("UsersLocation").near({center:new c["firestore"].GeoPoint(e.state.userInfo.location.lat,e.state.userInfo.location.lng),radius:t});return new Promise((function(e,t){a.get().then((function(t){e(t.docs)})).catch((function(e){console.log(e),t(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},listNearbyUsersSearchedPageFirebase:function(e,t){var n=c["firestore"](),a=0,r=0,s=[];return new Promise((function(o,i){if(t.first)e.commit("setSearchInfoUserIDs",[]),e.commit("setSearchInfoLastVisible",null),e.dispatch("getNearbyUsersFirebase",e.state.searchInfo.filtering.maxDistanceRanges[e.state.searchInfo.filtering.maxDistance]).then((function(t){var c=[];t.forEach((function(t){t.id!=e.state.userInfo.uid&&c.push(t.id)})),e.commit("setSearchInfoUserIDs",c);while(a<L["a"].SEARCHED_USERS_PAGE_SIZE&&r<e.state.searchInfo.filtering.nearbyUsersIDs.length)console.log(e.state.searchInfo.filtering.nearbyUsersIDs[r]),s.push(n.collection("UsersPublicInfo").doc(e.state.searchInfo.filtering.nearbyUsersIDs[r]).get().then((function(t){console.log(t),e.commit("addUserToSearchInfoUserIDs",t.id)})).catch((function(t){console.log(t),e.commit("setSearchInfoLastVisible",r-1),i(L["a"].TEXT_PROBLEM_GETTING_NEARBY_USERS)}))),a++,r++;Promise.all(s).then((function(){e.commit("setSearchInfoLastVisible",r-1),o()})).catch((function(t){e.commit("setSearchInfoLastVisible",r-1),i(t)}))})).catch((function(e){console.log(e),i(L["a"].TEXT_PROBLEM_GETTING_NEARBY_USERS)}));else{r=e.state.searchInfo.lastVisible+1;while(a<L["a"].SEARCHED_USERS_PAGE_SIZE&&r<e.state.searchInfo.filtering.nearbyUsersIDs.length)console.log(e.state.searchInfo.filtering.nearbyUsersIDs[r]),s.push(n.collection("UsersPublicInfo").doc(e.state.searchInfo.filtering.nearbyUsersIDs[r]).get().then((function(t){console.log(t),e.commit("addUserToSearchInfoUserIDs",t.id)})).catch((function(t){console.log(t),e.commit("setSearchInfoLastVisible",r-1),i(L["a"].TEXT_PROBLEM_GETTING_NEARBY_USERS)}))),a++,r++;Promise.all(s).then((function(){e.commit("setSearchInfoLastVisible",r-1),o()})).catch((function(t){e.commit("setSearchInfoLastVisible",r-1),i(t)}))}}))},isNextNearbyUsersSearchedPageEmptyFirebase:function(e){var t=c["firestore"]();return new Promise((function(n,a){console.log("--"+e.state.searchInfo.lastVisible),console.log("--"+e.state.searchInfo.filtering.nearbyUsersIDs.length),e.state.searchInfo.lastVisible>=e.state.searchInfo.filtering.nearbyUsersIDs.length-1&&n(!0);var r=e.state.searchInfo.lastVisible+1;while(r<e.state.searchInfo.filtering.nearbyUsersIDs.length-1)t.collection("UsersPublicInfo").doc(e.state.searchInfo.filtering.nearbyUsersIDs[r]).get().then((function(t){e.commit("addUserToSearchInfoUserIDs",Qe({uid:t.id},t.data())),console.log("!!"+e.state.searchInfo.lastVisible),n(!1)})).catch((function(t){console.log(t),console.log("pedazo error"),e.commit("setSearchInfoLastVisible",r-1),a(!0)})),r++}))},listEventsEventsPageFirebase:function(e,t){var n=c["firestore"]();return new Promise((function(a,r){var s;t&&e.commit("resetEventsInfo");var o=new Date;s=null==e.state.eventsInfo.lastVisible?n.collection(L["a"].DATABASE_COLLECTION_EVENTS).where(L["a"].DATABASE_DATE_FIELD,">",o).orderBy(L["a"].DATABASE_DATE_FIELD):n.collection(L["a"].DATABASE_COLLECTION_EVENTS).where(L["a"].DATABASE_DATE_FIELD,">",o).orderBy(L["a"].DATABASE_DATE_FIELD).startAfter(e.state.eventsInfo.lastVisible),s.limit(L["a"].EVENTS_PAGE_SIZE).get().then((function(t){var n=t.docs.map((function(e){var t=e.id,n=e.data();return Qe({id:t},n)}));if(n.forEach((function(t){console.log(t);var n={lat:t.coordinates.latitude,lng:t.coordinates.longitude};if(console.log(n),console.log(e.state.userInfo.location),null!=e.state.userInfo.location){var a=e.getters.getHaversineDistance({p1:n,p2:e.state.userInfo.location})/1e3;t=Qe({},t,{distance:parseFloat(a).toFixed(1)})}else t=Qe({},t,{distance:null});e.commit("addEventsInfoEvent",t)})),t.docs.length>0){var r=t.docs[t.docs.length-1];e.commit("setEventsInfoLastVisible",r)}a()})).catch((function(e){console.warn("Error fetching page: ",e),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},isNextEventsEventsPageEmptyFirebase:function(e){var t=c["firestore"]();return new Promise((function(n,a){var r=new Date,s=t.collection(L["a"].DATABASE_COLLECTION_EVENTS).where(L["a"].DATABASE_DATE_FIELD,">",r).orderBy(L["a"].DATABASE_DATE_FIELD).startAfter(e.state.eventsInfo.lastVisible).limit(L["a"].EVENTS_PAGE_SIZE);s.get().then((function(e){n(0==e.docs.length)})).catch((function(e){console.log(e),a(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},setSearchInfoFiltering:function(e,t){return e.commit("setEventsInfoLastVisible",t)},getUserByUID:function(e,t){return new Promise((function(n,a){var r=e.getters.getUserByUID(t);console.log(r),null!=r?n(r):e.dispatch("getUserPublicInfoDocByUIDFirebase",t).then((function(s){s.data()?(r=Qe({uid:t},s.data()),e.commit("addUser",r),n(r)):a()})).catch((function(e){console.log(e),a()}))}))},getEventFirebase:function(e,t){var n=c["firestore"]();return new Promise((function(a,r){n.collection(L["a"].DATABASE_COLLECTION_EVENTS).doc(t).get().then((function(t){var n={lat:t.data().coordinates.latitude,lng:t.data().coordinates.longitude},r=e.getters.getHaversineDistance({p1:n,p2:e.state.userInfo.location})/1e3,s=Qe({id:t.id},t.data(),{distance:parseFloat(r).toFixed(1)});a(s)})).catch((function(e){console.warn("Error fetching event: ",e),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))}}}),tt=n("9483");Object(tt["a"])("".concat("/","firebase-messaging-sw.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var nt=n("f309");a["a"].use(nt["a"]);var at=new nt["a"]({icons:{iconfont:"mdi"},theme:{light:{primary:"#1976D2",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}),rt=n("c007");a["a"].use(rt,{load:{key:"AIzaSyBYhPYAZkG6ML2kRArdK8xITPrZWzF0JSw",libraries:"places"}}),a["a"].config.productionTip=!1;var st="",ot={apiKey:"AIzaSyABGil2afckXxQ127FS8fW6y5phy1wzd6g",authDomain:"tfg-vue-m3m.firebaseapp.com",databaseURL:"https://tfg-vue-m3m.firebaseio.com",projectId:"tfg-vue-m3m",storageBucket:"tfg-vue-m3m.appspot.com",messagingSenderId:"144506012173",appId:"1:144506012173:web:8a58aa4b50d8b336184b44"};u.a.initializeApp(ot);var it=u.a.firestore();it.settings({timestampsInSnapshots:!0}),it.enablePersistence({experimentalTabSynchronization:!0});var ct=u.a.storage(),ut=null;try{ut=u.a.messaging()}catch(lt){console.log(lt)}t["default"]={db:it,storage:ct,messaging:ut};u.a.auth().onAuthStateChanged((function(){st||(st=new a["a"]({router:Ke,store:et,vuetify:at,render:function(e){return e(p)}}).$mount("#app"))}))},"9a99":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("h4",[e._v(e._s(e.knownLanguagesTitle))]),n("v-combobox",{attrs:{items:e.items_known_languages,chips:"",type:"button",clearable:"",label:e.knownLanguagesLabel,multiple:"",solo:""},scopedSlots:e._u([{key:"item",fn:function(t){t.index;var a=t.item;return[n("v-chip",{attrs:{color:"white",block:""}},[n("v-avatar",{attrs:{left:""}},[n("v-img",{attrs:{src:e.createPathToFlagImage(a.id)}})],1),n("strong",[e._v(e._s(a.text))]),e._v(" \n            ")],1)]}},{key:"selection",fn:function(t){var a=t.attrs,r=t.item,s=t.select,o=t.selected;return[n("v-chip",e._b({attrs:{"input-value":o,close:"",color:"primary"},on:{click:s,"click:close":function(t){return e.remove_known_language(r)}}},"v-chip",a,!1),[n("v-avatar",{attrs:{left:""}},[n("v-img",{attrs:{src:e.createPathToFlagImage(r.id)}})],1),n("strong",[e._v(e._s(r.text))]),e._v(" \n            ")],1)]}}]),model:{value:e.chips_known_languages,callback:function(t){e.chips_known_languages=t},expression:"chips_known_languages"}}),n("h4",[e._v(e._s(e.languagesToLearnTitle))]),n("v-combobox",{attrs:{items:e.items_languages_to_learn,chips:"",clearable:"",type:"button",label:e.languagesToLearnLabel,multiple:"",solo:""},scopedSlots:e._u([{key:"item",fn:function(t){t.index;var a=t.item;return[n("v-chip",{attrs:{color:"white",block:""}},[n("v-avatar",{attrs:{left:""}},[n("v-img",{attrs:{src:e.createPathToFlagImage(a.id)}})],1),n("strong",[e._v(e._s(a.text))]),e._v(" \n            ")],1)]}},{key:"selection",fn:function(t){var a=t.attrs,r=t.item,s=t.select,o=t.selected;return[n("v-chip",e._b({attrs:{"input-value":o,close:"",color:"primary"},on:{click:s,"click:close":function(t){return e.remove_language_to_learn(r)}}},"v-chip",a,!1),[n("v-avatar",{attrs:{left:""}},[n("v-img",{attrs:{src:e.createPathToFlagImage(r.id)}})],1),n("strong",[e._v(e._s(r.text))]),e._v(" \n            ")],1)]}}]),model:{value:e.chips_languages_to_learn,callback:function(t){e.chips_languages_to_learn=t},expression:"chips_languages_to_learn"}}),n("v-btn",{attrs:{block:"",color:"primary",disabled:e.buttonIsDisabled},on:{click:e.setLanguages}},[e._v("Continuar")]),n("v-snackbar",{attrs:{timeout:4e3},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n        "+e._s(e.snackbarText)+"\n        "),n("v-btn",{attrs:{color:"blue",text:""},on:{click:function(t){e.snackbar=!1}}},[e._v("\n            "+e._s(e.closeText)+"\n        ")])],1)],1)},r=[],s=(n("8e6e"),n("ac6a"),n("456d"),n("a481"),n("6762"),n("2fdb"),n("75fc")),o=n("bd86"),i=n("2f62"),c=n("4c51");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={name:"YourLanguagesSelector",data:function(){return{buttonIsDisabled:!0,snackbar:!1,snackbarText:"",chips_known_languages:[],chips_languages_to_learn:[],items_known_languages:this.$store.getters.getAllAvailableLanguagesAsArray.filter((function(e){return"all"!=e.id})),items_languages_to_learn:this.$store.getters.getAllAvailableLanguagesAsArray.filter((function(e){return"all"!=e.id})),languagesToLearnLabel:c["a"].TEXT_LANGUAGES_YOU_WANT_TO_IMPROVE,languagesToLearnTitle:c["a"].TEXT_LANGUAGES_YOU_WANT_TO_PRACTICE,knownLanguagesLabel:c["a"].TEXT_LANGUAGES_YOU_SPEAK_FLUENTLY,knownLanguagesTitle:c["a"].TEXT_MOTHER_LANGUAGES,closeText:c["a"].TEXT_CLOSE}},methods:l({},Object(i["b"])(["setUserLanguagesFirebase"]),{remove_known_language:function(e){this.chips_known_languages.splice(this.chips_known_languages.indexOf(e),1),this.chips_known_languages=Object(s["a"])(this.chips_known_languages)},remove_language_to_learn:function(e){this.chips_languages_to_learn.splice(this.chips_languages_to_learn.indexOf(e),1),this.chips_languages_to_learn=Object(s["a"])(this.chips_languages_to_learn)},validLanguages:function(){this.chips_known_languages.length>0&&this.chips_languages_to_learn.length>0?this.buttonIsDisabled=!1:this.buttonIsDisabled=!0},filter_items_known_languages:function(){var e=this;this.items_known_languages=this.$store.getters.getAllAvailableLanguagesAsArray.filter((function(e){return"all"!=e.id})).filter((function(t){return!e.chips_languages_to_learn.includes(t)}))},filter_items_languages_to_learn:function(){var e=this;this.items_languages_to_learn=this.$store.getters.getAllAvailableLanguagesAsArray.filter((function(e){return"all"!=e.id})).filter((function(t){return!e.chips_known_languages.includes(t)}))},setLanguages:function(){var e=this,t=this.setUserLanguagesFirebase({knownLanguages:this.chips_known_languages,languagesToLearn:this.chips_languages_to_learn});t.then((function(){e.$router.replace("set-your-profile-image")})).catch((function(t){e.snackbarText=t,e.snackbar=!0}))},createPathToFlagImage:function(e){return this.$store.getters.getPathToFlagImageByLanguageID(e)}}),watch:{chips_known_languages:function(){this.validLanguages(),this.filter_items_languages_to_learn()},chips_languages_to_learn:function(){this.validLanguages(),this.filter_items_known_languages()}}},g=f,d=n("2877"),h=n("6544"),m=n.n(h),I=n("8212"),E=n("8336"),_=n("cc20"),b=n("2b5d"),p=n("a523"),v=n("adda"),R=n("2db4"),T=Object(d["a"])(g,a,r,!1,null,"669f468e",null);t["a"]=T.exports;m()(T,{VAvatar:I["a"],VBtn:E["a"],VChip:_["a"],VCombobox:b["a"],VContainer:p["a"],VImg:v["a"],VSnackbar:R["a"]})},bd19:function(e,t,n){},cf05:function(e,t,n){e.exports=n.p+"img/logo.82b9c7a5.png"},f015:function(e,t,n){"use strict";var a=n("bd19"),r=n.n(a);r.a}});
//# sourceMappingURL=app-legacy.0f899dc9.js.map