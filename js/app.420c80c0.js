(function(e){function t(t){for(var n,r,i=t[0],c=t[1],l=t[2],u=0,g=[];u<i.length;u++)r=i[u],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&g.push(s[r][0]),s[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);f&&f(t);while(g.length)g.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,r=1;r<a.length;r++){var i=a[r];0!==s[i]&&(n=!1)}n&&(o.splice(t--,1),e=c(c.s=a[0]))}return e}var n={},r={app:0},s={app:0},o=[];function i(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-031daaff":"bd43c813","chunk-17b48d30":"4702af4c","chunk-2d0b9e05":"3a03aabb","chunk-2f126a07":"879babe8","chunk-3827b64d":"3b764295","chunk-38df32fb":"03d1df99","chunk-55006918":"30acd888","chunk-795d24e4":"9303e5b2","chunk-7b173f83":"94665836","chunk-b6507cf4":"8f6597cf","chunk-c911e686":"aa1d460a"}[e]+".js"}function c(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(e){var t=[],a={"chunk-031daaff":1,"chunk-17b48d30":1,"chunk-2f126a07":1,"chunk-3827b64d":1,"chunk-38df32fb":1,"chunk-55006918":1,"chunk-795d24e4":1,"chunk-7b173f83":1,"chunk-b6507cf4":1,"chunk-c911e686":1};r[e]?t.push(r[e]):0!==r[e]&&a[e]&&t.push(r[e]=new Promise((function(t,a){for(var n="css/"+({}[e]||e)+"."+{"chunk-031daaff":"dfae9c47","chunk-17b48d30":"2001ecb7","chunk-2d0b9e05":"31d6cfe0","chunk-2f126a07":"d2b98039","chunk-3827b64d":"88fdbb4d","chunk-38df32fb":"c360b1e8","chunk-55006918":"efdc0a19","chunk-795d24e4":"1e5e010e","chunk-7b173f83":"25996bfb","chunk-b6507cf4":"d6857d1d","chunk-c911e686":"60074e12"}[e]+".css",s=c.p+n,o=document.getElementsByTagName("link"),i=0;i<o.length;i++){var l=o[i],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===n||u===s))return t()}var g=document.getElementsByTagName("style");for(i=0;i<g.length;i++){l=g[i],u=l.getAttribute("data-href");if(u===n||u===s)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var n=t&&t.target&&t.target.src||s,o=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=n,delete r[e],f.parentNode.removeChild(f),a(o)},f.href=s;var d=document.getElementsByTagName("head")[0];d.appendChild(f)})).then((function(){r[e]=0})));var n=s[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,a){n=s[e]=[t,a]}));t.push(n[2]=o);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=i(e);var g=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(f);var a=s[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;g.message="Loading chunk "+e+" failed.\n("+n+": "+r+")",g.name="ChunkLoadError",g.type=n,g.request=r,a[1](g)}s[e]=void 0}};var f=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=n,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(a,n,function(t){return e[t]}.bind(null,n));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var g=0;g<l.length;g++)t(l[g]);var f=u;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var n=a("1356"),r=a.n(n);r.a},1356:function(e,t,a){},"4c51":function(e,t,a){"use strict";t["a"]={ERROR_GENERIC_CONNECTION_PROBLEM:"Parece que ha habido un problema de conexión. Por favor, vuelve a intentarlo más tarde.",ERROR_ALREADY_AN_ACCOUNT_WITH_THIS_EMAIL:"Ya existe una cuenta registrada con ese E-mail",ERROR_ALREADY_AN_ACCOUNT_WITH_THIS_USERNAME:"Ya existe un usuario con ese nombre",ERROR_WRONG_EMAIL_PASSWORD_COMBINATION:"No existe una cuenta registrada con este E-mail o la contraseña es incorrecta",ERROR_UPLOADING_IMAGE:"Error subiendo la imagen",ERROR_SOMETHING_HAPPENED:"Parece que ha ocurrido un error",ERROR_API_FILEREADER_NOT_SUPPORTED:"Lo sentimos, la API FileReader no está soportada",RULE_TEXT_MANDATORY_FIELD:"Este campo es obligatorio",RULE_MIN_VALUE_CHARACTERS_USERNAME:4,RULE_TEXT_MIN_VALUE_CHARACTERS_USERNAME:"Mínimo 4 caracteres",RULE_TEXT_MIN_VALUE_CHARACTERS_USERNAME_TO_START_SEARCHING:"Mínimo 4 caracteres para realizar la búsqueda",RULE_MIN_VALUE_CHARACTERS_USER_DESCRIPTION:20,RULE_TEXT_MIN_VALUE_CHARACTERS_USER_DESCRIPTION:"Mínimo 20 caracteres",ASK_FOR_IMAGE_SELECTION:"Por favor, selecciona una imagen",DATABASE_USERNAME_FIELD:"username",DATABASE_GENDER_FIELD:"gender",DATABASE_BIRTHDATE_FIELD:"birthDate",DATABASE_KNOWN_LANGUAGES_FIELD:"knownLanguages",DATABASE_LANGUAGES_TO_LEARN_FIELD:"languagesToLearn",DATABASE_AVG_RATING_FIELD:"avgRating",DATABASE_NUM_RATINGS_FIELD:"numRatings",DATABASE_DATE_FIELD:"date",RANKING_PAGE_SIZE:2,SEARCHED_USERS_PAGE_SIZE:2,EVENTS_PAGE_SIZE:1,DATABASE_COLLECTION_EVENTS:"Events",MIN_USER_AGE:16,MAX_USER_AGE:100,TEXT_LANGUAGES_YOU_WANT_TO_IMPROVE:"¿Qué idiomas buscas mejorar?",TEXT_LANGUAGES_YOU_WANT_TO_PRACTICE:"Idiomas que quieres practicar",TEXT_LANGUAGES_YOU_SPEAK_FLUENTLY:"¿Qué idiomas hablas con soltura?",TEXT_MOTHER_LANGUAGES:"Idiomas maternos",TEXT_LANGUAGE_HE_SHE_WANT_TO_IMPROVE:"Idioma que busca mejorar",TEXT_LANGUAGE_HE_SHE_WANT_TO_PRACTICE:"Idioma que quiere practicar",TEXT_LANGUAGE_HE_SHE_SPEAK_FLUENTLY:"Idioma que habla con soltura",TEXT_MOTHER_LANGUAGE:"Idioma materno",TEXT_LANGUAGE:"Idioma",TEXT_GENDER:"Género",TEXT_DISTANCE:"Distancia",TEXT_AGE:"Edad",TEXT_FILTER_BY_MOTHER_LANGUAGE:"Filtrar por idioma materno",TEXT_FILTER_BY_LANGUAGE_TO_LEARN:"Filtrar por idioma que quiere practicar",TEXT_SEARCH:"Buscar",TEXT_NO_FIT_USERS_TO_LIST:"No se han encontrado usuarios que cumplan con los requisitos.",TEXT_FILTERS:"Filtros",TEXT_RATE_USER:"Valora al usuario",TEXT_YOU:"Tú",TEXT_CANCEL:"Cancelar",TEXT_RATE:"Valorar",TEXT_REMOVE:"Eliminar",TEXT_WATCH_MORE:"Ver más",TEXT_COULD_NOT_SET_YOUR_RATING:"Parece que ha habido un problema: No se ha podido guardar su valoración.",TEXT_PROBLEM_RETRIEVING_RANKING:"Parece que ha habido un problema al cargar el ranking. Por favor, comprueba tu conexión.",TEXT_PROBLEM_GETTING_CURRENT_LOCATION:"Parece que ha habido un problema: no se ha podido obtener tu localizacion actual.",TEXT_PROBLEM_GETTING_NEARBY_USERS:"Parece que ha habido un problema: no se han podido obtener los usuarios cercanos.",TEXT_PROBLEM_GETTING_EVENTS:"Parece que ha habido un problema: no se han podido obtener los eventos.",TEXT_NO_LIMIT:"Sin límite",TEXT_1_KM:"1 km",TEXT_5_KM:"5 km",TEXT_10_KM:"10 km",TEXT_REMOVE_FILTERS:"Eliminar filtros",TEXT_YOUR_PROFILE:"Tu perfil",TEXT_EDIT:"Editar",TEXT_USERS:"Usuarios",TEXT_TO_FILTER:"Filtrar",TEXT_EVENTS:"Eventos",TEXT_RANKING:"Ranking",TEXT_CHATS:"Chats",TEXT_CHAT:"Chat",TEXT_CLOSE:"Cerrar",MONTHS_OF_THE_YEAR_IN_TEXT:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],TEXT_SHOW_USERS:"Mostrar usuarios",TEXT_OF:"de"}},"56d7":function(e,t,a){"use strict";a.r(t);var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[e.dataReady?a("div",[a("router-view",{staticStyle:{width:"100%"}})],1):e._e(),e.dataReady?e._e():a("div",{attrs:{id:"loading"}},[a("v-progress-circular",{attrs:{size:70,width:7,color:"primary",indeterminate:""}})],1)])},s=[],o=(a("ac6a"),a("ade3")),i=a("2f62"),c=a("8aa5"),l=a.n(c);function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(a,!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var f={name:"App",components:{},data:()=>({dataReady:!1}),methods:g({},Object(i["b"])(["getAppInfoForLoggedUserFirebase"]),{getAppInfoForLoggedUser:function(){let e=this,t=e.getAppInfoForLoggedUserFirebase();return t.then((function(){e.dataReady=!0})).catch(e=>{console.error(e)}),t}}),created(){let e=this;l.a.auth().onAuthStateChanged((function(t){t?e.getAppInfoForLoggedUser():e.dataReady=!0}))}},d=f,h=(a("034f"),a("2877")),m=a("6544"),I=a.n(m),E=a("7496"),_=a("490a"),b=Object(h["a"])(d,r,s,!1,null,null,null),p=b.exports;I()(b,{VApp:E["a"],VProgressCircular:_["a"]});var R=a("8c4f"),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"img-back"},[n("v-container",{staticClass:"home",staticStyle:{height:"100%",position:"relative",width:"100%"},attrs:{align:"center"}},[n("div",{staticStyle:{width:"100%"},attrs:{align:"center"}},[n("img",{attrs:{src:a("cf05")}})]),n("div",{staticClass:"bottom-centered-buttons",attrs:{align:"center"}},[n("div",{staticStyle:{width:"100%"},attrs:{align:"center"}},[n("router-link",{attrs:{to:"/sign-up"}},[n("v-btn",{staticStyle:{width:"100%"},attrs:{color:"primary"}},[e._v("Crear una cuenta")])],1)],1),n("br"),n("div",{staticStyle:{width:"100%"},attrs:{align:"center"}},[n("router-link",{attrs:{to:"/login"}},[n("v-btn",{staticStyle:{width:"100%"},attrs:{color:"primary"}},[e._v("Iniciar sesiónUWU")])],1)],1)])])],1)},T=[],O={name:"home"},A=O,U=(a("9fb5"),a("8336")),N=a("a523"),D=Object(h["a"])(A,v,T,!1,null,"1568d3fc",null),C=D.exports;I()(D,{VBtn:U["a"],VContainer:N["a"]});var P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"login",staticStyle:{position:"relative"}},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("h2",[e._v("Accede a tu cuenta")])])],1),a("v-col",{attrs:{cols:"12"}},[a("v-card",[a("v-progress-linear",{attrs:{value:"100",height:"10",color:"blue-grey",reactive:"",dark:""}}),a("v-container",[a("v-form",{model:{value:e.validForm,callback:function(t){e.validForm=t},expression:"validForm"}},[a("v-text-field",{attrs:{rules:[e.rules.required],label:"E-mail",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{rules:[e.rules.required],"append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",type:e.showPassword?"text":"password",label:"Contraseña"},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),a("v-btn",{attrs:{block:"",color:"primary",disabled:e.buttonIsDisabled},on:{click:e.login}},[e._v("Iniciar sesión")])],1)],1)],1),a("v-col",{attrs:{cols:"12",align:"center"}},[a("p",[a("router-link",{attrs:{to:"/send-change-password-email"}},[e._v("¿Has olvidado tu contraseña?")])],1)]),a("v-col",{attrs:{cols:"12",align:"center",id:"sign-up-now-claim"}},[a("p",[e._v("¿Todavía no tienes una cuenta?\n            "),a("router-link",{attrs:{to:"/sign-up"}},[e._v("¡Regístrate ahora!")])],1)]),a("v-snackbar",{attrs:{timeout:4e3},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n        "+e._s(e.snackbarText)+"\n        "),a("v-btn",{attrs:{color:"blue",text:""},on:{click:function(t){e.snackbar=!1}}},[e._v("\n            "+e._s(e.closeText)+"\n        ")])],1)],1)},w=[],L=(a("a481"),a("4c51"));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(a,!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var k={name:"login",data(){return{validForm:!1,email:"",password:"",showPassword:!1,buttonIsDisabled:!0,snackbar:!1,snackbarText:"",rules:{required:e=>!!e||"Este campo es obligatorio"},closeText:L["a"].TEXT_CLOSE}},methods:y({},Object(i["b"])(["loginUserFirebase"]),{login:function(){let e=this.loginUserFirebase({email:this.email,password:this.password});e.then(e=>{e.user.emailVerified?this.$router.replace("dashboard"):this.$router.push("email-verification")}).catch((function(e){self.snackbarText=e,self.snackbar=!0}))}}),watch:{validForm:function(e){this.buttonIsDisabled=!e}}},F=k,x=a("b0af"),B=a("62ad"),M=a("4bd4"),V=a("8e36"),G=a("0fd9"),j=a("2db4"),X=a("8654"),H=Object(h["a"])(F,P,w,!1,null,"72cc85f0",null),q=H.exports;I()(H,{VBtn:U["a"],VCard:x["a"],VCol:B["a"],VContainer:N["a"],VForm:M["a"],VProgressLinear:V["a"],VRow:G["a"],VSnackbar:j["a"],VTextField:X["a"]});var Y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("h2",[e._v("Crea tu cuenta")])]),a("v-col",{attrs:{cols:"12"}},[a("v-card",[a("v-progress-linear",{attrs:{value:"50",height:"10",color:"blue-grey",reactive:"",dark:""}}),a("v-container",[a("v-form",{model:{value:e.validForm,callback:function(t){e.validForm=t},expression:"validForm"}},[a("v-text-field",{attrs:{rules:[e.rules.required],label:"Nombre",required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("v-text-field",{attrs:{rules:[e.rules.required],label:"Apellidos",required:""},model:{value:e.lastName,callback:function(t){e.lastName=t},expression:"lastName"}}),a("v-text-field",{attrs:{rules:[e.rules.required,e.rules.email],label:"E-mail",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{rules:[e.rules.required,e.rules.min8Char,e.rules.samePassword],"append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",type:e.showPassword?"text":"password",label:"Contraseña",hint:"Mínimo 8 caracteres",counter:"",required:""},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("v-text-field",{attrs:{rules:[e.rules.required,e.rules.min8Char,e.rules.samePassword],"append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",type:e.showPassword?"text":"password",label:"Repite la contraseña",hint:"Mínimo 8 caracteres",counter:"",required:""},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.password2,callback:function(t){e.password2=t},expression:"password2"}})],1),a("v-btn",{attrs:{block:"",color:"primary",disabled:e.buttonIsDisabled},on:{click:e.signUp}},[e._v("Registrar")])],1)],1)],1),a("v-col",{attrs:{cols:"12",align:"center",id:"login-now-claim"}},[a("p",[e._v("¿Ya tienes una cuenta? "),a("router-link",{attrs:{to:"/login"}},[e._v("¡Accede ahora!")])],1)])],1),a("v-snackbar",{attrs:{timeout:4e3},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n        "+e._s(e.snackbarText)+"\n        "),a("v-btn",{attrs:{color:"blue",text:""},on:{click:function(t){e.snackbar=!1}}},[e._v("\n            "+e._s(e.closeText)+"\n        ")])],1)],1)},W=[];function $(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function K(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$(a,!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var z={name:"signUp",data(){return{validForm:!1,name:"",lastName:"",email:"",password:"",password2:"",showPassword:!1,buttonIsDisabled:!0,snackbar:!1,snackbarText:"",rules:{required:e=>!!e||L["a"].RULE_TEXT_MANDATORY_FIELD,min8Char:e=>e.length>=8||0==e.length||"Mínimo 8 caracteres",email:e=>{const t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)||"E-mail no válido"},samePassword:e=>0==e.localeCompare(this.password)||"Las contraseñas no coinciden"},closeText:L["a"].TEXT_CLOSE}},methods:K({},Object(i["b"])(["isUsernameInUseFirebase","registerUserFirebase"]),{signUp:function(){let e=this.registerUserFirebase({name:this.name,lastName:this.lastName,email:this.email,password:this.password});e.then(()=>{console.log("Successfully updated user"),this.$router.push("email-verification")}).catch(e=>{this.snackbarText=e,this.snackbar=!0})}}),watch:{validForm:function(e){this.buttonIsDisabled=!e}}},Z=z,J=Object(h["a"])(Z,Y,W,!1,null,"a312ef40",null),Q=J.exports;I()(J,{VBtn:U["a"],VCard:x["a"],VCol:B["a"],VContainer:N["a"],VForm:M["a"],VProgressLinear:V["a"],VRow:G["a"],VSnackbar:j["a"],VTextField:X["a"]});var ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"email-verification"},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("h2",[e._v("Verifica tu E-mail")])])],1),a("v-col",{attrs:{cols:"12"}},[a("v-card",[a("v-progress-linear",{attrs:{value:"100",height:"10",color:"blue-grey",reactive:"",dark:""}}),a("v-container",[a("v-row",[a("v-col",{attrs:{align:"center"}},[a("br"),a("br"),a("v-progress-circular",{attrs:{size:"100",color:"primary",indeterminate:""}}),a("br"),a("br")],1)],1),a("v-row",[a("v-col",[e._v("\n                        Para poder continuar, completa el proceso de verificación a través del enlace que hemos enviado a tu E-mail.\n                    ")])],1)],1)],1)],1),a("v-snackbar",{attrs:{timeout:4e3},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n        "+e._s(e.snackbarText)+"\n        "),a("v-btn",{attrs:{color:"blue",text:""},on:{click:function(t){e.snackbar=!1}}},[e._v("\n            "+e._s(e.closeText)+"\n        ")])],1)],1)},te=[];function ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ne(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ae(a,!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ae(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var re={name:"emailVerification",data(){return{sendEmailButtonIsDisabled:!0,snackbar:!1,snackbarText:"",isEmailVerified:!1,intervalCheckEmailVerified:null,user:null,closeText:L["a"].TEXT_CLOSE}},methods:ne({},Object(i["b"])(["sendEmailVerificationFirebase","checkEmailVerifiedFirebase"]),{sendEmailVerification:function(){let e=this.sendEmailVerificationFirebase();e.catch(e=>{this.snackbarText=e,this.snackbar=!0})},checkEmailVerified:function(){let e=this.checkEmailVerifiedFirebase();e.then(e=>{e&&(clearInterval(this.intervalCheckEmailVerified),this.$router.replace("fill-your-profile-info"))}).catch(e=>{this.snackbarText=e,this.snackbar=!0})}}),beforeMount(){this.sendEmailVerification(),this.intervalCheckEmailVerified=setInterval(this.checkEmailVerified,2e3)}},se=re,oe=Object(h["a"])(se,ee,te,!1,null,"7d13d96e",null),ie=oe.exports;I()(oe,{VBtn:U["a"],VCard:x["a"],VCol:B["a"],VContainer:N["a"],VProgressCircular:_["a"],VProgressLinear:V["a"],VRow:G["a"],VSnackbar:j["a"]});var ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("h2",[e._v("Rellena tu perfil")])]),a("v-col",{attrs:{cols:"12"}},[a("v-card",[a("v-progress-linear",{attrs:{value:"25",height:"10",color:"blue-grey",reactive:"",dark:""}}),a("v-container",[a("v-form",{model:{value:e.validForm,callback:function(t){e.validForm=t},expression:"validForm"}},[a("v-text-field",{attrs:{rules:[e.rules.required,e.rules.min4Char,e.rules.validUsername],label:"Nombre de usuario",counter:"",maxlength:"10",required:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("v-dialog",{ref:"dialog",attrs:{"return-value":e.birthDate,persistent:""},on:{"update:returnValue":function(t){e.birthDate=t},"update:return-value":function(t){e.birthDate=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-text-field",e._g({attrs:{label:"Fecha de nacimiento","append-icon":"mdi-calendar",rules:[e.rules.required,e.rules.minAge],readonly:"",required:""},model:{value:e.birthDateInTextMonthFormat,callback:function(t){e.birthDateInTextMonthFormat=t},expression:"birthDateInTextMonthFormat"}},n))]}}]),model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[a("v-date-picker",{attrs:{scrollable:"",width:"97%",locale:"es"},model:{value:e.birthDate,callback:function(t){e.birthDate=t},expression:"birthDate"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.modal=!1}}},[e._v("Cancel")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.dialog.save(e.birthDate)}}},[e._v("OK")])],1)],1),a("v-select",{staticStyle:{"margin-top":"15px"},attrs:{rules:[e.rules.required],items:e.genderOptions,"item-value":"id","item-text":"option",label:"Género",dense:"","return-object":""},scopedSlots:e._u([{key:"item",fn:function(t){var n=t.item;return[a("v-avatar",[a("img",{staticStyle:{height:"60%",width:"auto"},attrs:{src:n.img}})]),e._v("\n                                "+e._s(n.name)+"\n                            ")]}},{key:"selection",fn:function(t){var n=t.item;t.select,t.selected;return[a("v-avatar",[a("img",{staticStyle:{height:"50%",width:"auto"},attrs:{src:n.img}})]),e._v("\n                                "+e._s(n.name)+"\n                            ")]}}]),model:{value:e.gender,callback:function(t){e.gender=t},expression:"gender"}}),a("v-textarea",{staticStyle:{"margin-top":"15px"},attrs:{outlined:"",rules:[e.rules.required,e.rules.min20Char],label:"Cuéntanos un poco sobre ti",required:"",counter:"",maxlength:"140"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),a("v-btn",{attrs:{block:"",color:"primary",disabled:e.buttonIsDisabled},on:{click:e.setProfileInfo}},[e._v("Continuar")])],1)],1)],1),a("v-snackbar",{attrs:{timeout:4e3},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n            "+e._s(e.snackbarText)+"\n            "),a("v-btn",{attrs:{color:"blue",text:""},on:{click:function(t){e.snackbar=!1}}},[e._v("\n                "+e._s(e.closeText)+"\n        ")])],1)],1)],1)},le=[],ue=a("1da1");function ge(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function fe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ge(a,!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ge(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const de=16;var he={name:"fillYourProfileInfo",data(){return{buttonIsDisabled:!0,snackbar:!1,snackbarText:"",username:"",birthDate:null,birthDateDateFormat:null,firstTimeOpenCalendar:!0,menu:!1,modal:!1,description:"",gender:null,validForm:!1,genderOptions:this.$store.getters.getAllAvailableGendersAsArray,rules:{required:e=>!!e||"Este campo es obligatorio",min4Char:e=>e.length>=L["a"].RULE_MIN_VALUE_CHARACTERS_USERNAME||0==e.length||L["a"].RULE_TEXT_MIN_VALUE_CHARACTERS_USERNAME,min20Char:e=>e.length>=L["a"].RULE_MIN_VALUE_CHARACTERS_USER_DESCRIPTION||0==e.length||L["a"].RULE_TEXT_MIN_VALUE_CHARACTERS_USER_DESCRIPTION,minAge:e=>{const t=new Date(e),a=new Date;let n;return a.setHours(0,0,0),n=!(a.getFullYear()-t.getFullYear()<de)&&(a.getFullYear()-t.getFullYear()!=de||!(a.getMonth()<t.getMonth())&&(a.getMonth()!=t.getMonth()||!(a.getDate()<t.getDate()))),n||"Debes tener al menos"+this.minimumAge+" años para poder registrarte"},validUsername:e=>{const t=/[a-zA-Z_]+[a-zA-Z0-9_]*/,a=/^_/,n=/_[_]+/;return t.test(e)&&!a.test(e)&&!n.test(e)||"Nombre de usuario no válido"}},closeText:L["a"].TEXT_CLOSE}},methods:fe({},Object(i["b"])(["setUserProfileInfoFirebase","isUsernameInUseFirebase"]),{setProfileInfo:function(){var e=Object(ue["a"])((function*(){try{if(yield this.isUsernameInUseFirebase(this.username))return this.snackbarText=L["a"].ERROR_ALREADY_AN_ACCOUNT_WITH_THIS_USERNAME,void(this.snackbar=!0)}catch(t){return this.snackbarText=t,void(this.snackbar=!0)}let e=this.setUserProfileInfoFirebase({username:this.username,birthDate:new Date(this.birthDate).setHours(0,0,0),gender:this.gender.id,description:this.description});e.then(()=>{this.$router.push("fill-your-languages")}).catch(e=>{this.snackbarText=e,this.snackbar=!0})}));function t(){return e.apply(this,arguments)}return t}(),setDefaultBirthDate:function(){if(this.firstTimeOpenCalendar){let e=new Date;e.setFullYear(e.getFullYear()-de),this.birthDate=e.toISOString().substr(0,10),this.firstTimeOpenCalendar=!1}}}),computed:{birthDateInTextMonthFormat:function(){return this.$store.getters.getFormattedDateInTextMonth(this.birthDate)}},watch:{validForm:function(e){this.buttonIsDisabled=!e}},mounted(){this.setDefaultBirthDate()}},me=he,Ie=a("8212"),Ee=a("2e4b"),_e=a("169a"),be=a("b974"),pe=a("2fa4"),Re=a("a844"),ve=Object(h["a"])(me,ce,le,!1,null,"2487bd62",null),Te=ve.exports;I()(ve,{VAvatar:Ie["a"],VBtn:U["a"],VCard:x["a"],VCol:B["a"],VContainer:N["a"],VDatePicker:Ee["a"],VDialog:_e["a"],VForm:M["a"],VProgressLinear:V["a"],VRow:G["a"],VSelect:be["a"],VSnackbar:j["a"],VSpacer:pe["a"],VTextField:X["a"],VTextarea:Re["a"]});var Oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("h2",[e._v("Tus idiomas")])])],1),a("v-col",{attrs:{cols:"12"}},[a("v-card",[a("v-progress-linear",{attrs:{value:"50",height:"10",color:"blue-grey",reactive:"",dark:""}}),a("YourLanguagesSelector")],1)],1)],1)},Ae=[],Ue=a("9a99"),Ne={name:"FillYourLanguages",data(){return{buttonIsDisabled:!0}},methods:{},components:{YourLanguagesSelector:Ue["a"]}},De=Ne,Ce=Object(h["a"])(De,Oe,Ae,!1,null,"750a1a58",null),Pe=Ce.exports;I()(Ce,{VCard:x["a"],VCol:B["a"],VContainer:N["a"],VProgressLinear:V["a"],VRow:G["a"]});var we=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticStyle:{height:"100%",position:"relative",width:"100%"},attrs:{align:"center"}},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("h2",[e._v("Elige tu foto de perfil")])])],1),a("v-row",{staticStyle:{height:"100%"}},[a("v-col",{staticStyle:{height:"100%"},attrs:{cols:"12",sm:"6","offset-sm":"3",md:"4","offset-md":"4"}},[a("v-card",{staticClass:"mx-auto",staticStyle:{height:"75%"},attrs:{align:"center"}},[a("v-progress-linear",{attrs:{value:"100",height:"10px",color:"blue-grey",dark:""}}),a("v-avatar",{staticClass:"thumbnail",staticStyle:{width:"95%","padding-top":"95%","vertical-align":"top",position:"relative","margin-top":"5%"}},[e.showImg?a("img",{staticClass:"white--text align-end",staticStyle:{width:"100%",position:"absolute",top:"0",height:"100%","object-position":"center","object-fit":"cover"},attrs:{"aspect-ratio":1,src:e.imagePreview}}):e._e()]),a("v-btn",{staticClass:"button-open-camera",attrs:{absolute:"",dark:"",fab:"",right:"",color:"primary"},on:{click:function(t){return e.$refs.myFiles.click()}}},[a("v-icon",[e._v("mdi-camera")])],1),a("v-container",{staticClass:"bottom-centered-buttons"},[a("v-btn",{attrs:{block:"",color:"primary",disabled:e.buttonIsDisabled},on:{click:e.uploadUserProfileImage}},[e._v("Continuar")])],1)],1)],1)],1),a("input",{ref:"myFiles",attrs:{hidden:"",type:"file",accept:"image/*",capture:""},on:{change:e.previewFiles}}),a("v-snackbar",{attrs:{timeout:4e3},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n        "+e._s(e.snackbarText)+"\n        "),a("v-btn",{attrs:{color:"blue",text:""},on:{click:function(t){e.snackbar=!1}}},[e._v("\n            "+e._s(e.closeText)+"\n        ")])],1)],1)},Le=[],Se=a("4627");function ye(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ke(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ye(a,!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ye(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Fe={name:"SetYourProfileImage",data(){return{showImg:!0,imagePreview:this.$store.getters.getDefaultInfoUserImageByGender,buttonIsDisabled:!1,imageUpload:null,snackbar:!1,snackbarText:"",closeText:L["a"].TEXT_CLOSE}},methods:ke({},Object(i["b"])(["setUserProfileImageDatabase"]),{previewFiles(){if(this.$refs.myFiles.files.length>0){if(!this.$refs.myFiles.files[0].type.includes("image/"))return this.snackbarText=L["a"].ASK_FOR_IMAGE_SELECTION,void(this.snackbar=!0);let e=this.$refs.myFiles.files[0],t={maxSizeMB:.5,maxWidthOrHeight:500,useWebWorker:!0};Object(Se["a"])(e,t).then(e=>{if("function"===typeof FileReader){const t=new FileReader;t.onload=e=>{this.imgSrc=e.target.result,this.imagePreview=this.imgSrc,this.imageUpload=this.imagePreview.replace("data:image/jpeg;base64,","").replace("data:image/png;base64,",""),console.log(this.imagePreview),this.showImg=!1,n["a"].nextTick(()=>{this.showImg=!0})},t.readAsDataURL(e)}else this.snackbarText=L["a"].ERROR_API_FILEREADER_NOT_SUPPORTED,this.snackbar=!0}).catch((function(e){console.log(e.message)}))}else console.warn("img error")},uploadUserProfileImage(){let e=this,t=this.setUserProfileImageDatabase(e.imageUpload);t.then(()=>{this.$router.replace("dashboard")}).catch((function(t){e.snackbarText=t,e.snackbar=!0}))}})},xe=Fe,Be=(a("f015"),a("132d")),Me=Object(h["a"])(xe,we,Le,!1,null,"fba930d0",null),Ve=Me.exports;I()(Me,{VAvatar:Ie["a"],VBtn:U["a"],VCard:x["a"],VCol:B["a"],VContainer:N["a"],VIcon:Be["a"],VProgressLinear:V["a"],VRow:G["a"],VSnackbar:j["a"]});var Ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"send-change-password-email",staticStyle:{position:"relative"}},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("h2",[e._v("¿Has olvidado tu contraseña?")])])],1),a("v-col",{attrs:{cols:"12"}},[a("v-card",[a("v-progress-linear",{attrs:{height:"10",color:"blue-grey",reactive:"",dark:""},model:{value:e.progressValue,callback:function(t){e.progressValue=t},expression:"progressValue"}}),a("v-container",[a("p",{attrs:{align:"justify"}},[e._v("\n                    ¿Has olvidado tu contraseña? Introduce tu E-mail y te ayudaremos a recuperarla:\n                ")]),a("v-form",{model:{value:e.validForm,callback:function(t){e.validForm=t},expression:"validForm"}},[a("v-text-field",{attrs:{rules:[e.rules.required,e.rules.email],label:"E-mail",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),a("br"),a("v-btn",{attrs:{block:"",color:"primary",disabled:e.buttonIsDisabled},on:{click:e.sendChangePasswordEmail}},[e._v("Restablecer contraseña")])],1)],1)],1),a("v-dialog",{model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("br"),a("v-card-text",{staticStyle:{color:"black","padding-bottom":"0px"},attrs:{align:"justify"}},[a("p",{staticStyle:{"margin-bottom":"7px"}},[e._v("En un breve período de tiempo recibirás un email. Ábrelo y sigue las instrucciones para restablecer tu contraseña.")])]),a("v-card-actions",{staticStyle:{"padding-bottom":"15px"}},[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:e.redirectToHome}},[e._v("\n                    Entendido\n                ")]),a("v-spacer")],1)],1)],1),a("v-snackbar",{attrs:{timeout:4e3},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n        "+e._s(e.snackbarText)+"\n        "),a("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){e.snackbar=!1}}},[e._v("\n            "+e._s(e.closeText)+"\n        ")])],1)],1)},je=[],Xe={name:"SendChangePasswordEmail",data(){return{progressValue:100,validForm:!1,email:"",buttonIsDisabled:!0,dialog:!1,snackbar:!1,snackbarText:"Parece que ha habido un problema de conexión. Por favor, vuelve a intentarlo más tarde.",rules:{required:e=>!!e||"Este campo es obligatorio",email:e=>{const t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)||"E-mail no válido"}},closeText:L["a"].TEXT_CLOSE}},methods:{sendChangePasswordEmail:function(){let e=c["auth"](),t=this;e.sendPasswordResetEmail(this.email).then((function(){t.dialog=!0})).catch((function(e){console.warn(e),"auth/user-not-found"!=e.code?t.snackbar=!0:t.dialog=!0}))},redirectToHome:function(){this.dialog=!1,this.$router.replace("home")}},watch:{validForm:function(e){this.buttonIsDisabled=!e}}},He=Xe,qe=a("99d9"),Ye=Object(h["a"])(He,Ge,je,!1,null,"5948e7e4",null),We=Ye.exports;I()(Ye,{VBtn:U["a"],VCard:x["a"],VCardActions:qe["a"],VCardText:qe["b"],VCol:B["a"],VContainer:N["a"],VDialog:_e["a"],VForm:M["a"],VProgressLinear:V["a"],VRow:G["a"],VSnackbar:j["a"],VSpacer:pe["a"],VTextField:X["a"]}),n["a"].use(R["a"]);const $e=new R["a"]({base:"/",routes:[{path:"*",redirect:"/home"},{path:"/",redirect:"/home"},{path:"/home",name:"home",component:C},{path:"/login",name:"login",component:q},{path:"/sign-up",name:"signUp",component:Q},{path:"/email-verification",name:"emailVerification",component:ie,meta:{requiresAuth:!0}},{path:"/fill-your-profile-info",name:"fillYourProfileInfo",component:Te,meta:{requiresAuth:!0}},{path:"/fill-your-languages",name:"fillYourLanguages",component:Pe,meta:{requiresAuth:!0}},{path:"/set-your-profile-image",name:"setYourProfileImage",component:Ve,meta:{requiresAuth:!0}},{path:"/send-change-password-email",name:"sendChangePasswordEmail",component:We,meta:{requiresAuth:!1}},{path:"/dashboard",name:"dashboard",redirect:{name:"profileHome"},meta:{requiresAuth:!0},component:()=>a.e("chunk-031daaff").then(a.bind(null,"7277")),children:[{path:"ranking",name:"rankingHome",meta:{requiresAuth:!0,menu:"ranking"},component:()=>a.e("chunk-c911e686").then(a.bind(null,"185c"))},{path:"ranking/user/:id/",name:"userProfileRanking",meta:{requiresAuth:!0,menu:"ranking"},component:()=>a.e("chunk-795d24e4").then(a.bind(null,"4a39"))},{path:"events",name:"eventsHome",meta:{requiresAuth:!0,menu:"events"},component:()=>a.e("chunk-55006918").then(a.bind(null,"a58d"))},{path:"event/:id/",name:"eventDescription",meta:{requiresAuth:!0,menu:"events"},component:()=>a.e("chunk-7b173f83").then(a.bind(null,"2616"))},{path:"search",name:"searchHome",meta:{requiresAuth:!0,menu:"search"},component:()=>a.e("chunk-2f126a07").then(a.bind(null,"c649"))},{path:"search/filter",name:"searchFilter",meta:{requiresAuth:!0,menu:"search"},component:()=>a.e("chunk-17b48d30").then(a.bind(null,"c3bc"))},{path:"search/user/:id/",name:"userProfileSearch",meta:{requiresAuth:!0,menu:"search"},component:()=>a.e("chunk-795d24e4").then(a.bind(null,"4a39"))},{path:"chats",name:"chatHome",meta:{requiresAuth:!0,menu:"chats"},component:()=>a.e("chunk-b6507cf4").then(a.bind(null,"35f2"))},{path:"chats/chat/:id/",name:"chatWithUser",meta:{requiresAuth:!0,menu:"chats"},component:()=>a.e("chunk-38df32fb").then(a.bind(null,"c6a4"))},{path:"chats/user/:id/",name:"userProfileChat",meta:{requiresAuth:!0,menu:"chats"},component:()=>a.e("chunk-795d24e4").then(a.bind(null,"4a39"))},{path:"profile",name:"profileHome",meta:{requiresAuth:!0,menu:"profile"},component:()=>a.e("chunk-3827b64d").then(a.bind(null,"7859"))},{path:"profile/:id/edit",name:"profileEdit",meta:{requiresAuth:!0,menu:"profile"},component:()=>a.e("chunk-2d0b9e05").then(a.bind(null,"358e"))}]}]});$e.beforeEach((e,t,a)=>{l.a.auth().currentUser,e.matched.some(e=>e.meta.requiresAuth);a()});var Ke=$e,ze=a("5cdc");a("4dce");n["a"].use(i["a"]);var Ze=new i["a"].Store({modules:{},state:{},getters:{},actions:{},mutations:{}});function Je(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Qe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Je(a,!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Je(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}n["a"].use(i["a"]);var et=new i["a"].Store({modules:{events:Ze},state:{allAvailableLanguages:{de:"Alemán",zh:"Chino",es:"Español",fr:"Francés",en:"Inglés",it:"Italiano",ja:"Japonés",pt:"Portugués",all:"Cualquier idioma"},allAvailableGenders:{M:{name:"Hombre",img:"img/genders/male.svg"},W:{name:"Mujer",img:"img/genders/female.svg"}},defaultInfo:{userImage:"img/defaultUserImages/defaultUserImage.svg",maleUserImage:"img/defaultUserImages/male-defaultUserImage.svg",femaleUserImage:"img/defaultUserImages/female-defaultUserImage.svg",profileHeaderImage:"img/backgrounds/user_profile_header.png"},searchInfo:{lastVisible:null,userIDs:[],filtering:{genderW:!0,genderM:!0,ageRange:[L["a"].MIN_USER_AGE,L["a"].MAX_USER_AGE],maxDistance:3,maxDistanceRanges:[1e3,5e3,1e4,null],maxDistanceRangesText:[L["a"].TEXT_1_KM,L["a"].TEXT_5_KM,L["a"].TEXT_10_KM,"∞"],searchByUsername:!1,filterByLanguageToLearn:!0,knownLanguage:{id:"all",text:"Cualquier idioma"},languageToLearn:{id:"all",text:"Cualquier idioma"},nearbyUsersIDs:[]}},emailVerified:!1,userInfo:{uid:null,registrationState:null,username:null,email:null,name:null,lastName:null,birthDate:null,gender:null,description:null,knownLanguages:null,languagesToLearn:null,profileImage:null,chatIDs:[],chatUsers:[],chatIDsListener:null,avgRating:null,numRatings:null,location:{}},chats:[],chatsInfo:{activeChat:null},rankingInfo:{lastVisible:null,userIDs:[]},activeUser:[],eventsInfo:{lastVisible:null,events:[]},activeEventID:null,ratings:{},users:[]},getters:{notReadMessagesCountByChatID:e=>t=>{let a=e.chats.findIndex(e=>{return e.id==t}),n=0;return null!=a&&e.chats[a].messages.forEach((function(t){t.sender===e.userInfo.uid||t.read||n++})),n},getProfileHeaderImage:e=>{return e.defaultInfo.profileHeaderImage},getUserIndexByUID:e=>t=>{return e.users.findIndex(e=>{return e.uid==t})},getUserByUID:(e,t)=>a=>{let n=t.getUserIndexByUID(a);return-1!=n?e.users[n]:null},getRankingUsers:(e,t)=>{let a=[];return e.rankingInfo.userIDs.forEach((function(n){let r=t.getUserIndexByUID(n);-1!=r&&a.push(e.users[r])})),a},getSearchUsers:(e,t)=>{let a=[];return e.searchInfo.userIDs.forEach((function(n){let r=t.getUserIndexByUID(n);-1!=r&&a.push(e.users[r])})),a},getOtherUserInChatByChatID:(e,t)=>a=>{let n=t.getChatWithUserByChatID(a),r=null;return n.users.forEach((function(t){t!=e.userInfo.uid&&(r=t)})),null!=r?t.getUserByUID(r):null},getEmailVerified:e=>{return e.emailVerified},getRatingOfUserByUID:e=>t=>{return e.ratings[t]},getRegistrationState:e=>{return e.userInfo.registrationState},getChatsInfoActiveChat:e=>{return e.chatsInfo.activeChat},getActiveEvent:e=>{return e.eventsInfo.events.find((function(t){return t.id===e.activeEventID}))},getEvent:e=>t=>{return e.eventsInfo.events.find((function(e){return e.id===t}))},getActiveChatUserID:e=>{return e.activeChat.userID},getChatUserByChatID:e=>t=>{return e.userInfo.chatUsers.find((function(e){return e.chatID==t}))},getNewChatMessageIndex:e=>t=>{return e.chats[t].messages.length},getSearchInfoUsers:function(e){return e.searchInfo.userIDs},getSearchInfoUserByUID:e=>t=>{return e.searchInfo.userIDs.find((function(e){return e.uid==t}))},getChatWithUser:function(e){return e.chatWithUser},getChats:e=>{return e.chats},getSearchInfoFilteringFilterByLanguageToLearn:function(e){return e.searchInfo.filtering.filterByLanguageToLearn},getSearchInfoFiltering:function(e){return e.searchInfo.filtering},getSearchInfoLastVisible:function(e){return e.searchInfo.lastVisible},getSearchInfo:e=>{return e.searchInfo},getLanguageNameByID:e=>t=>{return e.allAvailableLanguages[t]},getChatWithUserByChatID:e=>t=>{return e.chats.find((function(e){return e.id==t}))},getAllAvailableLanguagesAsArray:(e,t)=>{return Object.keys(e.allAvailableLanguages).map((function(e){let a=t.getLanguageNameByID(e);return new Object({id:e,text:a})}))},getGenderNameByID:e=>t=>{return e.allAvailableGenders[t].name},getAngleInRad:e=>e=>{return e*Math.PI/180},getHaversineDistance:(e,t)=>e=>{let a=e.p1,n=e.p2,r=6378137,s=t.getAngleInRad(n.lat-a.lat),o=t.getAngleInRad(n.lng-a.lng),i=Math.sin(s/2)*Math.sin(s/2)+Math.cos(t.getAngleInRad(a.lat))*Math.cos(t.getAngleInRad(n.lat))*Math.sin(o/2)*Math.sin(o/2),c=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)),l=r*c;return l},getGenderImgByID:e=>t=>{return e.allAvailableGenders[t].img},getAllAvailableGendersAsArray:(e,t)=>{return Object.keys(e.allAvailableGenders).map((function(e){let a=t.getGenderNameByID(e),n=t.getGenderImgByID(e);return new Object({id:e,name:a,img:n})}))},getPathToFlagImageByLanguageID:()=>e=>{return"img/flags/"+e+".svg"},getDefaultInfoUserImage:e=>{return e.defaultInfo.userImage},getUserInfo:e=>{return e.userInfo},getUserInfoLocation:e=>{return e.userInfo.location},getUserInfoUID:e=>{return e.userInfo.uid},getUserInfoChatIDs:e=>{return e.userInfo.chatIDs},getMaleDefaultInfoUserImage:e=>{return e.defaultInfo.maleUserImage},getFemaleDefaultInfoUserImage:e=>{return e.defaultInfo.femaleUserImage},getDefaultInfoUserImageByGender:(e,t)=>{return"M"==e.userInfo.gender?t.getMaleDefaultInfoUserImage:"W"==e.userInfo.gender?t.getFemaleDefaultInfoUserImage:e.defaultInfo.userImage},getUserInfoProfileImage:(e,t)=>{return e.userInfo.profileImage?e.userInfo.profileImage:t.getDefaultInfoUserImageByGender},getLanguageObjectsByIDs:(e,t,a)=>{let n=[];return a.forEach((function(e){let a={name:t.getLanguageNameByID(e),img:t.getPathToFlagImageByLanguageID(e)};n.push(a)})),n},getFormattedDateInTextMonth:()=>e=>{let t=new Date(e);return t.getDate()+" "+L["a"].TEXT_OF+" "+L["a"].MONTHS_OF_THE_YEAR_IN_TEXT[t.getMonth()]+" "+L["a"].TEXT_OF+" "+t.getFullYear()},getFormattedMonthIn3CapitalLettersText:()=>e=>{let t=new Date(e),a=L["a"].MONTHS_OF_THE_YEAR_IN_TEXT[t.getMonth()];return a.charAt(0).toUpperCase()+a.charAt(1).toUpperCase()+a.charAt(2).toUpperCase()}},mutations:{setSearchInfoFilteringNearbyUsersIDs(e,t){e.searchInfo.filtering.nearbyUsersIDs=t},setEmailVerified(e,t){e.emailVerified=t},setUserInfoLocation(e,t){e.userInfo.location=t},resetSearchInfoUserIDs(e){e.searchInfo.userIDs=[]},resetUserInfo(e){e.userInfo={uid:null,registrationState:null,username:null,email:null,name:null,lastName:null,birthDate:null,gender:null,description:null,knownLanguages:null,languagesToLearn:null,profileImage:null,chatIDs:[],chatUsers:[],chatIDsListener:null,avgRating:null,numRatings:null}},setSearchInfoFiltering:function(e,t){return e.searchInfo.filtering=t},resetRankingInfo(e){e.rankingInfo={lastVisible:null,userIDs:[]}},resetEventsInfo(e){e.eventsInfo={lastVisible:null,events:[]}},resetChatsInfoActiveChat(e){e.chatsInfo.activeChat=null},resetChats(e){e.chats=[]},resetRatings(e){e.ratings={}},setUserRating(e,t){t.rating?e.ratings[t.to]=t.rating:delete e.ratings[t.to]},setUserRatingInfo(e,t){let a=e.users.findIndex(e=>{return e.uid==t.uid});e.users[a].avgRating=t.avgRating,e.users[a].numRatings=t.numRatings},setNewUserRatingInfo(e,t){let a=e.users.findIndex(e=>{return e.uid==t.to});if(t.rating)if(e.ratings[t.to]){let n=e.users[a].numRatings,r=e.users[a].avgRating*e.users[a].numRatings,s=(r-e.ratings[t.to]+t.rating)/n;e.users[a].avgRating=s,e.users[a].numRatings=n}else{let n=e.users[a].numRatings+1,r=e.users[a].avgRating*e.users[a].numRatings,s=(r+t.rating)/n;e.users[a].avgRating=s,e.users[a].numRatings=n}else{let n,r=e.users[a].numRatings-1,s=e.users[a].avgRating*e.users[a].numRatings;n=r>0?(s-e.ratings[t.to])/r:0,e.users[a].avgRating=n,e.users[a].numRatings=r}},setUserRatings(e,t){e.ratings=t},setUserInfoEmail(e,t){e.userInfo.email=t},setUserInfoChatIDs(e,t){e.userInfo.chatIDs=t},setUserInfoChatIDsListener(e,t){e.userInfo.chatIDsListener=t},addChatToChats(e,t){-1==e.chats.findIndex(e=>{return e.id==t.id})&&e.chats.push(t)},addUserToChatUsers(e,t){e.userInfo.chatUsers.find((function(e){return e.chatID==t.chatID}))||e.userInfo.chatUsers.push(t)},addChatIDToChatIDs(e,t){e.userInfo.chatIDs.push(t)},addMessageToChat(e,t){e.chats[t.chatIndex].messages.push(t.message)},setUserInfoUID(e,t){e.userInfo.uid=t},addUserToSearchInfoUserIDs(e,t){e.searchInfo.userIDs.push(t)},addRankingInfoUserID(e,t){let a=e.rankingInfo.userIDs.findIndex((function(e){return t==e.uid}));1!=a&&e.rankingInfo.userIDs.push(t)},addSearchInfoUserID(e,t){let a=e.searchInfo.userIDs.findIndex((function(e){return t==e.uid}));1!=a&&e.searchInfo.userIDs.push(t)},setSearchInfoUserIDs(e,t){e.searchInfo.userIDs=t},addEventsInfoEvent(e,t){e.eventsInfo.events.push(t)},addUser(e,t){let a=e.users.findIndex((function(e){return t.uid==e.uid}));1!=a?e.users.push(t):n["a"].set(e.users,a,t)},setSearchInfoFilteringSearchByUsername(e,t){e.searchInfo.filtering.searchByUsername=t},resetSearchInfo(e){e.searchInfo={lastVisible:null,userIDs:[],filtering:{genderW:!0,genderM:!0,ageRange:[L["a"].MIN_USER_AGE,L["a"].MAX_USER_AGE],maxDistance:3,maxDistanceRanges:[1e3,5e3,1e4,null],maxDistanceRangesText:[L["a"].TEXT_1_KM,L["a"].TEXT_5_KM,L["a"].TEXT_10_KM,"∞"],searchByUsername:!1,filterByLanguageToLearn:!0,knownLanguage:{id:"all",text:"Cualquier idioma"},languageToLearn:{id:"all",text:"Cualquier idioma"},nearbyUsersIDs:[]}}},resetSearchInfoFiltering(e){e.searchInfo.filtering={genderW:!0,genderM:!0,ageRange:[L["a"].MIN_USER_AGE,L["a"].MAX_USER_AGE],maxDistance:3,maxDistanceRanges:[1e3,5e3,1e4,null],maxDistanceRangesText:[L["a"].TEXT_1_KM,L["a"].TEXT_5_KM,L["a"].TEXT_10_KM,"∞"],searchByUsername:!1,filterByLanguageToLearn:!0,knownLanguage:{id:"all",text:"Cualquier idioma"},languageToLearn:{id:"all",text:"Cualquier idioma"},nearbyUsersIDs:[]}},setSearchInfoLastVisible(e,t){e.searchInfo.lastVisible=t},setRankingInfoLastVisible(e,t){e.rankingInfo.lastVisible=t},setEventsInfoLastVisible(e,t){e.eventsInfo.lastVisible=t},setSearchInfoFilter(e,t){e.searchInfo.filter=t},setUserInfoUsername(e,t){e.userInfo.username=t},setUserInfoName(e,t){e.userInfo.name=t},setUserInfoLastName(e,t){e.userInfo.lastName=t},setUserInfoBirthDate(e,t){e.userInfo.birthDate=t},setUserInfoGender(e,t){e.userInfo.gender=t},setUserInfoAvgRating(e,t){e.userInfo.avgRating=t},setUserInfoNumRatings(e,t){e.userInfo.numRatings=t},setSearchedUserAvgRating(e,t){let a=e.searchInfo.userIDs.findIndex(e=>{return e.uid==t.uid});e.searchInfo.userIDs[a].avgRating=t.avgRating},setSearchedUserNumRatings(e,t){let a=e.searchInfo.userIDs.findIndex(e=>{return e.uid==t.uid});e.searchInfo.userIDs[a].numRatings=t.numRatings},setUserInfoDescription(e,t){e.userInfo.description=t},setUserInfoProfileImage(e,t){e.userInfo.profileImage=t},setUserInfoKnownLanguages(e,t){e.userInfo.knownLanguages=t},setUserInfoLanguagesToLearn(e,t){e.userInfo.languagesToLearn=t},setRegistrationState(e,t){e.userInfo.registrationState=t},setChatWithUser(e,t){e.chatWithUser=t},setChatsInfoActiveChat(e,t){e.chatsInfo.activeChat=t},setActiveEventID(e,t){e.activeEventID=t},setMessageToRead(e,t){let a=e.chats.findIndex(e=>{return e.id==t.chatID});if(-1!=a){let n=e.chats[a].messages.findIndex(e=>{return e.id=t.messageID});e.chats[a].messages[n].read=!0}},closeAllChatListenersFirebase(e){e.chats.forEach(e=>{e.databaseListener()})},addNewMessage(e,t){let a=e.chats.findIndex(e=>{return e.id==t.chatID}),r=e.chats[a].messages.findIndex(e=>{return e.id==t.message.id});if(-1==r)if(null==t.message.created)e.chats[a].messages.splice(e.chats[a].messages.length,0,t.message);else{let n=e.chats[a].messages.findIndex(e=>{return e.created.toDate().getTime()>t.message.created.toDate().getTime()});-1==n?e.chats[a].messages.push(t.message):e.chats[a].messages.splice(n,0,t.message)}else n["a"].set(e.chats[a].messages,r,t.message)},resetChat(e){e.chats=[],e.chatWithUser=null}},actions:{isUsernameInUseFirebase(e,t){return new Promise((function(e,a){let n=c["firestore"]();n.collection("UsersPublicInfo").where("username","==",t).get().then(t=>{t.size>0?c["auth"]().currentUser.uid==t.docs[0].id?e(!1):e(!0):e(!1)}).catch(e=>{console.error(e),a(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)})}))},setUserPersistanceFirebase(e){return new Promise((function(t,a){c["auth"]().setPersistence(c["auth"].Auth.Persistence.LOCAL).then(()=>{e.commit("setUserInfoUID",c["auth"]().currentUser.uid),t()}).catch(e=>{console.error(e),a(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)})}))},registerUserFirebase:function(e,t){return new Promise((function(a,n){e.state.userInfo.registrationState?e.dispatch("setUserPersistanceFirebase").then(()=>{e.dispatch("setUserUsernameFirebase",t.username).then(()=>{a()}).catch(e=>{n(e)})}).catch(e=>{n(e)}):c["auth"]().createUserWithEmailAndPassword(t.email,t.password).then(()=>{console.log("Success registering user in system."),e.dispatch("setUserPersistanceFirebase").then(()=>{e.dispatch("setUserPrivateInfoFirebase",t).then(()=>{a()}).catch(e=>{n(e)})}).catch(t=>{e.dispatch("logoutUserFirebase").then(()=>{n(t)}).catch(()=>{n(t)})})}).catch(e=>{console.log(e),"auth/email-already-in-use"==e.code?n(L["a"].ERROR_ALREADY_AN_ACCOUNT_WITH_THIS_EMAIL):n(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)})}))},logoutUserFirebase:function(e){return new Promise((function(t,a){null!=c["auth"]()&&(e.commit("closeAllChatListenersFirebase"),c["auth"]().signOut().then(()=>{console.log("User logged out correctly!"),e.commit("resetChat"),t()}).catch(e=>{console.error(e),a(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},setUserPrivateInfoFirebase:function(e,t){return new Promise((function(a,n){let r=c["firestore"]();r.collection("UsersPrivateInfo").doc(c["auth"]().currentUser.uid).set({email:t.email,name:t.name,lastName:t.lastName,registrationState:"registered"},{merge:!0}).then(()=>{console.log("Private info successfully written"),e.commit("setRegistrationState","registered"),e.commit("setUserInfoEmail",t.email),e.commit("setUserInfoName",t.name),e.commit("setUserInfoLastName",t.lastName),a()}).catch((function(e){console.error("Error writing private info: ",e),n(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},setUserPrivateInfoRegistrationStateFirebase:function(e,t){return new Promise((function(a,n){let r=c["firestore"]();r.collection("UsersPrivateInfo").doc(c["auth"]().currentUser.uid).set({registrationState:t},{merge:!0}).then(()=>{console.log("Registration state successfully written"),e.commit("setRegistrationState",t),a()}).catch((function(e){console.error("Error writing registration state info: ",e),n(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},sendEmailVerificationFirebase:function(){return new Promise((function(e,t){c["auth"]().currentUser.sendEmailVerification().then((function(){console.log("verification sent: "),e()}),(function(e){console.log("verification not sent: "+e.message),t(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},checkEmailVerifiedFirebase:function(e){return new Promise((function(t,a){c["auth"]().currentUser.reload().then(()=>{c["auth"]().currentUser.emailVerified&&(console.log("Email is verified"),e.dispatch("setUserPrivateInfoRegistrationStateFirebase","emailVerified").then(()=>{t(!0)}).catch(e=>{a(e)}))}).catch(e=>{console.error(e),a(e)})}))},setUserProfileInfoFirebase:function(e,t){return new Promise((function(a,n){let r=c["firestore"]();r.collection("UsersPublicInfo").doc(c["auth"]().currentUser.uid).set({username:t.username.toLowerCase(),birthDate:new Date(t.birthDate),gender:t.gender,description:t.description,avgRating:0,numRatings:0},{merge:!0}).then(()=>{console.log("Profile info successfully written in users"),e.dispatch("setUserPrivateInfoRegistrationStateFirebase","profileInfoFilled").then(()=>{e.commit("setUserInfoUsername",t.username),e.commit("setUserInfoBirthDate",t.birthDate),e.commit("setUserInfoGender",t.gender),e.commit("setUserInfoDescription",t.description),a()}).catch(e=>{n(e)}),a()}).catch((function(e){console.error("Error writing profile info in users: ",e),n(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},setUserLanguagesFirebase:function(e,t){return new Promise((function(a,n){let r=c["firestore"](),s=[],o=[];console.log(t);for(let e=0;e<t.knownLanguages.length;e++)s.push(t.knownLanguages[e].id);for(let e=0;e<t.languagesToLearn.length;e++)o.push(t.languagesToLearn[e].id);r.collection("UsersPublicInfo").doc(c["auth"]().currentUser.uid).set({knownLanguages:s,languagesToLearn:o},{merge:!0}).then(()=>{console.log("Languages info successfully written in users"),e.dispatch("setUserPrivateInfoRegistrationStateFirebase","languagesFilled").then(()=>{e.commit("setUserInfoKnownLanguages",s),e.commit("setUserInfoLanguagesToLearn",o),a()}).catch(e=>{n(e)})}).catch((function(e){console.error("Error writing languages info in users: ",e),n(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},setUserProfileImageDatabase:function(e,t){return new Promise((function(a,r){n["a"].nextTick(()=>{let n=c["firestore"](),s=c["auth"]().currentUser.uid,o=c["storage"]().ref().child("UserProfileImages/"+s);o.putString(t,"base64").then(()=>{console.log("User profile image uploaded"),o.getDownloadURL().then(t=>{n.collection("UsersPublicInfo").doc(s).set({profileImage:t},{merge:!0}).then(()=>{console.log("User profile image url successfully written"),e.dispatch("setUserPrivateInfoRegistrationStateFirebase","registered").then(()=>{e.commit("setUserInfoProfileImage",t),a()}).catch(e=>{r(e)})}).catch((function(t){console.error("Error writing user profile image url info in users: ",t),e.dispatch("deleteUserProfileImageDatabase",s),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))})}).catch(()=>{r(L["a"].ERROR_UPLOADING_IMAGE)})})}))},deleteUserProfileImageDatabase:function(e,t){return new Promise((function(a,n){let r=c["storage"]().ref().child("UserProfileImages/"+t);r.delete().then((function(){console.log("User profile image removed from database storage"),e.commit("setUserInfoProfileImage",null),a()})).catch((function(e){console.error(e),n(L["a"].ERROR_SOMETHING_HAPPENED)}))}))},loginUserFirebase:function(e,t){return new Promise((function(a,n){c["auth"]().signInWithEmailAndPassword(t.email,t.password).then(t=>{console.log("Success logging user in system."),e.dispatch("setUserPersistanceFirebase").then(()=>{e.dispatch("getUserPrivateInfo").then(()=>{console.log("Success UserPrivateInfo retrieved."),e.dispatch("getUserPublicInfo").then(()=>{console.log("Success UserPublicInfo retrieved."),e.dispatch("getRatingsInRatingsFirebase").then(()=>{a(t)}).catch(e=>{console.error(e),n(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)})}).catch(e=>{n(e)})}).catch(e=>{n(e)})}).catch(t=>{e.dispatch("logoutUserFirebase").then(()=>{n(t)}).catch(()=>{n(t)})})}).catch(e=>{console.log(e),"auth/wrong-password"==e.code?n(L["a"].ERROR_WRONG_EMAIL_PASSWORD_COMBINATION):n(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)})}))},getAppInfoForLoggedUserFirebase:function(e){return e.commit("resetUserInfo"),e.commit("resetChatsInfoActiveChat"),e.commit("resetChats"),e.commit("resetRatings"),e.commit("setUserInfoUID",c["auth"]().currentUser.uid),new Promise((function(t,a){e.dispatch("getUserPrivateInfo").then(()=>{console.log("Success UserPrivateInfo retrieved."),e.dispatch("getUserPublicInfo").then(()=>{console.log("Success UserPublicInfo retrieved."),e.dispatch("getRatingsInRatingsFirebase").then(()=>{e.dispatch("getUserLocation").then(()=>{t()}).catch(e=>{console.error(e),a(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}),t()}).catch(e=>{console.error(e),a(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)})}).catch(e=>{a(e)})}).catch(e=>{a(e)})}))},getUserPrivateInfo:function(e){return new Promise((function(t,a){let n=c["firestore"](),r=c["auth"]().currentUser.uid;n.collection("UsersPrivateInfo").doc(r).get().then((function(n){n.exists?(e.commit("setRegistrationState",n.data().registrationState),e.commit("setUserInfoEmail",n.data().email),e.commit("setUserInfoName",n.data().name),e.commit("setUserInfoLastName",n.data().lastName),t()):(console.warn("No such document!"),a(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM))})).catch((function(e){console.warn("Error getting document:",e),a(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},getUserPublicInfoDocByUIDFirebase:function(e,t){let a=c["firestore"]();return new Promise((function(e,n){a.collection("UsersPublicInfo").doc(t).get().then((function(t){e(t)})).catch((function(e){console.warn("Error getting document:",e),n(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},getUserPublicInfo:function(e){return new Promise((function(t,a){let n=c["auth"]().currentUser.uid;e.dispatch("getUserPublicInfoDocByUIDFirebase",n).then((function(n){n.exists?(e.commit("setUserInfoUsername",n.data().username),e.commit("setUserInfoBirthDate",n.data().birthDate),e.commit("setUserInfoGender",n.data().gender),e.commit("setUserInfoDescription",n.data().description),e.commit("setUserInfoKnownLanguages",n.data().knownLanguages),e.commit("setUserInfoLanguagesToLearn",n.data().languagesToLearn),e.commit("setUserInfoProfileImage",n.data().profileImage),e.commit("setUserInfoAvgRating",n.data().avgRating),e.commit("setUserInfoNumRatings",n.data().numRatings),e.dispatch("createChatIDsListenerFirebase").then(()=>{let r=n.data().chats;try{let n=[];0==r.length&&t(),r.forEach(t=>{n.push(e.dispatch("createChatListenerFirebase",t))}),Promise.all(n).then((function(){t()})).catch((function(e){a(e)}))}catch(s){console.error(s),a(s)}}).catch(e=>{console.error(e),a(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)})):(console.warn("No such document!"),a(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM))})).catch((function(e){console.warn("Error getting document:",e),a(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},createChatIDsListenerFirebase:function(e){let t=c["firestore"]();return new Promise((function(a,n){try{let n=t.collection("UsersPublicInfo").doc(c["auth"]().currentUser.uid).onSnapshot((function(t){t&&(e.commit("setUserInfoChatIDs",t.data().chats),e.commit("setUserInfoChatIDsListener",n)),a()}))}catch(r){console.error(r),n(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}}))},setChatWithUserMessagesToRead:function(e,t){let a=c["firestore"]();return new Promise((function(n,r){let s=e.state.chats.findIndex(e=>{return e.id==t}),o=[];e.state.chats[s].messages.forEach(n=>{n.read||n.sender==e.state.userInfo.uid||o.push(a.collection("Chats").doc(t).collection("Messages").doc(n.id).update({read:!0}).then(()=>{console.log("Message successfully updated read state ")}).catch((function(e){console.error("Error updating message read state: ",e),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)})))}),Promise.all(o).then((function(){n()})).catch((function(){console.error("Error updating messages read state: "),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},sendChatMessageFirebase:function(e,t){let a=c["firestore"]();return new Promise((function(n,r){let s=e.state.chats.findIndex(e=>{return e.id==t.chatID}),o=e.state.chats[s].messages.length,i={created:c["firestore"].FieldValue.serverTimestamp(),text:t.messageText,read:!1,sender:e.state.userInfo.uid},l=[];if(0==o){let n,s=e.state.userInfo.uid,o=e.getters.getOtherUserInChatByChatID(t.chatID);n=s<o?s+o:o+s,l.push(a.collection("UsersPublicInfo").doc(s).update({chats:c["firestore"].FieldValue.arrayUnion(n)}).then(()=>{e.commit("addChatIDToChatIDs",n),console.log("chatID successfuly written p1")}).catch((function(e){console.error("Error writing chatID",e),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))),l.push(a.collection("UsersPublicInfo").doc(o).update({chats:c["firestore"].FieldValue.arrayUnion(n)}).then(()=>{console.log("chatID successfuly written p2")}).catch((function(e){console.error("Error writing chatID",e),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)})))}Promise.all(l).then((function(){a.collection("Chats").doc(t.chatID).collection("Messages").doc().set(i).then(()=>{console.log("Message successfully added"),n()}).catch((function(e){console.error("Error adding message",e),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))})).catch((function(e){console.error("Error writing chatID on users chatIDs: "+e),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},listUsersSearchedPageFirebase:function(e,t){let a=c["firestore"]();return new Promise((function(n,r){t.first&&(e.commit("setSearchInfoUserIDs",[]),e.commit("setSearchInfoLastVisible",null));let s=a.collection("UsersPublicInfo");e.state.searchInfo.filtering.genderM&&!e.state.searchInfo.filtering.genderW?s=s.where(L["a"].DATABASE_GENDER_FIELD,"==","M"):e.state.searchInfo.filtering.genderW&&!e.state.searchInfo.filtering.genderM?s=s.where(L["a"].DATABASE_GENDER_FIELD,"==","W"):e.state.searchInfo.filtering.genderW||e.state.searchInfo.filtering.genderM||(e.commit("setSearchInfoUserIDs",[]),e.commit("setSearchInfoLastVisible",null));let o=new Date;o.setFullYear(o.getFullYear()-e.state.searchInfo.filtering.ageRange[0]),o.setHours(0,0,0),s=s.where(L["a"].DATABASE_BIRTHDATE_FIELD,"<",o),o=new Date,o.setFullYear(o.getFullYear()-e.state.searchInfo.filtering.ageRange[1]-1),o.setHours(0,0,0),s=s.where(L["a"].DATABASE_BIRTHDATE_FIELD,">",o),e.state.searchInfo.filtering.filterByLanguageToLearn&&"all"!=e.state.searchInfo.filtering.languageToLearn.id?s=s.where(L["a"].DATABASE_LANGUAGES_TO_LEARN_FIELD,"array-contains",e.state.searchInfo.filtering.languageToLearn.id):e.state.searchInfo.filtering.filterByLanguageToLearn||"all"==e.state.searchInfo.filtering.knownLanguage.id||(s=s.where(L["a"].DATABASE_KNOWN_LANGUAGES_FIELD,"array-contains",e.state.searchInfo.filtering.knownLanguage.id));let i=s.orderBy(t.orderBy).startAfter(e.state.searchInfo.lastVisible).limit(L["a"].SEARCHED_USERS_PAGE_SIZE);i.get().then((function(a){let o=a.docs.findIndex((function(t){return t.id==e.state.userInfo.uid})),i=a.docs;if(-1!=o){i.splice(o,1);let c=a.docs[a.docs.length-1];e.commit("setSearchInfoLastVisible",c);let l=s.orderBy(t.orderBy).startAfter(e.state.searchInfo.lastVisible).limit(1);l.get().then((function(t){i.push(t.docs[0]),e.dispatch("setSearchedUsersState",{newDocs:i,originalDocs:t.docs}).then((function(){n()}))})).catch((function(e){console.warn("Error fetching page: ",e),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}else e.dispatch("setSearchedUsersState",{newDocs:i,originalDocs:a.docs}).then((function(){n()}))})).catch((function(e){console.warn("Error fetching page: ",e),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},setSearchedUsersState(e,t){return new Promise((function(a){let n=t.newDocs.map(e=>{const t=e.id,a=e.data();return Qe({uid:t},a)});if(n.forEach((function(t){e.commit("addUser",t),e.commit("addSearchInfoUserID",t.uid)})),t.originalDocs.length>0){let a=t.originalDocs[t.originalDocs.length-1];e.commit("setSearchInfoLastVisible",a)}else e.commit("setSearchInfoUserIDs",[]),e.commit("setSearchInfoLastVisible",null);a()}))},isNextUsersSearchedPageEmptyFirebase(e,t){let a=c["firestore"]();return new Promise((function(n,r){let s=a.collection("UsersPublicInfo");e.state.searchInfo.filtering.genderM&&!e.state.searchInfo.filtering.genderW?s=s.where(L["a"].DATABASE_GENDER_FIELD,"==","M"):e.state.searchInfo.filtering.genderW&&!e.state.searchInfo.filtering.genderM?s=s.where(L["a"].DATABASE_GENDER_FIELD,"==","W"):e.state.searchInfo.filtering.genderW||e.state.searchInfo.filtering.genderM||(e.commit("setSearchInfoUserIDs",[]),e.commit("setSearchInfoLastVisible",null),n(!0));let o=new Date;o.setFullYear(o.getFullYear()-e.state.searchInfo.filtering.ageRange[0]),o.setHours(0,0,0),s=s.where(L["a"].DATABASE_BIRTHDATE_FIELD,"<",o),o=new Date,o.setFullYear(o.getFullYear()-e.state.searchInfo.filtering.ageRange[1]-1),o.setHours(0,0,0),s=s.where(L["a"].DATABASE_BIRTHDATE_FIELD,">",o),e.state.searchInfo.filtering.filterByLanguageToLearn&&"all"!=e.state.searchInfo.filtering.languageToLearn.id?s=s.where(L["a"].DATABASE_LANGUAGES_TO_LEARN_FIELD,"array-contains",e.state.searchInfo.filtering.languageToLearn.id):e.state.searchInfo.filtering.filterByLanguageToLearn||"all"==e.state.searchInfo.filtering.knownLanguage.id||(s=s.where(L["a"].DATABASE_KNOWN_LANGUAGES_FIELD,"array-contains",e.state.searchInfo.filtering.knownLanguage.id),console.log(e.state.searchInfo.filtering.knownLanguage.id)),s.orderBy(t.orderBy).startAfter(e.state.searchInfo.lastVisible).limit(L["a"].SEARCHED_USERS_PAGE_SIZE).get().then((function(t){let a=t.docs.findIndex((function(t){return t.id==e.state.userInfo.uid})),r=t.docs;-1!=a&&r.splice(a,1),n(0==r.length)})).catch(e=>{console.log(e),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)})}))},searchUsersByUsernameFirebase:function(e,t){let a=c["firestore"]();return new Promise((function(n,r){e.commit("resetSearchInfo"),e.commit("setSearchInfoFilteringSearchByUsername",!0);let s=a.collection("UsersPublicInfo").orderBy(t.orderBy).startAt(t.searchByUsernameField).endAt(t.searchByUsernameField+"");s.get().then((function(t){let a=t.docs.findIndex((function(t){return t.id==e.state.userInfo.uid}));1!=a&&t.docs.splice(a,1);let r=t.docs.map(e=>{const t=e.id,a=e.data();return Qe({uid:t},a)}),s=[];if(r.forEach((function(t){e.commit("addUser",t),s.push(t.uid)})),e.commit("setSearchInfoUserIDs",s),t.docs.length>0){let a=t.docs[t.docs.length-1];e.commit("setSearchInfoLastVisible",a)}n()})).catch((function(e){console.warn("Error fetching users: ",e),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},prepareChatWithUser:function(e,t){return new Promise((function(a,n){e.dispatch("createChatFirebase",{chatID:t.chatID,userID:t.userID}).then(()=>{e.commit("setChatsInfoActiveChat",t.chatID),a()}).catch(e=>{console.error(e),n(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)})}))},createChatFirebase:function(e,t){let a=c["firestore"]();return new Promise((function(n,r){let s={messages:[],users:[e.state.userInfo.uid,t.userID]};a.collection("Chats").doc(t.chatID).set(s).then(()=>{console.log("Chat info successfully written in Chats"),e.dispatch("createChatListenerFirebase",t.chatID).then(()=>{n()}).catch((function(e){r(e)}))}).catch((function(e){console.error("Error writing profile info in users: ",e),r(e)}))}))},createChatListenerFirebase:function(e,t){let a=c["firestore"]();return new Promise((function(n,r){try{let s=a.collection("Chats").doc(t).onSnapshot((function(o){if(o&&o.data()){e.commit("addChatToChats",Qe({id:o.id},o.data(),{databaseListener:s,messages:[]}));try{a.collection("Chats").doc(t).collection("Messages").onSnapshot((function(t){if(t&&t.docs){let a=t.docs.map(e=>{const t=e.id,a=e.data();return Qe({id:t},a)});a.forEach(t=>{let a={chatID:o.id,message:t};e.commit("addNewMessage",a),e.state.chatsInfo.activeChat==a.chatID&&e.dispatch("setChatWithUserMessagesToRead",e.state.chatsInfo.activeChat).catch((function(e){console.warn("Error updating messages to read:",e),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))})}}))}catch(i){console.error(i),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}let n=o.data().users.find((function(e){return e!=c["auth"]().currentUser.uid}));e.dispatch("getUserPublicInfoDocByUIDFirebase",n).then((function(a){if(a.exists){let r={id:n,chatID:t,username:a.data().username,birthDate:a.data().birthDate,gender:a.data().gender,description:a.data().description,knownLanguages:a.data().knownLanguages,languagesToLearn:a.data().languagesToLearn,profileImage:a.data().profileImage};e.commit("addUserToChatUsers",r)}})).catch((function(e){console.warn("Error getting document:",e),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}n()}))}catch(s){console.error(s),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}}))},rateUser:function(e,t){return new Promise((function(a,n){e.dispatch("getRatingInUsersPublicInfo",t.to).then(r=>{e.commit("setUserRatingInfo",r),e.dispatch("setRatingInRatingsFirebase",t).then(()=>{e.commit("setNewUserRatingInfo",t),e.commit("setUserRating",t),a()}).catch((function(e){console.error(e),n(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}).catch((function(e){console.error(e),n(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},setRatingInRatingsFirebase:function(e,t){return new Promise((function(e,a){let n=c["firestore"](),r={};r[t.to]=t.rating,t.rating?n.collection("Ratings").doc(t.from).set(r,{merge:!0}).then(()=>{console.log("Rating successfully written in Ratings"),e()}).catch((function(e){console.error("Error writing rating info in Ratings: ",e),a(e)})):n.collection("Ratings").doc(t.from).update({[t.to]:c["firestore"].FieldValue.delete()}).then(()=>{console.log("Rating successfully deleted of Ratings"),e()}).catch((function(e){console.error("Error deleting rating info of Ratings: ",e),a(e)}))}))},getRatingsInRatingsFirebase:function(e){let t=c["firestore"]();return new Promise((function(a,n){t.collection("Ratings").doc(e.state.userInfo.uid).get().then((function(t){t.exists&&e.commit("setUserRatings",t.data()),a()})).catch((function(e){console.warn("Error getting document:",e),n(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},getRatingInUsersPublicInfo:function(e,t){let a=c["firestore"]();return new Promise((function(e,n){a.collection("UsersPublicInfo").doc(t).get().then((function(a){console.log(a.data()),console.log(t);let n={uid:t,avgRating:a.data().avgRating,numRatings:a.data().numRatings};e(n)})).catch((function(e){console.warn("Error getting document:",e),n(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},listUsersRankingPageFirebase:function(e,t){let a=c["firestore"]();return new Promise((function(n,r){let s;t&&e.commit("resetRankingInfo"),s=null==e.state.rankingInfo.lastVisible?a.collection("UsersPublicInfo").orderBy(L["a"].DATABASE_AVG_RATING_FIELD,"desc").orderBy(L["a"].DATABASE_NUM_RATINGS_FIELD,"desc"):a.collection("UsersPublicInfo").orderBy(L["a"].DATABASE_AVG_RATING_FIELD,"desc").orderBy(L["a"].DATABASE_NUM_RATINGS_FIELD,"desc").startAfter(e.state.rankingInfo.lastVisible),s.limit(L["a"].RANKING_PAGE_SIZE).get().then((function(t){console.log(t);let a=t.docs.map(e=>{const t=e.id,a=e.data();return Qe({uid:t},a)});if(a.forEach((function(t){e.commit("addUser",t),e.commit("addRankingInfoUserID",t.uid)})),t.docs.length>0){let a=t.docs[t.docs.length-1];e.commit("setRankingInfoLastVisible",a)}n()})).catch((function(e){console.warn("Error fetching page: ",e),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},isNextRankingUsersPageEmptyFirebase(e){let t=c["firestore"]();return new Promise((function(a,n){let r=t.collection("UsersPublicInfo").orderBy(L["a"].DATABASE_AVG_RATING_FIELD,"desc").orderBy(L["a"].DATABASE_NUM_RATINGS_FIELD,"desc").startAfter(e.state.rankingInfo.lastVisible).limit(L["a"].RANKING_PAGE_SIZE);r.get().then((function(e){console.log(e.docs.length),a(0==e.docs.length)})).catch(e=>{console.log(e),n(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)})}))},getUserLocation(e){return new Promise((function(t,a){e.dispatch("geolocateUser").then((function(n){e.commit("setUserInfoLocation",n),e.dispatch("updateUserLocationFirebase",n).then(()=>{t()}).catch(e=>{console.error(e),a(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)})})).catch(()=>{e.dispatch("getUserLocationFirebase",e.state.userInfo.uid).then(t=>{e.commit("setUserInfoLocation",t),a(L["a"].TEXT_PROBLEM_GETTING_CURRENT_LOCATION)}).catch(()=>{e.commit("setUserInfoLocation",null),a(L["a"].TEXT_PROBLEM_GETTING_CURRENT_LOCATION)})})}))},getUserLocationFirebase(e,t){let a=new ze["GeoFirestore"](c["firestore"]());return new Promise((function(e,n){a.collection("UsersLocation").doc(t).get().then(t=>{let a=t.data();console.log(JSON.stringify(a)),a?e({lat:a.coordinates._lat,lng:a.coordinates._long}):n()}).catch(e=>{console.log(e),n()})}))},updateUserLocationFirebase(e,t){let a=new ze["GeoFirestore"](c["firestore"]());return new Promise((function(n,r){a.collection("UsersLocation").doc(e.state.userInfo.uid).set({coordinates:new c["firestore"].GeoPoint(t.lat,t.lng)}).then((function(){n()})).catch(e=>{console.log(e),r()})}))},geolocateUser(){return new Promise((function(e,t){try{navigator.geolocation.getCurrentPosition(t=>{e({lat:t.coords.latitude,lng:t.coords.longitude})},(function(e){console.log(e),t()}))}catch(a){console.log(a),t()}}))},getNearbyUsersFirebase(e,t){let a=new ze["GeoFirestore"](c["firestore"]()),n=a.collection("UsersLocation").near({center:new c["firestore"].GeoPoint(e.state.userInfo.location.lat,e.state.userInfo.location.lng),radius:t});return new Promise((function(e,t){n.get().then(t=>{e(t.docs)}).catch(e=>{console.log(e),t(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)})}))},listNearbyUsersSearchedPageFirebase(e,t){let a=c["firestore"](),n=0,r=0,s=[];return new Promise((function(o,i){if(t.first)e.commit("setSearchInfoUserIDs",[]),e.commit("setSearchInfoLastVisible",null),e.dispatch("getNearbyUsersFirebase",e.state.searchInfo.filtering.maxDistanceRanges[e.state.searchInfo.filtering.maxDistance]).then(t=>{let c=[];t.forEach((function(t){t.id!=e.state.userInfo.uid&&c.push(t.id)})),e.commit("setSearchInfoUserIDs",c);while(n<L["a"].SEARCHED_USERS_PAGE_SIZE&&r<e.state.searchInfo.filtering.nearbyUsersIDs.length)console.log(e.state.searchInfo.filtering.nearbyUsersIDs[r]),s.push(a.collection("UsersPublicInfo").doc(e.state.searchInfo.filtering.nearbyUsersIDs[r]).get().then((function(t){console.log(t),e.commit("addUserToSearchInfoUserIDs",t.id)})).catch(t=>{console.log(t),e.commit("setSearchInfoLastVisible",r-1),i(L["a"].TEXT_PROBLEM_GETTING_NEARBY_USERS)})),n++,r++;Promise.all(s).then((function(){e.commit("setSearchInfoLastVisible",r-1),o()})).catch((function(t){e.commit("setSearchInfoLastVisible",r-1),i(t)}))}).catch(e=>{console.log(e),i(L["a"].TEXT_PROBLEM_GETTING_NEARBY_USERS)});else{r=e.state.searchInfo.lastVisible+1;while(n<L["a"].SEARCHED_USERS_PAGE_SIZE&&r<e.state.searchInfo.filtering.nearbyUsersIDs.length)console.log(e.state.searchInfo.filtering.nearbyUsersIDs[r]),s.push(a.collection("UsersPublicInfo").doc(e.state.searchInfo.filtering.nearbyUsersIDs[r]).get().then((function(t){console.log(t),e.commit("addUserToSearchInfoUserIDs",t.id)})).catch(t=>{console.log(t),e.commit("setSearchInfoLastVisible",r-1),i(L["a"].TEXT_PROBLEM_GETTING_NEARBY_USERS)})),n++,r++;Promise.all(s).then((function(){e.commit("setSearchInfoLastVisible",r-1),o()})).catch((function(t){e.commit("setSearchInfoLastVisible",r-1),i(t)}))}}))},isNextNearbyUsersSearchedPageEmptyFirebase(e){let t=c["firestore"]();return new Promise((function(a,n){console.log("--"+e.state.searchInfo.lastVisible),console.log("--"+e.state.searchInfo.filtering.nearbyUsersIDs.length),e.state.searchInfo.lastVisible>=e.state.searchInfo.filtering.nearbyUsersIDs.length-1&&a(!0);let r=e.state.searchInfo.lastVisible+1;while(r<e.state.searchInfo.filtering.nearbyUsersIDs.length-1)t.collection("UsersPublicInfo").doc(e.state.searchInfo.filtering.nearbyUsersIDs[r]).get().then((function(t){e.commit("addUserToSearchInfoUserIDs",Qe({uid:t.id},t.data())),console.log("!!"+e.state.searchInfo.lastVisible),a(!1)})).catch(t=>{console.log(t),console.log("pedazo error"),e.commit("setSearchInfoLastVisible",r-1),n(!0)}),r++}))},listEventsEventsPageFirebase:function(e,t){let a=c["firestore"]();return new Promise((function(n,r){let s;t&&e.commit("resetEventsInfo");let o=new Date;s=null==e.state.eventsInfo.lastVisible?a.collection(L["a"].DATABASE_COLLECTION_EVENTS).where(L["a"].DATABASE_DATE_FIELD,">",o).orderBy(L["a"].DATABASE_DATE_FIELD):a.collection(L["a"].DATABASE_COLLECTION_EVENTS).where(L["a"].DATABASE_DATE_FIELD,">",o).orderBy(L["a"].DATABASE_DATE_FIELD).startAfter(e.state.eventsInfo.lastVisible),s.limit(L["a"].EVENTS_PAGE_SIZE).get().then((function(t){let a=t.docs.map(e=>{const t=e.id,a=e.data();return Qe({id:t},a)});if(a.forEach((function(t){console.log(t);let a={lat:t.coordinates.latitude,lng:t.coordinates.longitude};if(console.log(a),console.log(e.state.userInfo.location),null!=e.state.userInfo.location){let n=e.getters.getHaversineDistance({p1:a,p2:e.state.userInfo.location})/1e3;t=Qe({},t,{distance:parseFloat(n).toFixed(1)})}else t=Qe({},t,{distance:null});e.commit("addEventsInfoEvent",t)})),t.docs.length>0){let a=t.docs[t.docs.length-1];e.commit("setEventsInfoLastVisible",a)}n()})).catch((function(e){console.warn("Error fetching page: ",e),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))},isNextEventsEventsPageEmptyFirebase(e){let t=c["firestore"]();return new Promise((function(a,n){let r=new Date,s=t.collection(L["a"].DATABASE_COLLECTION_EVENTS).where(L["a"].DATABASE_DATE_FIELD,">",r).orderBy(L["a"].DATABASE_DATE_FIELD).startAfter(e.state.eventsInfo.lastVisible).limit(L["a"].EVENTS_PAGE_SIZE);s.get().then((function(e){a(0==e.docs.length)})).catch(e=>{console.log(e),n(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)})}))},setSearchInfoFiltering(e,t){return e.commit("setEventsInfoLastVisible",t)},getUserByUID(e,t){return new Promise((function(a,n){let r=e.getters.getUserByUID(t);console.log(r),null!=r?a(r):e.dispatch("getUserPublicInfoDocByUIDFirebase",t).then((function(s){s.data()?(r=Qe({uid:t},s.data()),e.commit("addUser",r),a(r)):n()})).catch((function(e){console.log(e),n()}))}))},getEventFirebase:function(e,t){let a=c["firestore"]();return new Promise((function(n,r){a.collection(L["a"].DATABASE_COLLECTION_EVENTS).doc(t).get().then((function(t){let a={lat:t.data().coordinates.latitude,lng:t.data().coordinates.longitude},r=e.getters.getHaversineDistance({p1:a,p2:e.state.userInfo.location})/1e3,s=Qe({id:t.id},t.data(),{distance:parseFloat(r).toFixed(1)});n(s)})).catch((function(e){console.warn("Error fetching event: ",e),r(L["a"].ERROR_GENERIC_CONNECTION_PROBLEM)}))}))}}}),tt=a("9483");Object(tt["a"])("/firebase-messaging-sw.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var at=a("f309");n["a"].use(at["a"]);var nt=new at["a"]({icons:{iconfont:"mdi"},theme:{light:{primary:"#1976D2",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}),rt=a("755e");n["a"].use(rt,{load:{key:"AIzaSyBYhPYAZkG6ML2kRArdK8xITPrZWzF0JSw",libraries:"places"}}),n["a"].config.productionTip=!1;let st="",ot={apiKey:"AIzaSyABGil2afckXxQ127FS8fW6y5phy1wzd6g",authDomain:"tfg-vue-m3m.firebaseapp.com",databaseURL:"https://tfg-vue-m3m.firebaseio.com",projectId:"tfg-vue-m3m",storageBucket:"tfg-vue-m3m.appspot.com",messagingSenderId:"144506012173",appId:"1:144506012173:web:8a58aa4b50d8b336184b44"};l.a.initializeApp(ot);let it=l.a.firestore();it.settings({timestampsInSnapshots:!0}),it.enablePersistence({experimentalTabSynchronization:!0});const ct=l.a.storage(),lt=l.a.messaging();t["default"]={db:it,storage:ct,messaging:lt};l.a.auth().onAuthStateChanged(()=>{st||(st=new n["a"]({router:Ke,store:et,vuetify:nt,render:e=>e(p)}).$mount("#app"))})},"9a99":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("h4",[e._v(e._s(e.knownLanguagesTitle))]),a("v-combobox",{attrs:{items:e.items_known_languages,chips:"",type:"button",clearable:"",label:e.knownLanguagesLabel,multiple:"",solo:""},scopedSlots:e._u([{key:"item",fn:function(t){t.index;var n=t.item;return[a("v-chip",{attrs:{color:"white",block:""}},[a("v-avatar",{attrs:{left:""}},[a("v-img",{attrs:{src:e.createPathToFlagImage(n.id)}})],1),a("strong",[e._v(e._s(n.text))]),e._v(" \n            ")],1)]}},{key:"selection",fn:function(t){var n=t.attrs,r=t.item,s=t.select,o=t.selected;return[a("v-chip",e._b({attrs:{"input-value":o,close:"",color:"primary"},on:{click:s,"click:close":function(t){return e.remove_known_language(r)}}},"v-chip",n,!1),[a("v-avatar",{attrs:{left:""}},[a("v-img",{attrs:{src:e.createPathToFlagImage(r.id)}})],1),a("strong",[e._v(e._s(r.text))]),e._v(" \n            ")],1)]}}]),model:{value:e.chips_known_languages,callback:function(t){e.chips_known_languages=t},expression:"chips_known_languages"}}),a("h4",[e._v(e._s(e.languagesToLearnTitle))]),a("v-combobox",{attrs:{items:e.items_languages_to_learn,chips:"",clearable:"",type:"button",label:e.languagesToLearnLabel,multiple:"",solo:""},scopedSlots:e._u([{key:"item",fn:function(t){t.index;var n=t.item;return[a("v-chip",{attrs:{color:"white",block:""}},[a("v-avatar",{attrs:{left:""}},[a("v-img",{attrs:{src:e.createPathToFlagImage(n.id)}})],1),a("strong",[e._v(e._s(n.text))]),e._v(" \n            ")],1)]}},{key:"selection",fn:function(t){var n=t.attrs,r=t.item,s=t.select,o=t.selected;return[a("v-chip",e._b({attrs:{"input-value":o,close:"",color:"primary"},on:{click:s,"click:close":function(t){return e.remove_language_to_learn(r)}}},"v-chip",n,!1),[a("v-avatar",{attrs:{left:""}},[a("v-img",{attrs:{src:e.createPathToFlagImage(r.id)}})],1),a("strong",[e._v(e._s(r.text))]),e._v(" \n            ")],1)]}}]),model:{value:e.chips_languages_to_learn,callback:function(t){e.chips_languages_to_learn=t},expression:"chips_languages_to_learn"}}),a("v-btn",{attrs:{block:"",color:"primary",disabled:e.buttonIsDisabled},on:{click:e.setLanguages}},[e._v("Continuar")]),a("v-snackbar",{attrs:{timeout:4e3},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n        "+e._s(e.snackbarText)+"\n        "),a("v-btn",{attrs:{color:"blue",text:""},on:{click:function(t){e.snackbar=!1}}},[e._v("\n            "+e._s(e.closeText)+"\n        ")])],1)],1)},r=[],s=(a("ac6a"),a("a481"),a("ade3")),o=a("2f62"),i=a("4c51");function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(a,!0).forEach((function(t){Object(s["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var u={name:"YourLanguagesSelector",data(){return{buttonIsDisabled:!0,snackbar:!1,snackbarText:"",chips_known_languages:[],chips_languages_to_learn:[],items_known_languages:this.$store.getters.getAllAvailableLanguagesAsArray.filter((function(e){return"all"!=e.id})),items_languages_to_learn:this.$store.getters.getAllAvailableLanguagesAsArray.filter((function(e){return"all"!=e.id})),languagesToLearnLabel:i["a"].TEXT_LANGUAGES_YOU_WANT_TO_IMPROVE,languagesToLearnTitle:i["a"].TEXT_LANGUAGES_YOU_WANT_TO_PRACTICE,knownLanguagesLabel:i["a"].TEXT_LANGUAGES_YOU_SPEAK_FLUENTLY,knownLanguagesTitle:i["a"].TEXT_MOTHER_LANGUAGES,closeText:i["a"].TEXT_CLOSE}},methods:l({},Object(o["b"])(["setUserLanguagesFirebase"]),{remove_known_language(e){this.chips_known_languages.splice(this.chips_known_languages.indexOf(e),1),this.chips_known_languages=[...this.chips_known_languages]},remove_language_to_learn(e){this.chips_languages_to_learn.splice(this.chips_languages_to_learn.indexOf(e),1),this.chips_languages_to_learn=[...this.chips_languages_to_learn]},validLanguages(){this.chips_known_languages.length>0&&this.chips_languages_to_learn.length>0?this.buttonIsDisabled=!1:this.buttonIsDisabled=!0},filter_items_known_languages:function(){let e=this;this.items_known_languages=this.$store.getters.getAllAvailableLanguagesAsArray.filter((function(e){return"all"!=e.id})).filter((function(t){return!e.chips_languages_to_learn.includes(t)}))},filter_items_languages_to_learn:function(){let e=this;this.items_languages_to_learn=this.$store.getters.getAllAvailableLanguagesAsArray.filter((function(e){return"all"!=e.id})).filter((function(t){return!e.chips_known_languages.includes(t)}))},setLanguages(){let e=this.setUserLanguagesFirebase({knownLanguages:this.chips_known_languages,languagesToLearn:this.chips_languages_to_learn});e.then(()=>{this.$router.replace("set-your-profile-image")}).catch(e=>{this.snackbarText=e,this.snackbar=!0})},createPathToFlagImage:function(e){return this.$store.getters.getPathToFlagImageByLanguageID(e)}}),watch:{chips_known_languages:function(){this.validLanguages(),this.filter_items_languages_to_learn()},chips_languages_to_learn:function(){this.validLanguages(),this.filter_items_known_languages()}}},g=u,f=a("2877"),d=a("6544"),h=a.n(d),m=a("8212"),I=a("8336"),E=a("cc20"),_=a("2b5d"),b=a("a523"),p=a("adda"),R=a("2db4"),v=Object(f["a"])(g,n,r,!1,null,"669f468e",null);t["a"]=v.exports;h()(v,{VAvatar:m["a"],VBtn:I["a"],VChip:E["a"],VCombobox:_["a"],VContainer:b["a"],VImg:p["a"],VSnackbar:R["a"]})},"9fb5":function(e,t,a){"use strict";var n=a("f4e6"),r=a.n(n);r.a},bd19:function(e,t,a){},cf05:function(e,t,a){e.exports=a.p+"img/logo.82b9c7a5.png"},f015:function(e,t,a){"use strict";var n=a("bd19"),r=a.n(n);r.a},f4e6:function(e,t,a){}});
//# sourceMappingURL=app.420c80c0.js.map