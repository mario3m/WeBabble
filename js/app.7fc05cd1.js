(function(e){function t(t){for(var a,r,i=t[0],c=t[1],u=t[2],l=0,g=[];l<i.length;l++)r=i[l],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&g.push(o[r][0]),o[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);f&&f(t);while(g.length)g.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,r=1;r<n.length;r++){var i=n[r];0!==o[i]&&(a=!1)}a&&(s.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},r={app:0},o={app:0},s=[];function i(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-25c771b8":"83503bd3","chunk-20d8013b":"8038ff87","chunk-014fb837":"dfd4ecc2","chunk-7ef6b764":"22dcd313","chunk-3b63178d":"83f8d6d1","chunk-28e4efe2":"b40884ad","chunk-4d7591bf":"beefb3cf","chunk-6cc23625":"4846e87d","chunk-1bfdcb26":"490b1e43","chunk-39e2aeca":"698bd9bc","chunk-4e37f1b9":"a6829910","chunk-0062ab72":"18e899fb","chunk-bba67cba":"cd1e7457","chunk-a3f747da":"f18ac858","chunk-11350bc4":"309814ec","chunk-14b9bb78":"f4dccb68","chunk-382272b3":"174f785c","chunk-d6467d40":"09e3cf64","chunk-2d0b9607":"7aaa6831","chunk-2d0ceaf1":"6a64fef7","chunk-2d213713":"6fef66ec","chunk-1e794cfc":"64d238db","chunk-97fe767c":"4af9577f","chunk-a47c45dc":"0afb7e37","chunk-59fedc16":"160c21a1","chunk-9bf12744":"79aab246","chunk-3417d63c":"21ad4692","chunk-17adf310":"93f42cd1","chunk-b648f4e6":"ebde550c","chunk-7b29b94c":"ae590114","chunk-1ba8e311":"653abffd","chunk-1bcecc20":"40cbd4b2","chunk-0256ba59":"5ce51659","chunk-c6d03f52":"bf90d839"}[e]+".js"}function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-25c771b8":1,"chunk-20d8013b":1,"chunk-014fb837":1,"chunk-7ef6b764":1,"chunk-3b63178d":1,"chunk-28e4efe2":1,"chunk-4d7591bf":1,"chunk-6cc23625":1,"chunk-1bfdcb26":1,"chunk-39e2aeca":1,"chunk-4e37f1b9":1,"chunk-0062ab72":1,"chunk-bba67cba":1,"chunk-a3f747da":1,"chunk-11350bc4":1,"chunk-14b9bb78":1,"chunk-d6467d40":1,"chunk-1e794cfc":1,"chunk-97fe767c":1,"chunk-a47c45dc":1,"chunk-9bf12744":1,"chunk-3417d63c":1,"chunk-17adf310":1,"chunk-b648f4e6":1,"chunk-7b29b94c":1,"chunk-1ba8e311":1,"chunk-1bcecc20":1,"chunk-0256ba59":1,"chunk-c6d03f52":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-25c771b8":"0fea8ff0","chunk-20d8013b":"3d60cca4","chunk-014fb837":"0993e8a4","chunk-7ef6b764":"2a012898","chunk-3b63178d":"39446fbf","chunk-28e4efe2":"a7aa8c19","chunk-4d7591bf":"10778335","chunk-6cc23625":"9d9ff020","chunk-1bfdcb26":"10778335","chunk-39e2aeca":"10778335","chunk-4e37f1b9":"3e65ff93","chunk-0062ab72":"04a99269","chunk-bba67cba":"257b4cc3","chunk-a3f747da":"714ab32f","chunk-11350bc4":"c36f255f","chunk-14b9bb78":"12362d7a","chunk-382272b3":"31d6cfe0","chunk-d6467d40":"0a4f775e","chunk-2d0b9607":"31d6cfe0","chunk-2d0ceaf1":"31d6cfe0","chunk-2d213713":"31d6cfe0","chunk-1e794cfc":"765c0c99","chunk-97fe767c":"5a38e087","chunk-a47c45dc":"b872b17e","chunk-59fedc16":"31d6cfe0","chunk-9bf12744":"7f907a80","chunk-3417d63c":"f613719f","chunk-17adf310":"8d93d6f7","chunk-b648f4e6":"6bade0ac","chunk-7b29b94c":"f613719f","chunk-1ba8e311":"f613719f","chunk-1bcecc20":"f613719f","chunk-0256ba59":"d595a527","chunk-c6d03f52":"10778335"}[e]+".css",o=c.p+a,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var u=s[i],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===a||l===o))return t()}var g=document.getElementsByTagName("style");for(i=0;i<g.length;i++){u=g[i],l=u.getAttribute("data-href");if(l===a||l===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var a=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=a,delete r[e],f.parentNode.removeChild(f),n(s)},f.href=o;var d=document.getElementsByTagName("head")[0];d.appendChild(f)})).then((function(){r[e]=0})));var a=o[e];if(0!==a)if(a)t.push(a[2]);else{var s=new Promise((function(t,n){a=o[e]=[t,n]}));t.push(a[2]=s);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=i(e);var g=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(f);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;g.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",g.name="ChunkLoadError",g.type=a,g.request=r,n[1](g)}o[e]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var g=0;g<u.length;g++)t(u[g]);var f=l;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"31f2":function(e,t,n){},"4c51":function(e,t,n){"use strict";t["a"]={RULE_MIN_VALUE_CHARACTERS_USERNAME:5,RULE_MAX_VALUE_CHARACTERS_USERNAME:14,RULE_MIN_VALUE_CHARACTERS_USER_DESCRIPTION:20,RULE_MIN_VALUE_AGE:16,RANKING_PAGE_SIZE:10,MAX_RANKING_PAGE_SIZE:100,SEARCHED_USERS_PAGE_SIZE:5,EVENTS_PAGE_SIZE:1,MIN_USER_AGE:16,MAX_USER_AGE:100,IMG_EMOJI_SAD_FACE:"img/emojis/sad_face.png"}},"559b":function(e,t,n){"use strict";n("55dd");t["a"]={arraysContainSameElements:function(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(var n=e.concat().sort(),a=t.concat().sort(),r=0;r<n.length;r++)if(n[r]!==a[r])return!1;return!0},generateChatID:function(e,t){var n;return n=e<t?e+t:t+e,n},emptyCallback:function(){}}},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d"),n("db4d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{staticStyle:{"max-width":"100%",height:"100%"}},[e.dataIsReady?n("router-view",{staticStyle:{"max-width":"100%",height:"100%"}}):e._e()],1)},o=[],s=(n("8e6e"),n("ac6a"),n("456d"),n("a481"),n("ade3")),i=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l={name:"App",components:{},data:function(){return{dataIsReady:!1}},methods:u(u(u({},Object(i["b"])("user",["getRegistrationState","initState"])),Object(i["b"])(["getLoggedUser"])),{},{initialize:function(){var e=this;e.getLoggedUser().then((function(t){if(null!=t&&void 0!=t){var n=e.initState();n.then((function(){e.dataIsReady=!0})).catch((function(t){e.snackbarText=t,e.snackbar=!0}))}else e.$store.dispatch("resetAppState").then((function(){e.$router.replace("home")})).catch((function(t){e.snackbarText=t,e.snackbar=!0})),e.dataIsReady=!0,console.log("No user logged")}))}}),created:function(){this.initialize()}},g=l,f=n("2877"),d=n("6544"),h=n.n(d),m=n("7496"),E=Object(f["a"])(g,r,o,!1,null,null,null),T=E.exports;h()(E,{VApp:m["a"]});n("f559"),n("7f7f");var _=n("8c4f"),p=n("8aa5"),A=n.n(p),R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"img-back",staticStyle:{position:"relative",height:"100%!important"}},[a("v-container",{staticClass:"home justify-center text-center",staticStyle:{height:"100%",position:"relative",width:"100%"},attrs:{align:"center"}},[a("p",{staticClass:"white--text"},[e._v("webabble.es")]),a("div",{staticStyle:{width:"100%","margin-top":"12vh"},attrs:{align:"center"}},[a("img",{staticStyle:{width:"44vw","max-width":"200px"},attrs:{src:n("8077")}}),a("p",{staticClass:"white--text slogan"},[a("i",[e._v(e._s(e.sloganText))])])]),a("div",{staticClass:"bottom-centered-buttons",staticStyle:{"margin-bottom":"20px","max-width":"600px"},attrs:{align:"center"}},[a("div",{staticStyle:{width:"94%"},attrs:{align:"center"}},[a("v-btn",{staticClass:"white primary--text",staticStyle:{width:"100%"},attrs:{rounded:""},on:{click:function(t){return e.$router.push({name:"signUp"})}}},[e._v(" "+e._s(e.createAnAccountText)+" ")])],1),a("br"),a("div",{staticStyle:{width:"94%"},attrs:{align:"center"}},[a("v-btn",{staticClass:"white primary--text",staticStyle:{width:"100%"},attrs:{rounded:""},on:{click:function(t){return e.$router.push({name:"login"})}}},[e._v(" "+e._s(e.toLogInText)+" ")])],1)])])],1)},b=[],I={name:"Home",computed:{createAnAccountText:function(){return this.$i18n.t("messages.TEXT_CREATE_AN_ACCOUNT")},toLogInText:function(){return this.$i18n.t("messages.TEXT_TO_LOG_IN")},sloganText:function(){return this.$i18n.t("messages.TEXT_WE_BABBLE_SLOGAN")}}},v=I,O=(n("8f8d"),n("8336")),S=n("a523"),P=Object(f["a"])(v,R,b,!1,null,"45b87d34",null),w=P.exports;h()(P,{VBtn:O["a"],VContainer:S["a"]});n("5df3"),n("96cf");var L=n("1da1"),U=(n("20d6"),n("4c51")),N=n("5cdc"),y=n("a925"),D={messages:{es:{messages:{ERROR_GENERIC_PROBLEM:"Parece que ha habido un problema con tu petición. Por favor, vuelve a intentarlo más tarde.",ERROR_GENERIC_CONNECTION_PROBLEM:"Parece que ha habido un problema de conexión. Por favor, vuelve a intentarlo más tarde.",ERROR_GENERIC_DATABASE_PROBLEM:"Parece que ha habido un problema con la base de datos. Por favor, vuelve a intentarlo más tarde.",ERROR_ALREADY_AN_ACCOUNT_WITH_THIS_EMAIL:"Ya existe una cuenta registrada con ese E-mail. Si es tuya, prueba a iniciar sesión-",ERROR_ALREADY_AN_ACCOUNT_WITH_THIS_USERNAME:"Ya existe un usuario con ese nombre.",ERROR_WRONG_EMAIL_PASSWORD_COMBINATION:"No existe una cuenta registrada con este E-mail o la contraseña es incorrecta.",ERROR_UPLOADING_IMAGE:"Error subiendo la imagen.",ERROR_SOMETHING_HAPPENED:"Parece que ha ocurrido un error.",ERROR_API_FILEREADER_NOT_SUPPORTED:"Lo sentimos, la API FileReader no está soportada.",ERROR_PASSWORDS_DONT_MATCH:"Las contraseñas no coinciden",ERROR_TOO_MANY_REQUESTS:"Parece que has realizado demasiadas peticiones en poco tiempo. Por favor, vuelve a intentarlo más tarde.",ERROR_TEXT_WRONG_PASSWORD:"Parece que la contraseña introducida no coincide con su contraseña actual.",ERROR_NO_ACCOUNT_WITH_THIS_EMAIL:"Parece que no hay ninguna cuenta registrada con este E-mail.",ERROR_GETTING_CURRENT_LOCATION:"Parece que ha habido un problema accediendo a su ubicación actual.",ERROR_COULD_NOT_SET_YOUR_RATING:"Parece que ha habido un problema: No se ha podido guardar su valoración.",ERROR_PROBLEM_RETRIEVING_RANKING:"Parece que ha habido un problema al cargar el ranking. Por favor, comprueba tu conexión.",ERROR_PROBLEM_GETTING_CURRENT_LOCATION:"Parece que ha habido un problema: no se ha podido obtener tu localizacion actual.",ERROR_PROBLEM_GETTING_NEARBY_USERS:"Parece que ha habido un problema: no se han podido obtener los usuarios cercanos.",ERROR_PROBLEM_GETTING_EVENTS:"Parece que ha habido un problema: no se han podido obtener los eventos.",RULE_TEXT_MANDATORY_FIELD:"Este campo es obligatorio",RULE_TEXT_MIN_VALUE_CHARACTERS_USERNAME:"Mínimo 5 caracteres",RULE_TEXT_MAX_VALUE_CHARACTERS_USERNAME:"Máximo 14 caracteres",RULE_TEXT_MIN_VALUE_CHARACTERS_USERNAME_TO_START_SEARCHING:"Mínimo 5 caracteres para realizar la búsqueda",RULE_TEXT_MIN_VALUE_CHARACTERS_USER_DESCRIPTION:"Mínimo 20 caracteres",RULE_TEXT_MIN_VALUE_CHARACTERS_PASSWORD:"Mínimo 8 caracteres",RULE_YOU_HAVE_TO_BE_AT_LEAST_X_YEARS_OLD_TO_REGISTER:"Debes tener al menos {age} años.",RULE_INVALID_DATE:"Fecha no válida",RULE_TEXT_SELECT_RECOMMENDED_ADDRESS:"Selecciona una de las direcciones recomendadas",ASK_FOR_IMAGE_SELECTION:"Por favor, selecciona una imagen",TEXT_VERIFICATION_EMAIL_SENT_TO:"Para poder continuar, completa el proceso de verificación a través del enlace que hemos enviado a tu E-mail:",TEXT_FILL_FIELDS_CORRECTLY:"Por favor, completa correctamente todos los campos.",TEXT_LANGUAGES_YOU_WANT_TO_IMPROVE:"¿Qué idiomas buscas mejorar?",TEXT_LANGUAGES_YOU_WANT_TO_PRACTICE:"Idiomas que quieres practicar",TEXT_LANGUAGES_YOU_SPEAK_FLUENTLY:"¿Qué idiomas hablas con soltura?",TEXT_MOTHER_LANGUAGES:"Idiomas maternos",TEXT_LANGUAGE_HE_SHE_WANT_TO_IMPROVE:"Idioma que busca mejorar",TEXT_LANGUAGE_HE_SHE_WANT_TO_PRACTICE:"Idioma que quiere practicar",TEXT_LANGUAGE_HE_SHE_SPEAK_FLUENTLY:"Idioma que habla con soltura",TEXT_MOTHER_LANGUAGE:"Idioma materno",TEXT_LANGUAGE:"Idioma",TEXT_GENDER:"Género",TEXT_DISTANCE:"Distancia",TEXT_AGE:"Edad",TEXT_FILTER_BY_MOTHER_LANGUAGE:"Filtrar por idioma materno",TEXT_FILTER_BY_LANGUAGE_TO_LEARN:"Filtrar por idioma que quiere practicar",TEXT_SEARCH:"Buscar",TEXT_NO_FIT_USERS_TO_LIST:"No se han encontrado usuarios que cumplan con los requisitos.",TEXT_FILTERS:"Filtros",TEXT_RATE_USER:"Valora al usuario",TEXT_YOU:"Tú",TEXT_CANCEL:"Cancelar",TEXT_RATE:"Valorar",TEXT_REMOVE:"Eliminar",TEXT_NO_LIMIT:"Sin límite",TEXT_REMOVE_FILTERS:"Eliminar filtros",TEXT_YOUR_PROFILE:"Tu perfil",TEXT_EDIT:"Editar",TEXT_EDIT_PROFILE:"Editar perfil",TEXT_USERS:"Usuarios",TEXT_TO_FILTER:"Filtrar",TEXT_EVENTS:"Eventos",TEXT_RANKING:"Ranking",TEXT_CHATS:"Chats",TEXT_CLOSE:"Cerrar",TEXT_SHOW_USERS:"Mostrar usuarios",TEXT_OF:"de",TEXT_CREATE_YOUR_ACCOUNT:"Crea tu cuenta",TEXT_CREATE_AN_ACCOUNT:"Crear una cuenta",TEXT_NAME:"Nombre",TEXT_LASTNAME:"Apellidos",TEXT_EMAIL:"E-mail",TEXT_EMAIL_DIRECTION:"Correo electrónico",TEXT_PASSWORD:"Contraseña",TEXT_REPEAT_PASSWORD:"Repite la contraseña",TEXT_REGISTER:"Registrar",TEXT_REGISTER_NOW:"¡Regístrate ahora!",TEXT_ALREADY_HAVE_AN_ACCOUNT:"¿Ya tienes una cuenta?",TEXT_ACCESS_NOW:"¡Accede ahora!",TEXT_ACCESS_TO_YOUR_ACCOUNT:"Accede a tu cuenta",TEXT_VERIFY_YOUR_EMAIL:"Verifica tu E-mail",TEXT_USERNAME:"Nombre de usuario",TEXT_FILL_YOUR_PROFILE:"Rellena tu perfil",TEXT_BIRTHDATE:"Fecha de nacimiento",TEXT_TELL_US_A_LITTLE_ABOUT_YOU:"Cuéntanos un poco sobre ti",TEXT_TO_CONTINUE:"Continuar",TEXT_YOUR_LANGUAGES:"Tus idiomas",TEXT_WOMAN:"Mujer",TEXT_MAN:"Hombre",TEXT_ANY:"Cualquiera",TEXT_OTHER:"Otro",TEXT_CHOOSE_YOUR_PROFILE_IMAGE:"Elige tu foto de perfil",TEXT_PROFILE_IMAGE:"Foto de perfil",TEXT_EMAIL_NOT_VALID:"E-mail no válido",TEXT_USERNAME_NOT_VALID:"Nombre de usuario no válido",TEXT_HAVE_YOU_FORGOTTEN_YOUR_PASSWORD:"¿Has olvidado tu contraseña?",TEXT_STILL_DONT_HAVE_AN_ACCOUNT:"¿Todavía no tienes una cuenta?",TEXT_TO_LOG_IN:"Iniciar sesión",TEXT_TO_LOG_OUT:"Cerrar sesión",TEXT_RESEND_EMAIL:"Volver a enviar E-mail",TEXT_YOU_ARE_ABOUT_TO_LOG_OUT:"Va a salir de su cuenta",TEXT_CONFIRM:"Confirmar",TEXT_ARE_YOU_SURE_YOU_WANT_TO_LOG_OUT:"¿Estás seguro de que quieres cerrar sesión?",TEXT_PROFILE_INFO:"Información de perfil",TEXT_LANGUAGES_TO_PRACTICE:"Idiomas a practicar",TEXT_SAVE:"Guardar",TEXT_SETTINGS:"Configuración e información",TEXT_ACCOUNT:"Cuenta",TEXT_PERMISSIONS:"Permisos",TEXT_NAME_AND_LASTNAME:"Nombre y apellidos",TEXT_CHANGE_NAME_AND_LASTNAME:"Cambiar nombre y apellidos",TEXT_CHANGE_EMAIL:"Cambiar correo electrónico",TEXT_UPDATE:"Actualizar",TEXT_VERIFY_YOUR_PASSWORD:"Verifica tu contraseña",TEXT_REMOVE_ACCOUNT:"Borrar cuenta",TEXT_INTRODUCE_YOUR_PASSWORD_TO_CONTINUE:"Vuelve a introducir tu contraseña de WeBabble para continuar.",TEXT_YOUR_EMAIL_HAS_BEEN_UPDATED:"Tu dirección de correo electrónico ha sido actualizada.",TEXT_YOUR_PASSWORD_HAS_BEEN_UPDATED:"Tu contraseña ha sido actualizada.",TEXT_CHANGE_PASSWORD:"Cambiar contraseña",TEXT_CURRENT_PASSWORD:"Contraseña actual",TEXT_NEW_PASSWORD:"Nueva contraseña",TEXT_CONFIRM_PASSWORD:"Confirmar la contraseña",TEXT_UPDATE_PASSWORD:"Actualizar contraseña",TEXT_ENTER_YOUR_EMAIL_TO_RESET_YOUR_PASSWORD:"Introduce tu E-mail y te ayudaremos a recuperar la contraseña:",TEXT_RESET_PASSWORD:"Restablecer contraseña",TEXT_RESET_PASSWORD_INSTRUCTIONS:"En un breve período de tiempo recibirás un email. Ábrelo y sigue las instrucciones para restablecer tu contraseña.",TEXT_SPACE_YEARS:" años",TEXT_PARTICIPANTS:"Participantes",TEXT_NO_PARTICIPANTS_YET:"Parece que todavía no se ha apuntado nadie. ¡Sé el primero!",TEXT_VERIFICATION_EMAIL_SENT:"E-mail de verificación enviado.",TEXT_NO_USERS_MATCH_SEARCH:"Parece que no hay usuarios que coincidan con tu búsqueda.",TEXT_NO_EVENTS_AVAILABLE:"Parece que no hay eventos disponibles.",TEXT_NO_CHATS_AVAILABLE:"Parece que no tienes ningún chat todavía. ¡Comienza a hablar con algún usuario!",TEXT_NO_CHATS_MATCH_SEARCH:"Parece que no tienes chats con usuarios que coincidan con tu búsqueda.",TEXT_LANGUAGE_INVOLVED_IN_EVENTS:"Idiomas de los eventos",TEXT_LOCATION_PERMISSION_NOT_GRANTED:"Parece que no has dado permiso para acceder a tu localización. Concédelo para poder disponer de esta funcionalidad.",TEXT_CONFIRM_EVENT_PARTICIPATION:"Te has apuntado a este evento.",TEXT_CANCEL_EVENT_PARTICIPATION:"Has cancelado tu participación en este evento.",TEXT_APP_LANGUAGE:"Idioma",TEXT_LANGUAGE_OF_APP:"Idioma de la aplicación",TEXT_LANGUAGE_DE:"Alemán",TEXT_LANGUAGE_ZH:"Chino",TEXT_LANGUAGE_ES:"Español",TEXT_LANGUAGE_FR:"Francés",TEXT_LANGUAGE_EN:"Inglés",TEXT_LANGUAGE_IT:"Italiano",TEXT_LANGUAGE_JA:"Japonés",TEXT_LANGUAGE_PT:"Portugués",TEXT_LANGUAGE_ALL:"Cualquier idioma",TEXT_WE_BABBLE_SLOGAN:"Aprender idiomas ahora es más fácil",TEXT_LOCATION:"Ubicación",TEXT_NOTIFICATIONS:"Notificaciones",TEXT_GRANTED:"Concedido",TEXT_NOT_GRANTED:"No concedido",TEXT_CREATE_EVENT:"Crear evento",TEXT_PUBLISH:"Publicar",TEXT_DATE:"Fecha",TEXT_DESCRIPTION:"Descripción",TEXT_LANGUAGES:"Idiomas",TEXT_INFORMATION:"Información",TEXT_HEADER_IMAGE:"Imagen de cabecera",TEXT_PLACE:"Lugar",TEXT_ADDRESS:"Dirección",TEXT_YOU_ARE_ABOUT_TO_REMOVE_EVENT:"Vas a borrar este evento",TEXT_ARE_YOU_SURE_YOU_WANT_TO_REMOVE_EVENT:"¿Estás seguro de que quieres borrar este evento?",TEXT_EDIT_EVENT:"Editar evento"}},en:{messages:{ERROR_GENERIC_PROBLEM:"It seems that there has been a problem with your request. Please, try again later.",ERROR_GENERIC_CONNECTION_PROBLEM:"It seems that there has been a connection problem. Please, try again later.",ERROR_GENERIC_DATABASE_PROBLEM:"It seems that there has been a database problem. Please, try again later.",ERROR_ALREADY_AN_ACCOUNT_WITH_THIS_EMAIL:"There is already an account registered with this E-mail. If this account is yours, try to log in.",ERROR_ALREADY_AN_ACCOUNT_WITH_THIS_USERNAME:"This username is already in use.",ERROR_WRONG_EMAIL_PASSWORD_COMBINATION:"There is no account registered with this E-mail or the password is incorrect.",ERROR_UPLOADING_IMAGE:"Error uploading the image.",ERROR_SOMETHING_HAPPENED:"It seems that there has been an error.",ERROR_API_FILEREADER_NOT_SUPPORTED:"We are sorry, the FileReader API is not supported by your browser.",ERROR_PASSWORDS_DONT_MATCH:"Passwords do not match.",ERROR_TOO_MANY_REQUESTS:"It seems that you made several request in a short time. Please, try again later.",ERROR_TEXT_WRONG_PASSWORD:"It seems that the introduced password does not match your current password.",ERROR_NO_ACCOUNT_WITH_THIS_EMAIL:"It seems that there is no account registered with this E-mail.",ERROR_GETTING_CURRENT_LOCATION:"It seems that there was a problem accessing your current location.",ERROR_COULD_NOT_SET_YOUR_RATING:"It seems that there was a problem: your rate could not be submitted.",ERROR_PROBLEM_RETRIEVING_RANKING:"It seems that there was a problem while loading Ranking. Please, check your connection.",ERROR_PROBLEM_GETTING_CURRENT_LOCATION:"It seems that there was a problem: we could not access your current location.",ERROR_PROBLEM_GETTING_NEARBY_USERS:"It seems that there was a problem: we could not retrieve nearby users.",ERROR_PROBLEM_GETTING_EVENTS:"It seems that there was a problem: we could not retrieve events.",RULE_TEXT_MANDATORY_FIELD:"This field is required.",RULE_TEXT_MIN_VALUE_CHARACTERS_USERNAME:"Minimum 5 characters.",RULE_TEXT_MAX_VALUE_CHARACTERS_USERNAME:"Maximum 14 characters.",RULE_TEXT_MIN_VALUE_CHARACTERS_USERNAME_TO_START_SEARCHING:"Write at least 5 to search.",RULE_TEXT_MIN_VALUE_CHARACTERS_USER_DESCRIPTION:"Minimum 20 characters.",RULE_TEXT_MIN_VALUE_CHARACTERS_PASSWORD:"Minimum 8 characters.",RULE_YOU_HAVE_TO_BE_AT_LEAST_X_YEARS_OLD_TO_REGISTER:"You have to be at least {age} years old.",RULE_INVALID_DATE:"Invalid date",RULE_TEXT_SELECT_RECOMMENDED_ADDRESS:"Select one of the recommended addresses",ASK_FOR_IMAGE_SELECTION:"Please, select an image.",TEXT_VERIFICATION_EMAIL_SENT_TO:"In order to continue, complete the verification process through the link we have sent to your E-mail:",TEXT_FILL_FIELDS_CORRECTLY:"Please, complete all fields correctly.",TEXT_DESCRIPTION:"Description",TEXT_LANGUAGES_YOU_WANT_TO_IMPROVE:"What languages do you want to improve?",TEXT_LANGUAGES_YOU_WANT_TO_PRACTICE:"Languages ​​you want to practice",TEXT_LANGUAGES_YOU_SPEAK_FLUENTLY:"What languages ​​do you speak fluently?",TEXT_MOTHER_LANGUAGES:"First languages",TEXT_LANGUAGE_HE_SHE_WANT_TO_IMPROVE:"Language you are looking to improve",TEXT_LANGUAGE_HE_SHE_WANT_TO_PRACTICE:"Language you want to practice",TEXT_LANGUAGE_HE_SHE_SPEAK_FLUENTLY:"Language you speak fluently",TEXT_MOTHER_LANGUAGE:"First language",TEXT_LANGUAGE:"Language",TEXT_GENDER:"Gender",TEXT_DISTANCE:"Distance",TEXT_AGE:"Age",TEXT_FILTER_BY_MOTHER_LANGUAGE:"Filter by mother tongue",TEXT_FILTER_BY_LANGUAGE_TO_LEARN:"Filter by language they want to practice.",TEXT_SEARCH:"Search",TEXT_NO_FIT_USERS_TO_LIST:"No users found that meet the requirements.",TEXT_FILTERS:"Filters",TEXT_RATE_USER:"Rate user",TEXT_YOU:"You",TEXT_CANCEL:"Cancel",TEXT_RATE:"Rate",TEXT_REMOVE:"Remove",TEXT_NO_LIMIT:"Limitless",TEXT_REMOVE_FILTERS:"Remove filters",TEXT_YOUR_PROFILE:"Your profile",TEXT_EDIT:"Edit",TEXT_EDIT_PROFILE:"Edit profile",TEXT_USERS:"Users",TEXT_TO_FILTER:"Filter",TEXT_EVENTS:"Events",TEXT_RANKING:"Ranking",TEXT_CHATS:"Chats",TEXT_CLOSE:"Close",TEXT_SHOW_USERS:"Show users",TEXT_OF:"of",TEXT_CREATE_YOUR_ACCOUNT:"Create your account",TEXT_CREATE_AN_ACCOUNT:"Create an account",TEXT_NAME:"Name",TEXT_LASTNAME:"Last name",TEXT_EMAIL:"E-mail",TEXT_EMAIL_DIRECTION:"E-mail",TEXT_PASSWORD:"Password",TEXT_REPEAT_PASSWORD:"Repeat password",TEXT_REGISTER:"Sign up",TEXT_REGISTER_NOW:"Sign up now!",TEXT_ALREADY_HAVE_AN_ACCOUNT:"Do you already have an account?",TEXT_ACCESS_NOW:"Access now!",TEXT_ACCESS_TO_YOUR_ACCOUNT:"Log in into your account",TEXT_VERIFY_YOUR_EMAIL:"Verify your E-mail",TEXT_USERNAME:"Username",TEXT_PROFILE_IMAGE:"Profile image",TEXT_FILL_YOUR_PROFILE:"Fill your profile",TEXT_BIRTHDATE:"Date of birth",TEXT_TELL_US_A_LITTLE_ABOUT_YOU:"Tell us a bit about yourself",TEXT_TO_CONTINUE:"Continue",TEXT_YOUR_LANGUAGES:"Your languages",TEXT_WOMAN:"Woman",TEXT_MAN:"Man",TEXT_ANY:"Any",TEXT_OTHER:"Other",TEXT_CHOOSE_YOUR_PROFILE_IMAGE:"Choose your profile picture",TEXT_EMAIL_NOT_VALID:"Invalid E-mail",TEXT_USERNAME_NOT_VALID:"Invalid username",TEXT_HAVE_YOU_FORGOTTEN_YOUR_PASSWORD:"¿Has olvidado tu contraseña?",TEXT_STILL_DONT_HAVE_AN_ACCOUNT:"Have you forgotten your password?",TEXT_TO_LOG_IN:"Sign in",TEXT_TO_LOG_OUT:"Log out",TEXT_RESEND_EMAIL:"Resend E-mail",TEXT_YOU_ARE_ABOUT_TO_LOG_OUT:"You are going to log out of your account.",TEXT_CONFIRM:"Confirm",TEXT_ARE_YOU_SURE_YOU_WANT_TO_LOG_OUT:"Are you sure you want to log out?",TEXT_PROFILE_INFO:"Profile information",TEXT_LANGUAGES_TO_PRACTICE:"Languages to practice",TEXT_SAVE:"Save",TEXT_SETTINGS:"Settings and information",TEXT_ACCOUNT:"Account",TEXT_PERMISSIONS:"Permissions",TEXT_NAME_AND_LASTNAME:"Name and last name",TEXT_CHANGE_NAME_AND_LASTNAME:"Edit name and last name",TEXT_CHANGE_EMAIL:"Edit E-mail",TEXT_UPDATE:"Update",TEXT_VERIFY_YOUR_PASSWORD:"Verify your password",TEXT_REMOVE_ACCOUNT:"Remove account",TEXT_INTRODUCE_YOUR_PASSWORD_TO_CONTINUE:"Re-enter your WeBabble password to continue.",TEXT_YOUR_EMAIL_HAS_BEEN_UPDATED:"Your E-mail address has been updated.",TEXT_YOUR_PASSWORD_HAS_BEEN_UPDATED:"Your password address has been updated.",TEXT_CHANGE_PASSWORD:"Edit password",TEXT_CURRENT_PASSWORD:"Current password",TEXT_NEW_PASSWORD:"New password",TEXT_CONFIRM_PASSWORD:"Confirm password",TEXT_UPDATE_PASSWORD:"Update password",TEXT_ENTER_YOUR_EMAIL_TO_RESET_YOUR_PASSWORD:"Enter your E-mail and we will help you recover your password:",TEXT_RESET_PASSWORD:"Restore password",TEXT_RESET_PASSWORD_INSTRUCTIONS:"In a short period of time you will receive an E-mail. Open it and follow the instructions to reset your password.",TEXT_SPACE_YEARS:" years old",TEXT_PARTICIPANTS:"Participants",TEXT_NO_PARTICIPANTS_YET:"It seems that no one has signed up yet. Be the first!",TEXT_VERIFICATION_EMAIL_SENT:"Verification E-mail sent.",TEXT_NO_USERS_MATCH_SEARCH:"There appear to be no users matching your search.",TEXT_NO_CHATS_MATCH_SEARCH:"There appear to be no chats with users matching your search.",TEXT_NO_EVENTS_AVAILABLE:"There seem to be no events available.",TEXT_NO_CHATS_AVAILABLE:"It looks like you do not have any chat yet. Start talking to a user!",TEXT_LANGUAGE_INVOLVED_IN_EVENTS:"Events languages",TEXT_LOCATION_PERMISSION_NOT_GRANTED:"It seems that you have not given permission to access your location. Grant it to have this functionality.",TEXT_CONFIRM_EVENT_PARTICIPATION:"You have signed up for this event.",TEXT_CANCEL_EVENT_PARTICIPATION:"You have canceled your participation in this event.",TEXT_APP_LANGUAGE:"Language",TEXT_LANGUAGE_OF_APP:"Application language",TEXT_LANGUAGE_DE:"German",TEXT_LANGUAGE_ZH:"Chinese",TEXT_LANGUAGE_ES:"Spanish",TEXT_LANGUAGE_FR:"French",TEXT_LANGUAGE_EN:"English",TEXT_LANGUAGE_IT:"Italian",TEXT_LANGUAGE_JA:"Japanese",TEXT_LANGUAGE_PT:"Portuguese",TEXT_LANGUAGE_ALL:"Any language",TEXT_WE_BABBLE_SLOGAN:"Learning languages is now easier",TEXT_LOCATION:"Location",TEXT_NOTIFICATIONS:"Notifications",TEXT_GRANTED:"Granted",TEXT_NOT_GRANTED:"Not granted",TEXT_CREATE_EVENT:"Create event",TEXT_PUBLISH:"Publish",TEXT_DATE:"Date",TEXT_LANGUAGES:"Languages",TEXT_INFORMATION:"Information",TEXT_HEADER_IMAGE:"Header image",TEXT_PLACE:"Place",TEXT_ADDRESS:"Address",TEXT_YOU_ARE_ABOUT_TO_REMOVE_EVENT:"You are going to remove this event",TEXT_ARE_YOU_SURE_YOU_WANT_TO_REMOVE_EVENT:"Are you sure you want to remove this event?",TEXT_EDIT_EVENT:"Edit event"}}},dateTimeFormats:{en:{abbrMonth:{month:"short"},short:{year:"numeric",month:"long",day:"numeric"},long:{year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric",hour12:!0}},es:{abbrMonth:{month:"short"},short:{year:"numeric",month:"long",day:"numeric"},long:{year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric",hour12:!0}}}};a["a"].use(y["a"]);var k="es";"es"===navigator.language||"es-ES"===navigator.language?k="es":"en"!==navigator.language&&"en-US"!==navigator.language||(k="en");var C=new y["a"]({locale:k,messages:D.messages,dateTimeFormats:D.dateTimeFormats}),G=C;function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}a["a"].use(i["a"]);var F=G.t("messages.ERROR_GENERIC_DATABASE_PROBLEM"),x=G.t("messages.ERROR_ALREADY_AN_ACCOUNT_WITH_THIS_EMAIL"),B=G.t("messages.ERROR_WRONG_EMAIL_PASSWORD_COMBINATION"),H=G.t("messages.ERROR_TOO_MANY_REQUESTS"),j=G.t("messages.ERROR_GENERIC_PROBLEM"),Y=G.t("messages.ERROR_UPLOADING_IMAGE"),V={namespaced:!0,state:{},getters:{},mutations:{},actions:{isUserAuth:function(){return p["auth"]().currentUser},setAccount:function(e,t){return new Promise((function(e,n){var a=p["firestore"]();a.collection("Accounts").doc(p["auth"]().currentUser.uid).set({name:t.name,lastName:t.lastName,role:"user",chats:[],tokens:[],language:null},{merge:!0}).then((function(){console.log("Account info successfully written in firebase"),e()})).catch((function(e){console.error(e),n(F)}))}))},setAccountLanguage:function(e,t){return new Promise((function(e,n){var a=p["firestore"]();a.collection("Accounts").doc(p["auth"]().currentUser.uid).set({language:t},{merge:!0}).then((function(){console.log("Account language successfully written in firebase"),e()})).catch((function(e){console.error(e),n(F)}))}))},askForMessagingPermission:function(){return new Promise((function(e){p["messaging"]().requestPermission().then((function(){e(!0)})).catch((function(){e(!1)}))}))},generatePushNotificationToken:function(){return new Promise((function(e,t){p["messaging"]().getToken().then(function(){var n=Object(L["a"])(regeneratorRuntime.mark((function n(a){var r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!a){n.next=8;break}return n.next=3,window.localStorage.getItem("messagingToken");case 3:r=n.sent,console.log("token will be updated",r!=a),r!=a&&(o=p["firestore"](),o.collection("Accounts").doc(p["auth"]().currentUser.uid).update({tokens:p["firestore"].FieldValue.arrayUnion(a)}).then((function(){e()})).catch((function(e){console.error(e),t(F)}))),n.next=9;break;case 8:t(F);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){console.error(e),t(F)}))}))},getAccount:function(){return new Promise((function(e,t){var n=p["firestore"]();n.collection("Accounts").doc(p["auth"]().currentUser.uid).get().then((function(t){console.log("Account info successfully retrieved from firebase"),e(M({id:t.id,email:p["auth"]().currentUser.email},t.data()))})).catch((function(e){console.error(e),t(F)}))}))},createAccountListener:function(e,t){return new Promise((function(n,a){var r=p["firestore"]();try{var o=r.collection("Accounts").doc(t).onSnapshot((function(a){var r=M(M({id:t},a.data()),{},{listener:o});e.dispatch("chats/manageChatListChange",r,{root:!0}).then((function(){n(r)}))}))}catch(s){console.error(s),a(F)}}))},createAccount:function(e,t){return new Promise((function(e,n){p["auth"]().createUserWithEmailAndPassword(t.email,t.password).then((function(){console.log("Success creating account in firebase."),e()})).catch((function(e){console.error(e),"auth/email-already-in-use"==e.code?n(x):n(F)}))}))},setPersistance:function(){return new Promise((function(e,t){p["auth"]().setPersistence(p["auth"].Auth.Persistence.LOCAL).then((function(){console.log("Success setting firebase account persistence."),e()})).catch((function(e){console.error(e),t(F)}))}))},login:function(e,t){return new Promise((function(e,n){p["auth"]().signInWithEmailAndPassword(t.email,t.password).then((function(){console.log("Success logging user in firebase."),e()})).catch((function(e){console.error(e),"auth/wrong-password"==e.code||"auth/user-not-found"==e.code?n(B):"auth/too-many-requests"==e.code?n(H):n(j)}))}))},removePushNotificationToken:function(){return new Promise(function(){var e=Object(L["a"])(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=p["firestore"](),null==p["auth"]()){e.next=13;break}return e.prev=2,e.next=5,p["messaging"]().getToken().then(function(){var e=Object(L["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=3;break}return e.next=3,a.collection("Accounts").doc(p["auth"]().currentUser.uid).update({tokens:p["firestore"].FieldValue.arrayRemove(r)}).then((function(){t()})).catch((function(e){console.error(e),"messaging/failed-service-worker-registration"!=e.code&&"messaging/notifications-blocked"!=e.code&&"messaging/unsupported-browser"!=e.code&&"messaging/permission-blocked"!=e.code?n(e):t()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),"messaging/failed-service-worker-registration"!=e.code&&"messaging/notifications-blocked"!=e.code&&"messaging/unsupported-browser"!=e.code&&"messaging/permission-blocked"!=e.code?n(e):t()}));case 5:e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](2),console.error(e.t0),"messaging/failed-service-worker-registration"!=e.t0.code&&"messaging/notifications-blocked"!=e.t0.code&&"messaging/unsupported-browser"!=e.t0.code&&"messaging/permission-blocked"!=e.t0.code?n(e.t0):t();case 11:e.next=14;break;case 13:t();case 14:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}())},logout:function(e){return new Promise(function(){var t=Object(L["a"])(regeneratorRuntime.mark((function t(n,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.dispatch("removePushNotificationToken").then((function(){p["auth"]().signOut().then((function(){n()})).catch((function(e){console.error(e),a(e)}))})).catch((function(e){console.error(e),a(e)}));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())},sendEmailVerification:function(){return new Promise((function(e,t){p["auth"]().currentUser.sendEmailVerification().then((function(){console.log("Firebase verification email sent."),e()}),(function(e){console.error(e),"auth/too-many-requests"==e.code?t(H):t(F)}))}))},isEmailVerified:function(){return new Promise((function(e,t){p["auth"]().currentUser.reload().then((function(){p["auth"]().currentUser.emailVerified?(console.log("Firebase account email is verified."),e(!0)):e(!1)})).catch((function(e){console.error(e),t(F)}))}))},sendPasswordResetEmail:function(e,t){return new Promise((function(e,n){p["auth"]().sendPasswordResetEmail(t).then((function(){console.log("Password reset email sent."),e()})).catch((function(t){"auth/user-not-found"==t.code?(console.log("No account attached to the specified email."),e()):(console.error(t),n(j))}))}))},updateAccountData:function(e,t){return new Promise((function(e,n){var a=p["firestore"](),r=a.batch(),o=a.collection("Accounts").doc(p["auth"]().currentUser.uid),s=!1;t.hasOwnProperty("name")&&(r.update(o,{name:t.name}),s=!0),t.hasOwnProperty("lastName")&&(r.update(o,{lastName:t.lastName}),s=!0),s?r.commit().then((function(){console.log("Account info successfully updated in firebase"),e()})).catch((function(e){console.error(e),n(F)})):e()}))},updateAccountEmail:function(e,t){return new Promise((function(e,n){var a=p["auth"]().currentUser;a.updateEmail(t).then((function(){console.log("Account email successfully updated in firebase"),e()})).catch((function(e){console.error(e),n(j)}))}))},updateAccountPassword:function(e,t){return new Promise((function(e,n){var a=p["auth"]().currentUser;a.updatePassword(t).then((function(){console.log("Account password successfully updated in firebase"),e()})).catch((function(e){console.error(e),n(j)}))}))},getProfileByUID:function(e,t){return new Promise((function(e,n){var a=p["firestore"]();a.collection("Profiles").doc(t).get().then((function(t){null!=t.data()&&void 0!=t.data()?(t.data().hasOwnProperty("birthDate")&&(t.data()["birthDate"]=t.data()["birthDate"].toDate().setHours(0,0,0)),e(M({id:t.id},t.data()))):e(null)})).catch((function(e){console.error(e),n(F)}))}))},getProfile:function(e){return new Promise((function(t,n){e.dispatch("getProfileByUID",p["auth"]().currentUser.uid).then((function(e){e&&e.hasOwnProperty("birthDate")&&(e["birthDate"]=e["birthDate"].toDate().setHours(0,0,0)),console.log("Profile info successfully retrieved from firebase"),t(e)})).catch((function(e){console.error(e),n(F)}))}))},getMultipleProfilesByUID:function(e,t){return new Promise((function(n,a){var r=[],o=[];t.forEach((function(t){r.push(e.dispatch("getProfileByUID",t).then((function(e){o.push(M({id:t},e))})).catch((function(e){console.error(e),a(F)})))})),Promise.all(r).then((function(){n(o)}))}))},getProfileByUsername:function(e,t){return new Promise((function(e,n){var a=p["firestore"]();a.collection("Profiles").where("username","==",t).get().then((function(t){t.size>0?(console.log("Profile info successfully retrieved from firebase"),e(t.docs)):(console.log("Profile info was not found in firebase"),e(null))})).catch((function(e){console.error(e),n(F)}))}))},setProfile:function(e,t){return new Promise((function(e,n){var a=p["firestore"]();a.collection("Profiles").doc(p["auth"]().currentUser.uid).set({username:t.username.toLowerCase(),birthDate:new Date(new Date(t.birthDate).setHours(0,0,0)),gender:t.gender,description:t.description,avgRating:0,numRatings:0,score:0},{merge:!0}).then((function(){console.log("Profile info successfully written in firebase"),e()})).catch((function(e){console.error(e),n(F)}))}))},setRegistrationCompleted:function(){return new Promise((function(e,t){var n=p["firestore"]();n.collection("Profiles").doc(p["auth"]().currentUser.uid).set({registrationCompleted:!0},{merge:!0}).then((function(){console.log("Registration state successfully written in firebase"),e()})).catch((function(e){console.error(e),t(F)}))}))},updateProfile:function(e,t){return new Promise((function(e,n){var a=p["firestore"](),r=a.batch(),o=a.collection("Profiles").doc(p["auth"]().currentUser.uid),s=!1;t.hasOwnProperty("username")&&(r.update(o,{username:t.username}),s=!0),t.hasOwnProperty("description")&&(r.update(o,{description:t.description}),s=!0),t.hasOwnProperty("gender")&&(r.update(o,{gender:t.gender}),s=!0),t.hasOwnProperty("birthDate")&&(r.update(o,{birthDate:new Date(new Date(t.birthDate).setHours(0,0,0))}),s=!0),t.hasOwnProperty("knownLanguages")&&(r.update(o,{knownLanguages:t.knownLanguages}),s=!0),t.hasOwnProperty("languagesToLearn")&&(r.update(o,{languagesToLearn:t.languagesToLearn}),s=!0),s?r.commit().then((function(){console.log("Profile info successfully updated in firebase"),e()})).catch((function(e){console.error(e),n(F)})):e()}))},setLanguages:function(e,t){return new Promise((function(e,n){var a=p["firestore"]();a.collection("Profiles").doc(p["auth"]().currentUser.uid).set({knownLanguages:t.knownLanguages,languagesToLearn:t.languagesToLearn},{merge:!0}).then((function(){console.log("User languages info successfully written in firebase."),e()})).catch((function(e){console.error(e),n(F)}))}))},uploadProfileImg:function(e,t){return new Promise((function(n,a){var r=p["auth"]().currentUser.uid,o="UserProfileImages/"+r,s={img:t,path:o};e.dispatch("uploadImg",s).then((function(e){n(e)})).catch((function(e){console.error(e),a(Y)}))}))},uploadImg:function(e,t){return new Promise((function(e,n){var a=p["storage"]().ref().child(t.path);a.putString(t.img,"base64").then((function(){a.getDownloadURL().then((function(t){console.log("User profile image uploaded."),e(t)})).catch((function(e){console.error(e),n(Y)}))})).catch((function(e){console.error(e),n(Y)}))}))},setProfileImg:function(e,t){return new Promise((function(e,n){var a=p["firestore"]();a.collection("Profiles").doc(p["auth"]().currentUser.uid).set({profileImg:t},{merge:!0}).then((function(){console.log("User profile image successfully written in firebase."),e()})).catch((function(e){console.error(e),n(Y)}))}))},updateUserLocation:function(e,t){var n=new N["GeoFirestore"](p["firestore"]());return new Promise((function(e,a){n.collection("UserLocations").doc(p["auth"]().currentUser.uid).set({coordinates:new p["firestore"].GeoPoint(t.lat,t.lng),date:new Date}).then((function(){console.log("User location successfully written in firebase."),e()})).catch((function(e){console.log(e),a(F)}))}))},getLocation:function(){return new Promise((function(e,t){var n=p["firestore"]();n.collection("UserLocations").doc(p["auth"]().currentUser.uid).get().then((function(t){console.log("User location successfully retrieved from firebase.");var n={lat:t.data().l[0],lng:t.data().l[1]};e(n)})).catch((function(e){console.error(e),t(F)}))}))},getRatings:function(){var e=p["firestore"]();return new Promise((function(t,n){e.collection("Ratings").doc(p["auth"]().currentUser.uid).get().then((function(e){console.log("User ratings successfully retrieved from firebase."),e.exists?t(e.data()):t(null)})).catch((function(e){console.error(e),n(F)}))}))},setRating:function(e,t){return new Promise((function(e,n){var a=p["firestore"](),r={};r[t.id]=t.rating,t.rating?a.collection("Ratings").doc(p["auth"]().currentUser.uid).set(r,{merge:!0}).then((function(){console.log("Rating successfully written in firebase."),e()})).catch((function(e){console.error(e),n(F)})):a.collection("Ratings").doc(p["auth"]().currentUser.uid).update(Object(s["a"])({},t.id,p["firestore"].FieldValue.delete())).then((function(){console.log("Rating successfully deleted in firebase."),e()})).catch((function(e){console.error(e),n(F)}))}))},isNextUsersPageEmpty:function(e,t){return new Promise((function(e,n){var a,r=p["firestore"](),o=t.lastUserShowed;if(a=r.collection("Profiles"),null!=t.filters.username&&void 0!=t.filters.username&&""!=t.filters.username&&null==o&&(o=t.filters.username),"M"===t.filters.gender?a=a.where("gender","==","M"):"W"===t.filters.gender&&(a=a.where("gender","==","W")),(t.filters.ageRange[0]>U["a"].MIN_USER_AGE||t.filters.ageRange[1]<U["a"].MAX_USER_AGE)&&(a=a.orderBy("birthDate")),t.filters.ageRange[0]>U["a"].MIN_USER_AGE){var s=new Date;s.setFullYear(s.getFullYear()-t.filters.ageRange[0]),s.setHours(0,0,0),a=a.where("birthDate","<",s)}if(t.filters.ageRange[1]<U["a"].MAX_USER_AGE){var i=new Date;i.setFullYear(i.getFullYear()-t.filters.ageRange[1]-1),i.setHours(0,0,0),a=a.where("birthDate",">",i)}"languageToLearn"==t.filters.language.filterBy&&"all"!=t.filters.language.languageToLearn?a=a.where("languagesToLearn","array-contains",t.filters.language.languageToLearn):"knownLanguage"==t.filters.language.filterBy&&"all"!=t.filters.language.knownLanguage&&(a=a.where("knownLanguages","array-contains",t.filters.language.knownLanguage)),a=a.where("registrationCompleted","==",!0),a=null!=t.filters.username&&void 0!=t.filters.username&&""!=t.filters.username?a.orderBy("username").startAfter(o).endAt(t.filters.username+"").limit(t.limit):a.orderBy("username").startAfter(o).limit(t.limit),a.get().then((function(t){var n=t.docs.findIndex((function(e){return e.id==p["auth"]().currentUser.uid})),a=t.docs;-1!=n&&a.splice(n,1),a=a.map((function(e){var t=e.id,n=e.data();return M({id:t},n)})),e(0==a.length)})).catch((function(e){console.log(e),n(F)}))}))},getNextUsersPage:function(e,t){return new Promise((function(e,n){var a,r,o=p["firestore"](),s=t.lastUserShowed;if(a=o.collection("Profiles"),null!=t.filters.username&&void 0!=t.filters.username&&""!=t.filters.username&&null==s&&(s=t.filters.username),"M"===t.filters.gender?a=a.where("gender","==","M"):"W"===t.filters.gender&&(a=a.where("gender","==","W")),a=a.where("registrationCompleted","==",!0),(t.filters.ageRange[0]>U["a"].MIN_USER_AGE||t.filters.ageRange[1]<U["a"].MAX_USER_AGE)&&(a=a.orderBy("birthDate")),t.filters.ageRange[0]>U["a"].MIN_USER_AGE){var i=new Date;i.setFullYear(i.getFullYear()-t.filters.ageRange[0]),i.setHours(0,0,0),a=a.where("birthDate","<",i)}if(t.filters.ageRange[1]<U["a"].MAX_USER_AGE){var c=new Date;c.setFullYear(c.getFullYear()-t.filters.ageRange[1]-1),c.setHours(0,0,0),a=a.where("birthDate",">",c)}"languageToLearn"==t.filters.language.filterBy&&"all"!=t.filters.language.languageToLearn?a=a.where("languagesToLearn","array-contains",t.filters.language.languageToLearn):"knownLanguage"==t.filters.language.filterBy&&"all"!=t.filters.language.knownLanguage&&(a=a.where("knownLanguages","array-contains",t.filters.language.knownLanguage)),a=null==t.lastUserShowed&&null!=t.filters.username&&void 0!=t.filters.username&&""!=t.filters.username?a.orderBy("username").startAt(s).endAt(t.filters.username+"").limit(t.limit):null!=t.lastUserShowed&&null!=t.filters.username&&void 0!=t.filters.username&&""!=t.filters.username?a.orderBy("username").startAfter(s).endAt(t.filters.username+"").limit(t.limit):a.orderBy("username").startAfter(s).limit(t.limit),a.get().then((function(t){var n=t.docs.findIndex((function(e){return e.id==p["auth"]().currentUser.uid})),a=t.docs;-1!=n&&a.splice(n,1),r=t.docs[t.docs.length-1],a=a.map((function(e){var t=e.id,n=e.data();return M({id:t},n)})),e({newLastUserShowed:r,users:a})})).catch((function(e){console.log(e),n(F)}))}))},getNearbyUserIDs:function(e,t){return new Promise((function(e,n){var a=new N["GeoFirestore"](p["firestore"]()),r=a.collection("UserLocations").near({center:new p["firestore"].GeoPoint(t.location.lat,t.location.lng),radius:t.maxDistance});r.get().then((function(t){var n=[];t.docs.forEach((function(e){e.id!=p["auth"]().currentUser.uid&&n.push(e.id)})),e(n)})).catch((function(e){console.log(e),n(Y)}))}))},getEventByID:function(e,t){return new Promise((function(e,n){var a=p["firestore"]();a.collection("Events").doc(t).get().then((function(t){null!=t.data()&&void 0!=t.data()?e(M({id:t.id},t.data())):e(null)})).catch((function(e){console.error(e),n(F)}))}))},uploadEventHeaderImg:function(e,t){return new Promise((function(n,a){var r="EventHeaderImages/"+t.eventID,o={img:t.img,path:r};e.dispatch("uploadImg",o).then((function(e){n(e)})).catch((function(e){console.error(e),a(Y)}))}))},createEvent:function(e,t){return new Promise((function(n,a){var r=p["firestore"](),o=r.collection("Events").doc();t.location.coordinates=new p["firestore"].GeoPoint(t.location.coordinates.lat,t.location.coordinates.lng),e.dispatch("uploadEventHeaderImg",{img:t.headerImg,eventID:o.id}).then((function(e){var r={name:t.name,date:new Date(new Date(t.date).setHours(0,0,0)),participants:[],headerImg:e,description:t.description,involvedLanguages:t.involvedLanguages,location:t.location};o.set(M({},r),{merge:!0}).then((function(){console.log("Event successfully created in firebase"),n(M(M({},r),{},{id:o.id}))})).catch((function(e){console.error(e),a(F)}))})).catch((function(e){a(e)}))}))},removeEvent:function(e,t){return new Promise((function(e,n){var a=p["firestore"]();a.collection("Events").doc(t).delete().then((function(){console.log("Event successfully removed from firebase"),e()})).catch((function(e){console.error(e),n(F)}))}))},updateEvent:function(e,t){return new Promise(function(){var n=Object(L["a"])(regeneratorRuntime.mark((function n(a,r){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=p["firestore"](),t.hasOwnProperty("location")&&(t.location.coordinates=new p["firestore"].GeoPoint(t.location.coordinates.lat,t.location.coordinates.lng)),!t.hasOwnProperty("headerImg")){n.next=5;break}return n.next=5,e.dispatch("uploadEventHeaderImg",{img:t.headerImg,eventID:t.id}).then((function(e){t.headerImg=e})).catch((function(e){r(e)}));case 5:t.hasOwnProperty("date")&&(t.date=new Date(new Date(t.date).setHours(0,0,0))),o.collection("Events").doc(t.id).update(M({},t)).then((function(){console.log("Event successfully updated in firebase");var e={};t.hasOwnProperty("headerImg")&&(e["headerImg"]=t.headerImg),t.hasOwnProperty("date")&&(e["date"]=new Date(t.date)),a(e)})).catch((function(e){console.error(e),r(F)}));case 7:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())},getNextEventsPage:function(e,t){return new Promise((function(e,n){var a,r,o=p["firestore"](),s=t.lastEventShowed,i=new Date;a=o.collection("Events"),"all"!==t.filters.languageInvolved&&(a=a.where("involvedLanguages","array-contains",t.filters.languageInvolved)),a=null==s?a.where("date",">",i).orderBy("date").startAt(s):a.where("date",">",i).orderBy("date").startAfter(s),a.limit(t.limit).get().then((function(t){r=t.docs[t.docs.length-1];var n=t.docs.map((function(e){var t=e.id,n=e.data();return M({id:t},n)}));e({newLastEventShowed:r,events:n})})).catch((function(e){console.log(e),n(F)}))}))},getEventsToBeCelebrated:function(){return new Promise((function(e,t){var n,a=p["firestore"](),r=new Date;n=a.collection("Events"),n=n.where("date",">",r).orderBy("date"),n.get().then((function(t){var n=t.docs.map((function(e){var t=e.id,n=e.data();return M({id:t},n)}));e(n)})).catch((function(e){console.log(e),t(F)}))}))},isNextEventsPageEmpty:function(e,t){return new Promise((function(e,n){var a,r=p["firestore"](),o=t.lastEventShowed,s=new Date;a=r.collection("Events"),"all"!==t.filters.languageInvolved&&(a=a.where("involvedLanguages","array-contains",t.filters.languageInvolved)),a=a.where("date",">",s).orderBy("date").startAfter(o),a.limit(t.limit).get().then((function(t){e(0==t.docs.length)})).catch((function(e){console.log(e),n(F)}))}))},addParticipantToEvent:function(e,t){return new Promise((function(e,n){var a=p["firestore"]();a.collection("Events").doc(t).update({participants:p["firestore"].FieldValue.arrayUnion(p["auth"]().currentUser.uid)}).then((function(){console.log("User successfully added to event in firebase."),e(p["auth"]().currentUser.uid)})).catch((function(e){console.log(e),n(F)}))}))},removeParticipantFromEvent:function(e,t){return new Promise((function(e,n){var a=p["firestore"]();a.collection("Events").doc(t).update({participants:p["firestore"].FieldValue.arrayRemove(p["auth"]().currentUser.uid)}).then((function(){console.log("User successfully remove from event in firebase."),e(p["auth"]().currentUser.uid)})).catch((function(e){console.log(e),n(F)}))}))},createChatMessagesListener:function(e,t){return new Promise((function(n,a){var r=p["firestore"]();try{var o=r.collection("Chats").doc(t).collection("Messages").onSnapshot((function(a){var r=a.docChanges().map((function(e){var t=e.doc.id,n=e.doc.data();return M({id:t,change:e.type},n)})),s={id:t,messages:r,listener:o};e.dispatch("chats/manageChatMessagesChange",s,{root:!0}).then((function(){n()}))}))}catch(s){console.error(s),a(F)}}))},setMessagesToRead:function(e,t){return new Promise((function(e,n){var a=p["firestore"](),r=a.batch();t.messages.forEach((function(e){r.update(a.collection("Chats").doc(t.chatID).collection("Messages").doc(e),{read:!0})})),r.commit().then((function(){e()})).catch((function(e){n(e)}))}))},addMessagesToChat:function(e,t){return new Promise((function(e,n){var a=p["firestore"](),r={date:p["firestore"].FieldValue.serverTimestamp(),sender:t.message.sender,read:!1,text:t.message.text};a.collection("Chats").doc(t.chatID).collection("Messages").doc().set(r).then((function(){e()})).catch((function(e){console.error("Error adding message",e),n(j)}))}))},addChat:function(e,t){return new Promise((function(e,n){var a=p["firestore"](),r={users:t.users};a.collection("Chats").doc(t.id).set(r).then((function(){a.collection("Accounts").doc(p["auth"]().currentUser.uid).update({chats:p["firestore"].FieldValue.arrayUnion(t.id)}).then((function(){e()}))})).catch((function(e){console.error("Error adding chat",e),n(j)}))}))},getChatByID:function(e,t){return new Promise((function(e,n){var a=p["firestore"]();a.collection("Chats").doc(t).get().then((function(t){e(M({id:t.id},t.data()))})).catch((function(e){console.error(e),n(F)}))}))},getTop100RankingUsers:function(){return new Promise((function(e,t){var n=p["firestore"](),a=n.collection("Ranking");a=a.orderBy("position").limit(U["a"].MAX_RANKING_PAGE_SIZE),a.get().then((function(t){var n=t.docs.map((function(e){var t=e.id,n=e.data();return M({position:t},n)}));e(n)})).catch((function(e){console.log(e),t(F)}))}))}}},W=n("559b");a["a"].use(i["a"]);var q={namespaced:!0,modules:{database:V},state:{isGeolocationPermissionGranted:!1,isPushNotificationPermissionGranted:!1},getters:{getIsGeolocationPermissionGranted:function(e){return e.isGeolocationPermissionGranted},getIsPushNotificationPermissionGranted:function(e){return e.isPushNotificationPermissionGranted}},mutations:{resetState:function(e){e.isGeolocationPermissionGranted=!1,e.isPushNotificationPermissionGranted=!1},setIsGeolocationPermissionGranted:function(e,t){e.isGeolocationPermissionGranted=t},setIsPushNotificationPermissionGranted:function(e,t){e.isPushNotificationPermissionGranted=t}},actions:{resetState:function(e){return new Promise((function(t){e.commit("resetState"),t()}))},checkForGeolocationPermission:function(e){return new Promise((function(t,n){void 0==navigator.permissions?(e.commit("setIsGeolocationPermissionGranted",!1),t(!1)):e.getters.getIsGeolocationPermissionGranted||navigator.permissions.query({name:"geolocation"}).then((function(a){"granted"==a.state?(e.commit("setIsGeolocationPermissionGranted",!0),e.dispatch("user/getLocation",null,{root:!0}).catch((function(e){n(e)})),t(!0)):"prompt"==a.state?(e.commit("setIsGeolocationPermissionGranted",!1),navigator.geolocation.getCurrentPosition(W["a"].emptyCallback)):"denied"==a.state&&(e.commit("setIsGeolocationPermissionGranted",!1),t(!1)),a.onchange=function(){"granted"==a.state?(e.commit("setIsGeolocationPermissionGranted",!0),e.dispatch("user/getLocation",null,{root:!0}).catch((function(e){n(e)})),t(!0)):"prompt"==a.state?(e.commit("setIsGeolocationPermissionGranted",!1),navigator.geolocation.getCurrentPosition(W["a"].emptyCallback)):"denied"==a.state&&(e.commit("setIsGeolocationPermissionGranted",!1),t(!1))}}))}))},checkForPushNotificationsPermission:function(e){return new Promise((function(t,n){e.dispatch("database/askForMessagingPermission").then((function(a){a?(e.commit("setIsPushNotificationPermissionGranted",!0),e.dispatch("user/generateNotificationToken",null,{root:!0}).catch((function(e){n(e)})),t(!0)):(e.commit("setIsPushNotificationPermissionGranted",!1),t(!1))}))}))}}};function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}a["a"].use(i["a"]);var K={namespaced:!0,modules:{database:V,permissions:q},state:{users:{},searchedUsersIDs:[],lastUserShowed:null,genderFilter:"O",ageRangeFilter:[U["a"].MIN_USER_AGE,U["a"].MAX_USER_AGE],languageFilter:{filterBy:"languageToLearn",knownLanguage:"all",languageToLearn:"all"},searchByUsernameFilter:null,maxDistanceFilter:3,maxDistanceRanges:[1,5,10,null],maxDistanceRangesText:["1 km","5 km","10 km","∞"],locationFilter:null,nearbyUsersIDs:null},getters:{getLanguagesByUserID:function(e){return function(t){return e.users[t].knownLanguages.concat(e.users[t].languagesToLearn)}},getGenderFilter:function(e){return e.genderFilter},getAgeRangeFilter:function(e){return e.ageRangeFilter},getLanguageFilter:function(e){return e.languageFilter},getSearchByUsernameFilter:function(e){return e.searchByUsernameFilter},getMaxDistanceFilter:function(e){return e.maxDistanceFilter},getMaxDistanceRangesText:function(e){return e.maxDistanceRangesText},getUserByID:function(e){return function(t){return e.users[t]}},getNearbyUsersIDs:function(e){return e.nearbyUsersIDs},getNearbyUsersIDsLength:function(e){return e.nearbyUsersIDs.length},areThereFiltersOn:function(e,t){var n=t.getFilters,a=!1;return("M"===n.gender||"W"===n.gender||n.ageRange[0]>U["a"].MIN_USER_AGE||n.ageRange[1]<U["a"].MAX_USER_AGE||"languageToLearn"==n.language.filterBy&&"all"!=n.language.languageToLearn||"knownLanguage"==n.language.filterBy&&"all"!=n.language.knownLanguage||null!=n.maxDistance)&&(a=!0),a},getFilters:function(e){return{gender:e.genderFilter,ageRange:e.ageRangeFilter,language:e.languageFilter,maxDistance:e.maxDistanceRanges[e.maxDistanceFilter],location:e.locationFilter,username:e.searchByUsernameFilter}},getLastUserShowed:function(e){return e.lastUserShowed},getSearchedUsers:function(e){var t=[];return e.searchedUsersIDs.forEach((function(n){t.push(z({id:n},e.users[n]))})),t}},mutations:{resetState:function(e){e.users={},e.searchedUsersIDs=[],e.lastUserShowed=null,e.genderFilter="O",e.ageRangeFilter=[U["a"].MIN_USER_AGE,U["a"].MAX_USER_AGE],e.languageFilter={filterBy:"languageToLearn",knownLanguage:"all",languageToLearn:"all"},e.searchByUsernameFilter=null,e.maxDistanceFilter=3,e.maxDistanceRanges=[1e3,5e3,1e4,null],e.maxDistanceRangesText=["1 km","5 km","10 km","∞"],e.locationFilter=null,e.nearbyUsersIDs=null},setGenderFilter:function(e,t){e.genderFilter=t},setAgeRangeFilter:function(e,t){e.ageRangeFilter=t},setNearbyUsersIDs:function(e,t){e.nearbyUsersIDs=t},setLanguageFilter:function(e,t){e.languageFilter=t},setLocationFilter:function(e,t){e.locationFilter=t},setSearchByUsernameFilter:function(e,t){e.searchByUsernameFilter=t},setMaxDistanceFilter:function(e,t){e.maxDistanceFilter=t},addUser:function(e,t){e.users[t.id]=t},addSearchedUserID:function(e,t){-1==e.searchedUsersIDs.findIndex((function(e){return e==t}))&&e.searchedUsersIDs.push(t)},resetSearchedUsersIDs:function(e){e.searchedUsersIDs=[]},setLastUserShowed:function(e,t){e.lastUserShowed=t},addRating:function(e,t){var n=e.users[t.id];if(null==t.prev){var a=n.avgRating*n.numRatings;a+=t.rating,a/=n.numRatings+1,e.users[t.id].avgRating=a,e.users[t.id].numRatings=n.numRatings+1}else if(null==t.rating){var r=n.avgRating*n.numRatings;r-=t.prev,n.numRatings-1!=0&&(r/=n.numRatings-1),e.users[t.id].avgRating=r,e.users[t.id].numRatings=n.numRatings-1}else{var o=n.avgRating*n.numRatings;o=o+t.rating-t.prev,0!=n.numRatings&&(o/=n.numRatings),e.users[t.id].avgRating=o}}},actions:{resetState:function(e){e.commit("resetState")},getSearchedUsers:function(e){return new Promise((function(t,n){var a=e.getters.getFilters;null!=a.location&&void 0!=a.location&&null!=a.maxDistance?null==e.getters.getLastUserShowed?e.dispatch("database/getNearbyUserIDs",{location:a.location,maxDistance:a.maxDistance}).then((function(a){e.commit("setNearbyUsersIDs",a),e.dispatch("getNearbyUsersProfiles").then((function(){e.dispatch("areThereMoreNearbyUsers").then((function(e){t(e)})).catch((function(e){n(e)}))})).catch((function(e){n(e)}))})).catch((function(e){n(e)})):e.dispatch("getNearbyUsersProfiles").then((function(){e.dispatch("areThereMoreNearbyUsers").then((function(e){t(e)})).catch((function(e){n(e)}))})).catch((function(e){n(e)})):e.dispatch("database/getNextUsersPage",{lastUserShowed:e.getters.getLastUserShowed,limit:U["a"].SEARCHED_USERS_PAGE_SIZE,filters:a}).then((function(r){e.commit("setLastUserShowed",r.newLastUserShowed),r.users.forEach((function(t){e.commit("addUser",t),e.commit("addSearchedUserID",t.id)})),r.users.length>0?e.dispatch("database/isNextUsersPageEmpty",{lastUserShowed:e.getters.getLastUserShowed,limit:U["a"].SEARCHED_USERS_PAGE_SIZE,filters:a}).then((function(o){r.users.length>0&&r.users.length<U["a"].SEARCHED_USERS_PAGE_SIZE&&!o?e.dispatch("database/getNextUsersPage",{lastUserShowed:e.getters.getLastUserShowed,limit:U["a"].SEARCHED_USERS_PAGE_SIZE-r.users.length,filters:a}).then((function(r){e.commit("setLastUserShowed",r.newLastUserShowed),r.users.forEach((function(t){e.commit("addUser",t),e.commit("addSearchedUserID",t.id)})),e.dispatch("database/isNextUsersPageEmpty",{lastUserShowed:e.getters.getLastUserShowed,limit:U["a"].SEARCHED_USERS_PAGE_SIZE,filters:a}).then((function(e){t(!e)})).catch((function(e){n(e)}))})).catch((function(e){n(e)})):t(!o)})).catch((function(e){n(e)})):t(!1)})).catch((function(e){n(e)}))}))},areThereMoreNearbyUsers:function(e){return new Promise(function(){var t=Object(L["a"])(regeneratorRuntime.mark((function t(n,a){var r,o,s,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.getters.getNearbyUsersIDs,o=e.getters.getFilters,s=e.getters.getLastUserShowed;case 3:if(!(s+1<e.getters.getNearbyUsersIDsLength)){t.next=18;break}i=null==s?0:s+1,c=[];case 6:if(!(i<U["a"].SEARCHED_USERS_PAGE_SIZE+s+1)){t.next=13;break}if(i!=e.getters.getNearbyUsersIDsLength){t.next=9;break}return t.abrupt("break",13);case 9:c.push(r[i]);case 10:i++,t.next=6;break;case 13:return s=i-1,t.next=16,e.dispatch("database/getMultipleProfilesByUID",c).then((function(e){e.forEach((function(e){var t=!0;if(null==o.username||void 0==o.username||""==o.username||e.username.startsWith(o.username)||(t=!1),("M"===o.gender&&"M"!==e.gender||"W"===o.gender&&"W"!==e.gender)&&(t=!1),o.ageRange[0]>U["a"].MIN_USER_AGE||o.ageRange[1]<U["a"].MAX_USER_AGE){if(o.ageRange[0]>U["a"].MIN_USER_AGE){var a=new Date;a.setFullYear(a.getFullYear()-o.ageRange[0]),a.setHours(0,0,0),new Date(e.birthDate.toDate().setHours(0,0,0))>=new Date(a)&&(t=!1)}if(o.ageRange[1]<U["a"].MAX_USER_AGE){var r=new Date;r.setFullYear(r.getFullYear()-o.ageRange[1]-1),r.setHours(0,0,0),new Date(e.birthDate.toDate().setHours(0,0,0))<=new Date(r)&&(t=!1)}}if("languageToLearn"==o.language.filterBy&&"all"!=o.language.languageToLearn){var s=e.languagesToLearn.findIndex((function(e){return e==o.language.languageToLearn}));-1==s&&(t=!1)}else if("knownLanguage"==o.language.filterBy&&"all"!=o.language.knownLanguage){var i=e.knownLanguages.findIndex((function(e){return e==o.language.knownLanguage}));-1==i&&(t=!1)}e.registrationCompleted||(t=!1),t&&n(!0)}))})).catch((function(e){a(e)}));case 16:t.next=3;break;case 18:n(!1);case 19:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())},getNearbyUsersProfiles:function(e){return new Promise(function(){var t=Object(L["a"])(regeneratorRuntime.mark((function t(n,a){var r,o,s,i,c,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=0,o=e.getters.getNearbyUsersIDs,s=e.getters.getFilters;case 3:if(!(r<U["a"].SEARCHED_USERS_PAGE_SIZE&&e.getters.getLastUserShowed+1<e.getters.getNearbyUsersIDsLength)){t.next=20;break}i=void 0,c=e.getters.getLastUserShowed,null==c?(i=0,c=0):i=c+1,u=[];case 8:if(!(i<U["a"].SEARCHED_USERS_PAGE_SIZE+c)){t.next=15;break}if(i!=e.getters.getNearbyUsersIDsLength){t.next=11;break}return t.abrupt("break",15);case 11:u.push(o[i]);case 12:i++,t.next=8;break;case 15:return e.commit("setLastUserShowed",i-1),t.next=18,e.dispatch("database/getMultipleProfilesByUID",u).then(function(){var t=Object(L["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n.forEach((function(t){var n=!0;if(null==s.username||void 0==s.username||""==s.username||t.username.startsWith(s.username)||(n=!1),("M"===s.gender&&"M"!==t.gender||"W"===s.gender&&"W"!==t.gender)&&(n=!1),s.ageRange[0]>U["a"].MIN_USER_AGE||s.ageRange[1]<U["a"].MAX_USER_AGE){if(s.ageRange[0]>U["a"].MIN_USER_AGE){var a=new Date;a.setFullYear(a.getFullYear()-s.ageRange[0]),a.setHours(0,0,0),new Date(t.birthDate.toDate().setHours(0,0,0))>=new Date(a)&&(n=!1)}if(s.ageRange[1]<U["a"].MAX_USER_AGE){var o=new Date;o.setFullYear(o.getFullYear()-s.ageRange[1]-1),o.setHours(0,0,0),new Date(t.birthDate.toDate().setHours(0,0,0))<=new Date(o)&&(n=!1)}}if("languageToLearn"==s.language.filterBy&&"all"!=s.language.languageToLearn){var i=t.languagesToLearn.findIndex((function(e){return e==s.language.languageToLearn}));-1==i&&(n=!1)}else if("knownLanguage"==s.language.filterBy&&"all"!=s.language.knownLanguage){var c=t.knownLanguages.findIndex((function(e){return e==s.language.knownLanguage}));-1==c&&(n=!1)}n&&(e.commit("addUser",t),e.commit("addSearchedUserID",t.id),r++)}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){a(e)}));case 18:t.next=3;break;case 20:n();case 21:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())},resetSearchedUsers:function(e){return new Promise((function(t){e.commit("resetSearchedUsersIDs"),e.commit("setLastUserShowed",null),t()}))},setFilters:function(e,t){return new Promise((function(n){e.commit("setGenderFilter",t.gender),e.commit("setAgeRangeFilter",t.ageRange),e.commit("setLanguageFilter",t.language),e.commit("setMaxDistanceFilter",t.maxDistance),e.commit("setLocationFilter",t.location),n()}))},getUserByID:function(e,t){return new Promise((function(n,a){e.dispatch("database/getProfileByUID",t).then((function(t){t?(e.commit("addUser",t),n(t)):n(!1)})).catch((function(e){console.log("Error getting user by it's id in firebase."),a(e)}))}))},resetFilters:function(e){return new Promise((function(t){e.commit("setGenderFilter","O"),e.commit("setAgeRangeFilter",[U["a"].MIN_USER_AGE,U["a"].MAX_USER_AGE]),e.commit("setLanguageFilter",{filterBy:"languageToLearn",knownLanguage:"all",languageToLearn:"all"}),e.commit("setLocationFilter",null),e.commit("setNearbyUsersIDs",null),e.commit("setNearbyUsersIDs",null),e.commit("setMaxDistanceFilter",3),e.commit("setSearchByUsernameFilter",null);var n=e.getters.getFilters;n["maxDistance"]=3,t(n)}))}}},$=n("3835");n("ffc1"),n("6b54"),n("7514");function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}a["a"].use(i["a"]);var ee=G.t("messages.ERROR_ALREADY_AN_ACCOUNT_WITH_THIS_USERNAME"),te=G.t("messages.ERROR_GENERIC_PROBLEM"),ne=G.t("messages.ERROR_GETTING_CURRENT_LOCATION"),ae={namespaced:!0,modules:{database:V,users:K},state:{id:null,name:null,lastName:null,email:null,chats:[],role:"user",language:null,username:null,birthDate:null,gender:null,description:null,avgRating:null,numRatings:null,knownLanguages:null,languagesToLearn:null,profileImg:null,location:null,ratings:null,genderOptions:{M:{img:"img/genders/male.svg",defaultProfileImg:"img/defaultUserImages/defaultUserImage.svg"},W:{img:"img/genders/female.svg",defaultProfileImg:"img/defaultUserImages/defaultUserImage.svg"},O:{img:"img/genders/other.svg",defaultProfileImg:"img/defaultUserImages/defaultUserImage.svg"}},languageOptions:{de:{img:"img/flags/de.svg"},zh:{img:"img/flags/zh.svg"},es:{img:"img/flags/es.svg"},fr:{img:"img/flags/fr.svg"},en:{img:"img/flags/en.svg"},it:{img:"img/flags/it.svg"},ja:{img:"img/flags/ja.svg"},pt:{img:"img/flags/pt.svg"},all:{img:"img/flags/all.svg"}}},getters:{getName:function(e){return e.name},getID:function(e){return e.id},getLastName:function(e){return e.lastName},getEmail:function(e){return e.email},getRole:function(e){return e.role},getChats:function(e){return e.chats},getProfile:function(e){var t={};return e.username&&(t=Q({username:e.username},t)),e.birthDate&&(t=Q({birthDate:e.birthDate},t)),e.gender&&(t=Q({gender:e.gender},t)),e.description&&(t=Q({description:e.description},t)),e.profileImg&&(t=Q({profileImg:e.profileImg},t)),e.knownLanguages&&(t=Q({knownLanguages:e.knownLanguages},t)),e.languagesToLearn&&(t=Q({languagesToLearn:e.languagesToLearn},t)),t=Q({avgRating:e.avgRating,numRatings:e.numRatings},t),t},getBirthDate:function(e){return e.birthDate},getGender:function(e){return e.gender},getDescription:function(e){return e.description},getProfileImg:function(e){return e.profileImg},getKnownLanguages:function(e){return e.knownLanguages},getLanguagesToLearn:function(e){return e.languagesToLearn},getGenderImgByID:function(e){return function(t){return e.genderOptions[t].img}},getGenderDefaultProfileImgByUserGender:function(e){return e.genderOptions["O"].defaultProfileImg},getGenderOptionsAsArray:function(e,t){var n={M:{text:G.t("messages.TEXT_MAN")},W:{text:G.t("messages.TEXT_WOMAN")},O:{text:G.t("messages.TEXT_OTHER")}};return Object.keys(n).map((function(e){var a=n[e].text,r=t.getGenderImgByID(e);return new Object({id:e,text:a,img:r})}))},getLanguageImgByID:function(e){return function(t){return e.languageOptions[t].img}},getLanguageOptionsAsArray:function(e,t){var n={de:{text:G.t("messages.TEXT_LANGUAGE_DE")},zh:{text:G.t("messages.TEXT_LANGUAGE_ZH")},es:{text:G.t("messages.TEXT_LANGUAGE_ES")},fr:{text:G.t("messages.TEXT_LANGUAGE_FR")},en:{text:G.t("messages.TEXT_LANGUAGE_EN")},it:{text:G.t("messages.TEXT_LANGUAGE_IT")},ja:{text:G.t("messages.TEXT_LANGUAGE_JA")},pt:{text:G.t("messages.TEXT_LANGUAGE_PT")},all:{text:G.t("messages.TEXT_LANGUAGE_ALL")}};return Object.keys(e.languageOptions).map((function(e){var a=n[e].text,r=t.getLanguageImgByID(e);return new Object({id:e,text:a,img:r})}))},getLanguageFromLanguageOptionsByID:function(e){return function(t){var n={de:{text:G.t("messages.TEXT_LANGUAGE_DE")},zh:{text:G.t("messages.TEXT_LANGUAGE_ZH")},es:{text:G.t("messages.TEXT_LANGUAGE_ES")},fr:{text:G.t("messages.TEXT_LANGUAGE_FR")},en:{text:G.t("messages.TEXT_LANGUAGE_EN")},it:{text:G.t("messages.TEXT_LANGUAGE_IT")},ja:{text:G.t("messages.TEXT_LANGUAGE_JA")},pt:{text:G.t("messages.TEXT_LANGUAGE_PT")},all:{text:G.t("messages.TEXT_LANGUAGE_ALL")}};return Q(Q({},e.languageOptions[t]),{},{text:n[t].text})}},getLocation:function(e){return e.location},getRatings:function(e){return e.ratings},getRating:function(e){return function(t){return e.ratings?e.ratings[t]:null}}},mutations:{setName:function(e,t){e.name=t},setLanguage:function(e,t){G.locale=t,e.language=t},setLastName:function(e,t){e.lastName=t},setEmail:function(e,t){e.email=t},setAccount:function(e,t){t.hasOwnProperty("email")&&(e.email=t.email),t.hasOwnProperty("name")&&(e.name=t.name),t.hasOwnProperty("lastName")&&(e.lastName=t.lastName),t.hasOwnProperty("profileImg")&&(e.role=t.role),t.hasOwnProperty("id")&&(e.id=t.id),t.hasOwnProperty("chats")&&(e.chats=t.chats),t.hasOwnProperty("role")&&(e.role=t.role),t.hasOwnProperty("language")&&null!=t.language&&(G.locale=t.language,e.language=t.language)},setUsername:function(e,t){e.username=t},setBirthDate:function(e,t){e.birthDate=t},setGender:function(e,t){e.gender=t},setDescription:function(e,t){e.description=t},setAvgRating:function(e,t){e.avgRating=t},setNumRatings:function(e,t){e.numRatings=t},setKnownLanguages:function(e,t){e.knownLanguages=t},setLanguagesToLearn:function(e,t){e.languagesToLearn=t},setProfileImg:function(e,t){e.profileImg=t},setRatings:function(e,t){e.ratings=t},setRating:function(e,t){null==e.ratings&&(e.ratings={}),e.ratings[t.id]=t.rating},setProfile:function(e,t){t&&(t.hasOwnProperty("username")&&(e.username=t.username),t.hasOwnProperty("birthDate")&&(e.birthDate=t.birthDate),t.hasOwnProperty("gender")&&(e.gender=t.gender),t.hasOwnProperty("description")&&(e.description=t.description),t.hasOwnProperty("avgRating")&&(e.avgRating=t.avgRating),t.hasOwnProperty("numRatings")&&(e.numRatings=t.numRatings),t.hasOwnProperty("knownLanguages")&&(e.knownLanguages=t.knownLanguages),t.hasOwnProperty("languagesToLearn")&&(e.languagesToLearn=t.languagesToLearn),t.hasOwnProperty("profileImg")&&(e.profileImg=t.profileImg))},resetState:function(e){e.id=null,e.name=null,e.lastName=null,e.email=null,e.role="user",e.chats=[],e.username=null,e.birthDate=null,e.gender=null,e.description=null,e.avgRating=null,e.numRatings=null,e.knownLanguages=null,e.languagesToLearn=null,e.profileImg=null,e.ratings=null,e.location=null},setLocation:function(e,t){e.location=t}},actions:{initState:function(e){return new Promise((function(t,n){e.dispatch("database/getProfile").then((function(a){e.commit("setProfile",a),e.dispatch("database/getAccount").then((function(a){e.commit("setAccount",a),e.dispatch("getRatings").then((function(){t()})).catch((function(e){n(e)})),t()})).catch((function(e){n(e)}))})).catch((function(e){n(e)}))}))},resetState:function(e){return new Promise((function(t){e.commit("resetState"),t()}))},createAccount:function(e,t){return new Promise((function(n,a){e.dispatch("database/createAccount",t).then((function(){e.dispatch("database/setPersistance").then((function(){e.dispatch("database/setAccount",t).then((function(){e.commit("setAccount",t),n()})).catch((function(e){console.log("Error creating user account."),a(e)}))})).catch((function(e){a(e)}))})).catch((function(e){a(e)}))}))},setLanguage:function(e,t){return new Promise((function(n,a){e.dispatch("database/setAccountLanguage",t).then((function(){e.commit("setLanguage",t),n()})).catch((function(e){a(e)}))}))},generateNotificationToken:function(e){return new Promise((function(t,n){e.dispatch("database/generatePushNotificationToken").then((function(){t()})).catch((function(e){n(e)}))}))},updateAccountNameAndLastName:function(e,t){return new Promise((function(n,a){e.dispatch("database/updateAccountData",t).then((function(){t.hasOwnProperty("name")&&e.commit("setName",t.name),t.hasOwnProperty("lastName")&&e.commit("setLastName",t.lastName),n()})).catch((function(e){a(e)}))}))},updateAccountEmail:function(e,t){return new Promise((function(n,a){e.dispatch("database/updateAccountEmail",t).then((function(){e.commit("setEmail",t),n()})).catch((function(e){a(e)}))}))},updateAccountPassword:function(e,t){return new Promise((function(n,a){e.dispatch("database/updateAccountPassword",t).then((function(){n()})).catch((function(e){a(e)}))}))},login:function(e,t){return new Promise((function(n,a){e.dispatch("database/login",t).then((function(){e.commit("setAccount",t),e.dispatch("database/setPersistance").then((function(){n()})).catch((function(e){a(e)}))})).catch((function(e){a(e)}))}))},isUserLogged:function(e){return new Promise((function(t,n){e.dispatch("database/isUserAuth").then((function(e){t(e)})).catch((function(e){n(e)}))}))},logout:function(e){return new Promise((function(t,n){e.dispatch("database/logout").then((function(){t()})).catch((function(e){n(e)}))}))},sendEmailVerification:function(e){return new Promise((function(t,n){e.dispatch("database/sendEmailVerification").then((function(){t()})).catch((function(e){console.log("Error sending verification email."),n(e)}))}))},sendPasswordResetEmail:function(e,t){return new Promise((function(n,a){e.dispatch("database/sendPasswordResetEmail",t).then((function(){n()})).catch((function(e){console.log("Error sending password email."),a(e)}))}))},checkIfEmailIsVerified:function(e){return new Promise((function(t,n){e.dispatch("database/isEmailVerified").then((function(e){t(e)})).catch((function(e){console.log("Error checking if email is verified."),n(e)}))}))},checkIfUsernameIsAlreadyRegistered:function(e,t){return new Promise((function(n,a){e.dispatch("database/getProfileByUsername",t).then((function(e){n(!!e)})).catch((function(e){console.log("Error checking if username is already registered."),a(e)}))}))},createProfile:function(e,t){return new Promise((function(n,a){e.dispatch("checkIfUsernameIsAlreadyRegistered",t.username).then((function(r){r?a(ee):e.dispatch("database/setProfile",t).then((function(){e.commit("setUsername",t.username),e.commit("setBirthDate",t.birthDate),e.commit("setGender",t.gender),e.commit("setDescription",t.description),e.commit("setAvgRating",0),e.commit("setNumRatings",0),n()})).catch((function(e){console.log("Error creating user profile."),a(e)}))})).catch((function(e){a(e)}))}))},updateProfile:function(e,t){return new Promise((function(n,a){e.dispatch("database/updateProfile",t).then(Object(L["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.hasOwnProperty("username")&&e.commit("setUsername",t.username),t.hasOwnProperty("description")&&e.commit("setDescription",t.description),t.hasOwnProperty("gender")&&e.commit("setGender",t.gender),t.hasOwnProperty("birthDate")&&e.commit("setBirthDate",t.birthDate),t.hasOwnProperty("knownLanguages")&&e.commit("setKnownLanguages",t.knownLanguages),t.hasOwnProperty("languagesToLearn")&&e.commit("setLanguagesToLearn",t.languagesToLearn),!t.hasOwnProperty("profileImg")){r.next=9;break}return r.next=9,e.dispatch("setProfileImg",t.profileImg).catch((function(e){a(e)}));case 9:n();case 10:case"end":return r.stop()}}),r)})))).catch((function(e){a(e)}))}))},setLanguages:function(e,t){return new Promise((function(n,a){e.dispatch("database/setLanguages",t).then((function(){e.commit("setKnownLanguages",t.knownLanguages),e.commit("setLanguagesToLearn",t.languagesToLearn),n()})).catch((function(e){console.log("Error setting user languages."),a(e)}))}))},setProfileImg:function(e,t){return new Promise((function(n,r){a["a"].nextTick((function(){e.dispatch("database/uploadProfileImg",t).then((function(t){e.dispatch("database/setProfileImg",t).then((function(){e.commit("setProfileImg",t),n()})).catch((function(e){console.log("Error setting user profile image."),console.error(e),r(e)}))})).catch((function(e){console.log("Error uploading user profile image."),r(e)}))}))}))},setRegistrationCompleted:function(e){return new Promise((function(t,n){e.dispatch("database/setRegistrationCompleted").then((function(){t()})).catch((function(e){console.log("Error updating user registration state."),n(e)}))}))},getRegistrationState:function(e){return new Promise((function(t,n){e.dispatch("database/getProfile").then((function(a){e.dispatch("checkRegistrationState",a).then((function(n){e.commit("setProfile",a),t(n)})).catch((function(e){console.log(e),n(e)}))})).catch((function(e){console.error(e),n(te)}))}))},checkRegistrationState:function(e,t){return new Promise((function(n,a){e.dispatch("checkIfEmailIsVerified").then((function(e){e?t&&t.hasOwnProperty("username")&&t.hasOwnProperty("gender")&&t.hasOwnProperty("description")&&t.hasOwnProperty("avgRating")&&t.hasOwnProperty("numRatings")?t.hasOwnProperty("knownLanguages")&&t.hasOwnProperty("languagesToLearn")?t.hasOwnProperty("profileImg")?n("dashboard"):n("set-your-profile-image"):n("fill-your-languages"):n("fill-your-profile-info"):n("email-verification")})).catch((function(e){console.error(e),a(te)}))}))},getCurrentLocation:function(){return new Promise((function(e,t){try{navigator.geolocation.getCurrentPosition((function(t){e({lat:t.coords.latitude,lng:t.coords.longitude})}),(function(e){console.error(e),t(ne)}))}catch(n){console.log(n)}}))},getRatings:function(e){return new Promise((function(t,n){e.dispatch("database/getRatings").then((function(n){e.commit("setRatings",n),t()})).catch((function(e){console.log("Error retrieving user ratings."),n(e)}))}))},rateUser:function(e,t){return new Promise((function(n,a){e.dispatch("database/setRating",t).then((function(){e.commit("setRating",t),e.commit("users/addRating",t),n()})).catch((function(e){console.log(e),console.log("Error rating user."),a(e)}))}))},getLocation:function(e){return new Promise((function(t,n){e.dispatch("getCurrentLocation").then((function(n){e.commit("setLocation",n),e.dispatch("database/updateUserLocation",n).then((function(){t(n)})).catch((function(){t(n)}))})).catch((function(a){console.error(a),e.dispatch("database/getLocation").then((function(n){e.commit("setLocation",n),t(n)})).catch((function(e){n(e)}))}))}))}}},re=n("8cdb"),oe=n.n(re);function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}a["a"].use(i["a"]);var ce={namespaced:!0,modules:{user:ae,users:K,database:V,permissions:q},state:{events:{},eventsToShowIDs:[],mapEventsToShowIDs:[],lastEventShowed:null,languageInvolvedFilter:"all",eventsTab:0},getters:{getLanguageInvolvedFilter:function(e){return e.languageInvolvedFilter},getFilters:function(e){return{languageInvolved:e.languageInvolvedFilter}},getEvents:function(e){return e.events},getEventsTab:function(e){return e.eventsTab},getEventByID:function(e){return function(t){return e.events[t]}},getEventsToShow:function(e,t){var n=[];return e.eventsToShowIDs.forEach((function(a){var r=null,o=t["user/getLocation"];null!=o&&void 0!=o.lat&&void 0!=o.lng&&(r=oe()(e.events[a].location.coordinates,o),r/=1e3);var s=ie({id:a},e.events[a]);s["distance"]=r,n.push(s)})),n},getMapEventsToShow:function(e){var t=[];return e.mapEventsToShowIDs.forEach((function(n){t.push(ie({id:n},e.events[n]))})),t},getLastEventShowed:function(e){return e.lastEventShowed},amIParticipating:function(e){return function(t){var n=null;return e.events[t.eventID]?(n=e.events[t.eventID].participants.find((function(e){return e==t.userID})),void 0!=n):null}}},mutations:{setLanguageInvolvedFilter:function(e,t){e.languageInvolvedFilter=t},setEventsTab:function(e,t){e.eventsTab=t},removeEventByID:function(e,t){delete e.events[t];var n=e.eventsToShowIDs.findIndex((function(e){return e==t}));e.eventsToShowIDs.splice(n,1);var a=e.mapEventsToShowIDs.findIndex((function(e){return e==t}));e.mapEventsToShowIDs.splice(a,1)},resetState:function(e){e.events={},e.eventsToShowIDs.splice(0,e.eventsToShowIDs.length),e.mapEventsToShowIDs.splice(0,e.mapEventsToShowIDs.length),e.lastEventShowed=null,e.languageInvolvedFilter="all"},resetEventsToShowIDs:function(e){e.eventsToShowIDs.splice(0,e.eventsToShowIDs.length),e.lastEventShowed=null},addEvent:function(e,t){e.events[t.id]=t},addParticipantToEvent:function(e,t){-1==e.events[t.eventID].participants.findIndex((function(e){return e==t.userID}))&&e.events[t.eventID].participants.push(t.userID)},removeParticipantFromEvent:function(e,t){var n=e.events[t.eventID].participants.findIndex((function(e){return e==t.userID}));e.events[t.eventID].participants.splice(n,1)},addEventToShow:function(e,t){-1==e.eventsToShowIDs.findIndex((function(e){return e==t}))&&e.eventsToShowIDs.push(t)},addMapEventToShow:function(e,t){-1==e.mapEventsToShowIDs.findIndex((function(e){return e==t}))&&e.mapEventsToShowIDs.push(t)},setLastEventShowed:function(e,t){e.lastEventShowed=t}},actions:{initState:function(e){return new Promise((function(t,n){e.dispatch("resetState").then((function(){e.dispatch("getAllEvents").then((function(){t()})).catch((function(e){n(e)}))})).catch((function(e){n(e)}))}))},resetEventsToShowIDs:function(e){e.commit("resetEventsToShowIDs")},createEvent:function(e,t){return new Promise((function(n,a){e.dispatch("database/createEvent",t).then((function(t){var a={lat:t.location.coordinates.latitude,lng:t.location.coordinates.longitude};t.location.coordinates=a,e.commit("addEvent",t),e.commit("addMapEventToShow",t.id),n()})).catch((function(e){a(e)}))}))},removeEvent:function(e,t){return new Promise((function(n,a){e.dispatch("database/removeEvent",t).then((function(){e.commit("removeEventByID",t),n()})).catch((function(e){a(e)}))}))},updateEvent:function(e,t){return new Promise((function(n,a){var r={},o=e.getters.getEventByID(t.id);if(t.name!=o.name&&(r["name"]=t.name),new Date(t.date.setHours(0,0,0))!=o.date.toDate().toString()&&(r["date"]=t.date),t.headerImg!=o.headerImg&&(r["headerImg"]=t.headerImg),t.description!=o.description&&(r["description"]=t.description),t.involvedLanguages.length!=o.involvedLanguages.length)r["involvedLanguages"]=t.involvedLanguages;else for(var s=0;s<t.involvedLanguages.length;s++)if(t.involvedLanguages[s]!=o.involvedLanguages[s]){r["involvedLanguages"]=t.involvedLanguages;break}t.location.coordinates==o.location.coordinates&&t.location.city==o.location.city&&t.location.place==o.location.place&&t.location.address==o.location.address||(r["location"]=t.location),Object.keys(r).length>0&&(r["id"]=t.id,e.dispatch("database/updateEvent",r).then((function(t){for(var a=0,s=Object.entries(r);a<s.length;a++){var i=Object($["a"])(s[a],2),c=i[0],u=i[1];if(o[c]=u,"location"==c){var l={lat:o.location.coordinates.latitude,lng:o.location.coordinates.longitude};o.location.coordinates=l}}for(var g=0,f=Object.entries(t);g<f.length;g++){var d=Object($["a"])(f[g],2),h=d[0],m=d[1];"location"!=h&&(o[h]=m)}e.commit("addEvent",o),n()})).catch((function(e){a(e)})))}))},getEvents:function(e){return new Promise((function(t,n){var a=e.getters.getFilters;e.dispatch("database/getNextEventsPage",{lastEventShowed:e.getters.getLastEventShowed,limit:U["a"].EVENTS_PAGE_SIZE,filters:a}).then((function(r){e.commit("setLastEventShowed",r.newLastEventShowed),r.events.forEach((function(t){var n=e.getters["user/getLocation"],a=null,r={lat:t.location.coordinates.latitude,lng:t.location.coordinates.longitude},o=t.location;o["coordinates"]=r,t["location"]=o,null!=n&&(a=oe()(t.location.coordinates,n),a/=1e3),t=ie(ie({},t),{},{distance:a}),e.commit("addEvent",t),e.commit("addEventToShow",t.id)})),r.events.length>0?e.dispatch("database/isNextEventsPageEmpty",{lastEventShowed:e.getters.getLastEventShowed,limit:U["a"].EVENTS_PAGE_SIZE,filters:a}).then((function(e){t(!e)})).catch((function(e){n(e)})):t(!1)})).catch((function(e){n(e)}))}))},getAllEvents:function(e){return new Promise((function(t,n){e.dispatch("database/getEventsToBeCelebrated").then((function(n){n.forEach((function(t){var n={lat:t.location.coordinates.latitude,lng:t.location.coordinates.longitude},a=t.location;a["coordinates"]=n,t["location"]=a,e.commit("addEvent",t),e.commit("addMapEventToShow",t.id)})),t()})).catch((function(e){n(e)}))}))},getEventParticipants:function(e,t){return new Promise((function(n,a){var r=e.getters.getEventByID(t);e.dispatch("database/getMultipleProfilesByUID",r.participants).then((function(t){t.forEach((function(t){e.commit("users/addUser",t)})),n(t)})).catch((function(e){a(e)}))}))},resetState:function(e){return new Promise((function(t){e.commit("resetState"),t()}))},addParticipantToEvent:function(e,t){return new Promise((function(n,a){e.dispatch("database/addParticipantToEvent",t).then((function(a){e.commit("addParticipantToEvent",{eventID:t,userID:a}),n()})).catch((function(e){console.log(e),a(e)}))}))},removeParticipantFromEvent:function(e,t){return new Promise((function(n,a){e.dispatch("database/removeParticipantFromEvent",t).then((function(a){e.commit("removeParticipantFromEvent",{eventID:t,userID:a}),n()})).catch((function(e){a(e)}))}))},getEventByID:function(e,t){return new Promise((function(n,a){e.dispatch("database/getEventByID",t).then((function(t){if(t){var a=e.getters["user/getLocation"],r=null,o={lat:t.location.coordinates.latitude,lng:t.location.coordinates.longitude},s=t.location;s["coordinates"]=o,t["location"]=s,null!=a&&(r=oe()(t.location.coordinates,a)),t=ie(ie({},t),{},{distance:r/1e3}),e.commit("addEvent",t),n(t)}else n(null)})).catch((function(e){console.log("Error getting event by it's id in firebase."),a(e)}))}))}}};n("ac4d"),n("8a81"),n("1c4c"),n("55dd"),n("6762"),n("2fdb");function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ge(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=fe(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r,o=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==a.return||a.return()}finally{if(s)throw r}}}}function fe(e,t){if(e){if("string"===typeof e)return de(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?de(e,t):void 0}}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}a["a"].use(i["a"]);var he={namespaced:!0,modules:{user:ae,users:K,database:V,permissions:q},state:{chats:{},chatsToShowIDs:[],chatListListener:null,chatMessagesListeners:[],usernameFilter:null},getters:{getChatByID:function(e){return function(t){return e.chats[t]}},getChatsToShowIDs:function(e){return e.chatsToShowIDs},getChatMessagesByChatID:function(e){return function(t){return void 0!=e.chats[t]?e.chats[t].messages:[]}},getUnreadMessagesByChatID:function(e,t){return function(n){var a,r=t["user/getID"],o=[];if(void 0!=e.chats[n])for(a=e.chats[n].messages.length-1;a>=0;a--)if(e.chats[n].messages[a].sender==r||e.chats[n].messages[a].read){if(e.chats[n].messages[a].sender!=r&&e.chats[n].messages[a].read)break;if(e.chats[n].messages[a].sender==r)break}else o.push(e.chats[n].messages[a].id);return o}},getUnreadMessages:function(e,t){var n=0;return e.chatsToShowIDs.forEach((function(e){n+=t.getUnreadMessagesByChatID(e).length})),n},getChatsToShow:function(e,t){var n=[];return null==e.usernameFilter?e.chatsToShowIDs.forEach((function(t){var a={};a.users=e.chats[t].users,a.id=e.chats[t].id,a.lastMessage=e.chats[t].messages[e.chats[t].messages.length-1],n.push(a)})):e.chatsToShowIDs.forEach((function(a){var r={};r.users=e.chats[a].users;var o=t.getUserByChatID(a).username.toLowerCase();o.includes(e.usernameFilter.toLowerCase())&&(r.id=e.chats[a].id,r.lastMessage=e.chats[a].messages[e.chats[a].messages.length-1],n.push(r))})),n},getUserByChatID:function(e,t){return function(n){var a;return a=e.chats[n].users[0]==t["user/getID"]?e.chats[n].users[1]:e.chats[n].users[0],t["users/getUserByID"](a)}},getNotReadMessagesCountByChatID:function(e,t){return function(n){var a,r=0,o=t["user/getID"];for(a=e.chats[n].messages.length-1;a>=0;a--)if(e.chats[n].messages[a].sender==o||e.chats[n].messages[a].read){if(e.chats[n].messages[a].sender!=o&&e.chats[n].messages[a].read)break;if(e.chats[n].messages[a].sender==o)break}else r++;return r}}},mutations:{resetState:function(e){e.chats={},e.chatsToShowIDs.splice(0,e.chatsToShowIDs.length),null!=e.chatListListener&&void 0!=e.chatListListener&&(e.chatListListener(),e.chatListListener=null),e.chatMessagesListeners.forEach((function(e){null!=e&&void 0!=e&&e()})),e.chatMessagesListeners.splice(0,e.chatMessagesListeners.length)},addChatMessagesListener:function(e,t){e.chatMessagesListeners.push(t)},addChat:function(e,t){(!e.chats[t.id]||t.messages.length>e.chats[t.id].messages.length)&&a["a"].set(e.chats,t.id,t)},updateChatMessages:function(e,t){for(var n=function(n){var r=t.messages.findIndex((function(a){return a.id===e.chats[t.chatID].messages[n].id}));if(-1!=r&&(a["a"].set(e.chats[t.chatID].messages,n,t.messages[r]),t.messages.splice(r,1),0==t.messages.length))return"break"},r=e.chats[t.chatID].messages.length-1;r>=0;r--){var o=n(r);if("break"===o)break}},addChatToShow:function(e,t){-1==e.chatsToShowIDs.findIndex((function(e){return e==t}))&&e.chatsToShowIDs.push(t)},sortChatsToShowByLastMessage:function(e){function t(t,n){var a=null,r=null;return e.chats[t].messages[e.chats[t].messages.length-1]&&(a=e.chats[t].messages[e.chats[t].messages.length-1].date),e.chats[n].messages[e.chats[n].messages.length-1]&&(r=e.chats[n].messages[e.chats[n].messages.length-1].date),a<r?1:a>r?-1:0}e.chatsToShowIDs.sort(t)},setUsernameFilter:function(e,t){e.usernameFilter=t},setChatListListener:function(e,t){e.chatListListener=t},pushChatMessages:function(e,t){t.messages.forEach((function(n){if(null!=n.date&&void 0!=n.date)if(0==e.chats[t.chatID].messages.length)a["a"].set(e.chats[t.chatID].messages,0,n);else{for(var r=!1,o=e.chats[t.chatID].messages.length-1;o>=0;o--){if(null!=n.date&&void 0!=n.date&&(e.chats[t.chatID].messages[o].date<n.date&&!e.chats[t.chatID].messages[o+1]&&e.chats[t.chatID].messages[o].id!=n.id||e.chats[t.chatID].messages[o].date<n.date&&e.chats[t.chatID].messages[o+1].date>n.date&&e.chats[t.chatID].messages[o].id!=n.id&&e.chats[t.chatID].messages[o+1].id!=n.id)){e.chats[t.chatID].messages.splice(o+1,0,n),r=!0;break}if(null!=n.date&&void 0!=n.date&&0==o&&e.chats[t.chatID].messages[o].date>n.date&&e.chats[t.chatID].messages[o].id!=n.id){e.chats[t.chatID].messages.splice(o,0,n),r=!0;break}}r||0!=e.chats[t.chatID].messages.length||e.chats[t.chatID].messages.push(n)}}))}},actions:{resetState:function(e){return new Promise((function(t){e.commit("resetState"),t()}))},initState:function(e){return new Promise((function(t,n){e.dispatch("createChatListeners",e.getters["user/getChats"]).then((function(){t()})).catch((function(e){n(e)}))}))},manageChatListChange:function(e,t){return new Promise(function(){var n=Object(L["a"])(regeneratorRuntime.mark((function n(a,r){var o,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:o=ge(t.chats),n.prev=1,i=regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=s.value,-1!=e.getters.getChatsToShowIDs.findIndex((function(e){return e==n}))||e.state.chats.hasOwnProperty(n)&&0!=e.state.chats[n].messages.length){t.next=4;break}return t.next=4,e.dispatch("database/getChatByID",n).then(function(){var t=Object(L["a"])(regeneratorRuntime.mark((function t(a){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=le(le({},a),{},{messages:[]}),o=a.users[0]==e.getters["user/getID"]?a.users[1]:a.users[0],t.next=4,e.dispatch("users/getUserByID",o).then((function(){e.commit("addChat",a)})).catch((function(e){r(e)}));case 4:return t.next=6,e.dispatch("database/createChatMessagesListener",n).then((function(){e.commit("addChatToShow",a.id),e.commit("sortChatsToShowByLastMessage")})).catch((function(e){r(e)}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){r(e)}));case 4:case"end":return t.stop()}}),t)})),o.s();case 4:if((s=o.n()).done){n.next=8;break}return n.delegateYield(i(),"t0",6);case 6:n.next=4;break;case 8:n.next=13;break;case 10:n.prev=10,n.t1=n["catch"](1),o.e(n.t1);case 13:return n.prev=13,o.f(),n.finish(13);case 16:a();case 17:case"end":return n.stop()}}),n,null,[[1,10,13,16]])})));return function(e,t){return n.apply(this,arguments)}}())},manageChatMessagesChange:function(e,t){return new Promise((function(n){e.commit("addChatMessagesListener",t.listener);var a=[],r=[],o=[];t.messages.forEach((function(e){"added"==e.change&&e.date?a.push(e):"modified"==e.change&&e.read&&e.date?r.push(e):"modified"==e.change&&!e.read&&e.date&&o.push(e)})),a.length>0&&e.commit("pushChatMessages",{chatID:t.id,messages:a}),o.length>0&&e.commit("pushChatMessages",{chatID:t.id,messages:o}),r.length>0&&e.commit("updateChatMessages",{chatID:t.id,messages:r}),e.commit("sortChatsToShowByLastMessage"),n()}))},setChatMessagesToReadByChatID:function(e,t){return new Promise((function(n,a){var r=e.getters.getUnreadMessagesByChatID(t);e.dispatch("database/setMessagesToRead",{chatID:t,messages:r}).catch((function(e){a(e)}))}))},sendNewChatMessage:function(e,t){return new Promise((function(n,a){var r,o=e.getters.getChatByID(t.chatID);r=0==e.getters.getChatByID(t.chatID).messages.length?e.dispatch("database/addChat",{id:t.chatID,users:o.users}):Promise.resolve(),r.then((function(){e.dispatch("database/addMessagesToChat",{chatID:t.chatID,message:{sender:e.getters["user/getID"],text:t.messageText}}).then((function(){n()})).catch((function(e){a(e)}))})).catch((function(e){a(e)}))}))},createChatListeners:function(e){return new Promise((function(t,n){e.dispatch("database/createAccountListener",e.getters["user/getID"]).then((function(){null!=e.state.chatListListener&&void 0!=e.state.chatListListener&&e.state.chatListListener(),e.commit("setChatListListener",ae.listener),t()})).catch((function(e){n(e)}))}))}}};function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}a["a"].use(i["a"]);var Te={namespaced:!0,modules:{database:V,permissions:q,users:K,user:ae},state:{lastUserShowed:-1,rankingUsers:[],rankingUsersIDs:[]},getters:{getRankingUsersToShow:function(e,t){var n=[],a=0;return e.rankingUsersIDs.forEach((function(r){var o=Ee({},t["users/getUserByID"](r));o["score"]=e.rankingUsers[a].score,o["position"]=e.rankingUsers[a].position,n.push(o),a++})),n},getLastUserShowed:function(e){return e.lastUserShowed},getRankedUserByIndex:function(e){return function(t){return e.rankingUsers[t]}},getRankingUsers:function(e){return e.rankingUsers}},mutations:{resetState:function(e){e.lastUserShowed=-1,e.rankingUsers.splice(0,e.rankingUsers.length),e.rankingUsersIDs.splice(0,e.rankingUsersIDs.length)},setRankingUsers:function(e,t){t.forEach((function(t){e.rankingUsers.push(t)}))},setLastUserShowed:function(e,t){e.lastUserShowed=t},addRankingUserID:function(e,t){-1==e.rankingUsersIDs.findIndex((function(e){return e==t}))&&e.rankingUsersIDs.push(t)}},actions:{initState:function(e){return new Promise((function(t,n){e.dispatch("resetState").then((function(){e.dispatch("getRankingUsers").then((function(){console.log("tee"),t()})).catch((function(e){n(e)}))})).catch((function(e){n(e)}))}))},getRankingUsers:function(e){return new Promise((function(t,n){e.dispatch("database/getTop100RankingUsers").then((function(n){e.commit("setRankingUsers",n),t()})).catch((function(e){n(e)}))}))},getPagedRankingUsers:function(e){return new Promise(function(){var t=Object(L["a"])(regeneratorRuntime.mark((function t(n,a){var r,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.getters.getLastUserShowed+1,o=r+U["a"].RANKING_PAGE_SIZE,r==e.getters.getRankingUsers&&n(!1),s=regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.getters.getRankedUserByIndex(r),t.next=3,e.dispatch("users/getUserByID",n.id).then((function(){e.commit("addRankingUserID",n.id)})).catch((function(e){a(e)}));case 3:r++;case 4:case"end":return t.stop()}}),t)}));case 4:if(!(r<o&&r<e.getters.getRankingUsers.length)){t.next=8;break}return t.delegateYield(s(),"t0",6);case 6:t.next=4;break;case 8:e.commit("setLastUserShowed",r-1),r<e.getters.getRankingUsers.length?n(!0):n(!1);case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())},areThereMoreRankingUsersToShow:function(e){return new Promise(function(){var t=Object(L["a"])(regeneratorRuntime.mark((function t(n){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.getters.getLastUserShowed+1,a<e.getters.getRankingUsers.length?n(!0):n(!1);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},resetState:function(e){return new Promise((function(t){e.commit("resetState"),t()}))}}};a["a"].use(i["a"]);var _e=new i["a"].Store({modules:{user:ae,users:K,events:ce,chats:he,ranking:Te,database:V,permissions:q},state:{appInfoLoaded:!1},getters:{getAppInfoLoaded:function(e){return e.appInfoLoaded}},mutations:{setAppInfoLoaded:function(e,t){e.appInfoLoaded=t}},actions:{getLoggedUser:function(e){return new Promise((function(t,n){e.dispatch("database/isUserAuth").then((function(e){t(e)})).catch((function(e){console.error(e),n(e)}))}))},resetAppState:function(e){return new Promise((function(t,n){var a=this;if(e.getters.getAppInfoLoaded){var r=[];r.push(e.dispatch("user/resetState")),r.push(e.dispatch("users/resetState")),r.push(e.dispatch("chats/resetState")),r.push(e.dispatch("events/resetState")),r.push(e.dispatch("ranking/resetState")),r.push(e.dispatch("permissions/resetState")),Promise.all(r).then((function(){console.log("state successfully reseted."),e.commit("setAppInfoLoaded",!1),t()})).catch((function(e){console.error(e),console.log("Error resetting state."),n(a.$i18n.t("messages.ERROR_GENERIC_PROBLEM"))}))}else t()}))},initAppInfo:function(e){return new Promise((function(t,n){e.dispatch("user/isUserLogged").then((function(a){a&&!e.getters.getAppInfoLoaded?e.dispatch("user/initState").then((function(){console.log("user module state successfully initiated."),e.dispatch("chats/initState").then((function(){console.log("chats module state successfully initiated."),e.dispatch("ranking/initState").then((function(){console.log("ranking module state successfully initiated."),e.dispatch("events/initState").then((function(){console.log("events module state successfully initiated."),e.commit("setAppInfoLoaded",!0),t()})).catch((function(e){n(e)}))})).catch((function(e){n(e)}))})).catch((function(e){n(e)}))})).catch((function(e){n(e)})):t()})).catch((function(e){console.log("Error initiating users module state."),n(e)}))}))}}});a["a"].use(_["a"]);var pe=new _["a"]({base:"/",routes:[{path:"*",redirect:"/home"},{path:"/",redirect:"/home"},{path:"/home",name:"home",component:w},{path:"/login",name:"login",component:function(){return n.e("chunk-c6d03f52").then(n.bind(null,"c58e"))}},{path:"/sign-up",name:"signUp",component:function(){return n.e("chunk-4d7591bf").then(n.bind(null,"3fe9"))}},{path:"/email-verification",name:"emailVerification",component:function(){return Promise.all([n.e("chunk-7ef6b764"),n.e("chunk-39e2aeca")]).then(n.bind(null,"7e5e"))},meta:{requiresAuth:!0}},{path:"/fill-your-profile-info",name:"fillYourProfileInfo",component:function(){return Promise.all([n.e("chunk-25c771b8"),n.e("chunk-7ef6b764"),n.e("chunk-20d8013b"),n.e("chunk-3b63178d")]).then(n.bind(null,"3fbf"))},meta:{requiresAuth:!0}},{path:"/fill-your-languages",name:"fillYourLanguages",component:function(){return Promise.all([n.e("chunk-25c771b8"),n.e("chunk-20d8013b"),n.e("chunk-014fb837")]).then(n.bind(null,"505b"))},meta:{requiresAuth:!0}},{path:"/set-your-profile-image",name:"setYourProfileImage",component:function(){return n.e("chunk-28e4efe2").then(n.bind(null,"4559"))},meta:{requiresAuth:!0}},{path:"/send-change-password-email",name:"sendChangePasswordEmail",component:function(){return Promise.all([n.e("chunk-7ef6b764"),n.e("chunk-1bfdcb26")]).then(n.bind(null,"67bc"))},meta:{requiresAuth:!1}},{path:"/dashboard",name:"dashboard",redirect:{name:"searchHome"},meta:{requiresAuth:!0},component:function(){return n.e("chunk-6cc23625").then(n.bind(null,"7277"))},children:[{path:"ranking",name:"rankingHome",meta:{requiresAuth:!0,menu:"ranking"},component:function(){return Promise.all([n.e("chunk-a3f747da"),n.e("chunk-382272b3"),n.e("chunk-b648f4e6")]).then(n.bind(null,"d459"))}},{path:"ranking/user/:id/",name:"userProfileRanking",meta:{requiresAuth:!0,menu:"ranking"},component:function(){return Promise.all([n.e("chunk-7ef6b764"),n.e("chunk-4e37f1b9"),n.e("chunk-0062ab72")]).then(n.bind(null,"2217"))}},{path:"events",name:"eventsHome",meta:{requiresAuth:!0,menu:"events"},component:function(){return Promise.all([n.e("chunk-a3f747da"),n.e("chunk-25c771b8"),n.e("chunk-20d8013b"),n.e("chunk-382272b3"),n.e("chunk-d6467d40")]).then(n.bind(null,"33bc"))}},{path:"event/:id/",name:"eventDescription",meta:{requiresAuth:!0,menu:"events"},component:function(){return Promise.all([n.e("chunk-7ef6b764"),n.e("chunk-bba67cba")]).then(n.bind(null,"6e83"))}},{path:"event/:id/edit",name:"eventEdit",meta:{requiresAuth:!0,menu:"events"},component:function(){return Promise.all([n.e("chunk-a3f747da"),n.e("chunk-25c771b8"),n.e("chunk-7ef6b764"),n.e("chunk-20d8013b"),n.e("chunk-1e794cfc")]).then(n.bind(null,"47f3"))}},{path:"events/create",name:"eventCreate",meta:{requiresAuth:!0,menu:"events"},component:function(){return Promise.all([n.e("chunk-a3f747da"),n.e("chunk-25c771b8"),n.e("chunk-7ef6b764"),n.e("chunk-20d8013b"),n.e("chunk-a47c45dc")]).then(n.bind(null,"8099"))}},{path:"search",name:"searchHome",meta:{requiresAuth:!0,menu:"search"},component:function(){return Promise.all([n.e("chunk-a3f747da"),n.e("chunk-382272b3"),n.e("chunk-17adf310")]).then(n.bind(null,"9c0b"))}},{path:"search/filter",name:"searchFilter",meta:{requiresAuth:!0,menu:"search"},component:function(){return Promise.all([n.e("chunk-a3f747da"),n.e("chunk-25c771b8"),n.e("chunk-20d8013b"),n.e("chunk-14b9bb78")]).then(n.bind(null,"b630"))}},{path:"search/user/:id/",name:"userProfileSearch",meta:{requiresAuth:!0,menu:"search"},component:function(){return Promise.all([n.e("chunk-7ef6b764"),n.e("chunk-4e37f1b9"),n.e("chunk-0062ab72")]).then(n.bind(null,"2217"))}},{path:"chats",name:"chatHome",meta:{requiresAuth:!0,menu:"chats"},component:function(){return Promise.all([n.e("chunk-a3f747da"),n.e("chunk-25c771b8"),n.e("chunk-9bf12744")]).then(n.bind(null,"7c31"))}},{path:"chats/chat/:id/",name:"chatWithUser",meta:{requiresAuth:!0,menu:"chats"},component:function(){return Promise.all([n.e("chunk-a3f747da"),n.e("chunk-11350bc4")]).then(n.bind(null,"cac0"))}},{path:"chats/user/:id/",name:"userProfileChat",meta:{requiresAuth:!0,menu:"chats"},component:function(){return Promise.all([n.e("chunk-7ef6b764"),n.e("chunk-4e37f1b9"),n.e("chunk-0062ab72")]).then(n.bind(null,"2217"))}},{path:"profile",name:"profileHome",meta:{requiresAuth:!0,menu:"profile"},component:function(){return Promise.all([n.e("chunk-a3f747da"),n.e("chunk-7ef6b764"),n.e("chunk-4e37f1b9"),n.e("chunk-0256ba59")]).then(n.bind(null,"31f5"))}},{path:"profile/:id/edit",name:"profileEdit",meta:{requiresAuth:!0,menu:"profile"},component:function(){return Promise.all([n.e("chunk-a3f747da"),n.e("chunk-25c771b8"),n.e("chunk-7ef6b764"),n.e("chunk-20d8013b"),n.e("chunk-97fe767c")]).then(n.bind(null,"5278"))}},{path:"settings",name:"settings",meta:{requiresAuth:!0,menu:"profile"},component:function(){return Promise.all([n.e("chunk-a3f747da"),n.e("chunk-25c771b8"),n.e("chunk-7ef6b764"),n.e("chunk-59fedc16")]).then(n.bind(null,"8339"))}},{path:"settings/account",name:"settingsAccount",meta:{requiresAuth:!0,menu:"profile"},component:function(){return Promise.all([n.e("chunk-a3f747da"),n.e("chunk-25c771b8"),n.e("chunk-2d213713")]).then(n.bind(null,"ad60"))}},{path:"settings/account/edit/name-and-last-name",name:"settingsAccountEditNameAndLastName",meta:{requiresAuth:!0,menu:"profile"},component:function(){return Promise.all([n.e("chunk-a3f747da"),n.e("chunk-7b29b94c")]).then(n.bind(null,"f630"))}},{path:"settings/account/edit/email",name:"settingsAccountEditEmail",meta:{requiresAuth:!0,menu:"profile"},component:function(){return Promise.all([n.e("chunk-a3f747da"),n.e("chunk-7ef6b764"),n.e("chunk-1ba8e311")]).then(n.bind(null,"3299"))}},{path:"settings/account/password-verification",name:"settingsAccountPasswordVerification",meta:{requiresAuth:!0,menu:"profile"},component:function(){return Promise.all([n.e("chunk-a3f747da"),n.e("chunk-3417d63c")]).then(n.bind(null,"9338"))}},{path:"settings/account/edit/password",name:"settingsAccountEditPassword",meta:{requiresAuth:!0,menu:"profile"},component:function(){return Promise.all([n.e("chunk-a3f747da"),n.e("chunk-7ef6b764"),n.e("chunk-1bcecc20")]).then(n.bind(null,"4ecb"))}},{path:"settings/language",name:"settingsLanguage",meta:{requiresAuth:!0,menu:"profile"},component:function(){return Promise.all([n.e("chunk-a3f747da"),n.e("chunk-25c771b8"),n.e("chunk-2d0b9607")]).then(n.bind(null,"334e"))}},{path:"settings/permissions",name:"settingsPermissions",meta:{requiresAuth:!0,menu:"profile"},component:function(){return Promise.all([n.e("chunk-a3f747da"),n.e("chunk-25c771b8"),n.e("chunk-2d0ceaf1")]).then(n.bind(null,"6100"))}}]}]});pe.beforeEach((function(e,t,n){var a=A.a.auth().currentUser,r=e.matched.some((function(e){return e.meta.requiresAuth}));r&&!a?n("home"):r&&a&&e.name!==t.name&&(!e.path.startsWith("/dashboard")||!t.path.startsWith("/dashboard"))||!r&&a?_e.dispatch("user/getRegistrationState").then((function(a){e.path.startsWith("/"+a)?n():t.path.startsWith("/"+a)?n({name:t.name}):n({path:"/"+a})})):n()}));var Ae=pe,Re=n("9483");Object(Re["a"])("".concat("/","firebase-messaging-sw.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var be=n("123d"),Ie=n.n(be),ve=n("755e"),Oe=(n("5aea"),n("f309")),Se=n("8654");a["a"].use(Oe["a"]),a["a"].component("v-text-field",Se["a"]);var Pe=new Oe["a"]({icons:{iconfont:"mdi"},theme:{themes:{light:{primary:"#00abba",secondary:"#003c4d",thirdary:"#017394",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}},components:{VTextField:Se["a"]}}),we=n("ab6f");a["a"].use(Ie.a),a["a"].use(y["a"]),a["a"].use(ve,{load:{key:"AIzaSyBYhPYAZkG6ML2kRArdK8xITPrZWzF0JSw",libraries:"places"}}),a["a"].config.productionTip=!1;var Le="",Ue={apiKey:"AIzaSyABGil2afckXxQ127FS8fW6y5phy1wzd6g",authDomain:"tfg-vue-m3m.firebaseapp.com",databaseURL:"https://tfg-vue-m3m.firebaseio.com",projectId:"tfg-vue-m3m",storageBucket:"tfg-vue-m3m.appspot.com",messagingSenderId:"144506012173",appId:"1:144506012173:web:8a58aa4b50d8b336184b44"};A.a.initializeApp(Ue);var Ne=A.a.firestore(),ye=A.a.storage(),De=null;try{De=A.a.messaging()}catch(ke){console.log("This browser does not support firebase messaging.")}t["default"]={db:Ne,storage:ye,messaging:De,i18n:G};A.a.auth().onAuthStateChanged((function(){Le||(Le=new a["a"]({router:Ae,store:_e,i18n:G,render:function(e){return e(T)},vuetify:Pe,components:{App:T}}).$mount("#app"))})),a["a"].use(we["a"],{apiKey:"AIzaSyBYhPYAZkG6ML2kRArdK8xITPrZWzF0JSw",language:G.locale})},"5aea":function(e,t,n){},8077:function(e,t,n){e.exports=n.p+"img/WhiteLogoWeBabble.7ac0fe89.png"},"8f8d":function(e,t,n){"use strict";var a=n("31f2"),r=n.n(a);r.a}});
//# sourceMappingURL=app.7fc05cd1.js.map